"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PlaceBidLibrary={contractName:"PlaceBidLibrary",abi:[{constant:true,inputs:[{name:"_quantity",type:"uint256"},{name:"_coreAddress",type:"address"},{components:[{name:"minimumBid",type:"uint256"},{name:"remainingCurrentSets",type:"uint256"},{name:"combinedCurrentUnits",type:"uint256[]"},{name:"combinedNextSetUnits",type:"uint256[]"},{name:"combinedTokenArray",type:"address[]"}],name:"_biddingParameters",type:"tuple"}],name:"validatePlaceBid",outputs:[],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[{name:"_quantity",type:"uint256"},{name:"_auctionLibrary",type:"address"},{components:[{name:"minimumBid",type:"uint256"},{name:"remainingCurrentSets",type:"uint256"},{name:"combinedCurrentUnits",type:"uint256[]"},{name:"combinedNextSetUnits",type:"uint256[]"},{name:"combinedTokenArray",type:"address[]"}],name:"_biddingParameters",type:"tuple"},{components:[{name:"auctionStartTime",type:"uint256"},{name:"auctionTimeToPivot",type:"uint256"},{name:"auctionStartPrice",type:"uint256"},{name:"auctionPivotPrice",type:"uint256"}],name:"_auctionPriceParameters",type:"tuple"},{name:"_rebalanceState",type:"uint8"}],name:"getBidPrice",outputs:[{name:"",type:"uint256[]"},{name:"",type:"uint256[]"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[{name:"_unitsMultiplier",type:"uint256"},{name:"_priceNumerator",type:"uint256"},{name:"_priceDivisor",type:"uint256"},{components:[{name:"minimumBid",type:"uint256"},{name:"remainingCurrentSets",type:"uint256"},{name:"combinedCurrentUnits",type:"uint256[]"},{name:"combinedNextSetUnits",type:"uint256[]"},{name:"combinedTokenArray",type:"address[]"}],name:"_biddingParameters",type:"tuple"}],name:"createTokenFlowArrays",outputs:[{name:"",type:"uint256[]"},{name:"",type:"uint256[]"}],payable:false,stateMutability:"pure",type:"function"},{constant:true,inputs:[{name:"_currentUnit",type:"uint256"},{name:"_nextSetUnit",type:"uint256"},{name:"_unitsMultiplier",type:"uint256"},{name:"_priceNumerator",type:"uint256"},{name:"_priceDivisor",type:"uint256"}],name:"calculateTokenFlows",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"}],payable:false,stateMutability:"pure",type:"function"}],metadata:'{"compiler":{"version":"0.5.7+commit.6da8b019"},"language":"Solidity","output":{"abi":[{"constant":true,"inputs":[{"name":"_unitsMultiplier","type":"uint256"},{"name":"_priceNumerator","type":"uint256"},{"name":"_priceDivisor","type":"uint256"},{"components":[{"name":"minimumBid","type":"uint256"},{"name":"remainingCurrentSets","type":"uint256"},{"name":"combinedCurrentUnits","type":"uint256[]"},{"name":"combinedNextSetUnits","type":"uint256[]"},{"name":"combinedTokenArray","type":"address[]"}],"name":"_biddingParameters","type":"tuple"}],"name":"createTokenFlowArrays","outputs":[{"name":"","type":"uint256[]"},{"name":"","type":"uint256[]"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[{"name":"_quantity","type":"uint256"},{"name":"_auctionLibrary","type":"address"},{"components":[{"name":"minimumBid","type":"uint256"},{"name":"remainingCurrentSets","type":"uint256"},{"name":"combinedCurrentUnits","type":"uint256[]"},{"name":"combinedNextSetUnits","type":"uint256[]"},{"name":"combinedTokenArray","type":"address[]"}],"name":"_biddingParameters","type":"tuple"},{"components":[{"name":"auctionStartTime","type":"uint256"},{"name":"auctionTimeToPivot","type":"uint256"},{"name":"auctionStartPrice","type":"uint256"},{"name":"auctionPivotPrice","type":"uint256"}],"name":"_auctionPriceParameters","type":"tuple"},{"name":"_rebalanceState","type":"uint8"}],"name":"getBidPrice","outputs":[{"name":"","type":"uint256[]"},{"name":"","type":"uint256[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_quantity","type":"uint256"},{"name":"_coreAddress","type":"address"},{"components":[{"name":"minimumBid","type":"uint256"},{"name":"remainingCurrentSets","type":"uint256"},{"name":"combinedCurrentUnits","type":"uint256[]"},{"name":"combinedNextSetUnits","type":"uint256[]"},{"name":"combinedTokenArray","type":"address[]"}],"name":"_biddingParameters","type":"tuple"}],"name":"validatePlaceBid","outputs":[],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_currentUnit","type":"uint256"},{"name":"_nextSetUnit","type":"uint256"},{"name":"_unitsMultiplier","type":"uint256"},{"name":"_priceNumerator","type":"uint256"},{"name":"_priceDivisor","type":"uint256"}],"name":"calculateTokenFlows","outputs":[{"name":"","type":"uint256"},{"name":"","type":"uint256"}],"payable":false,"stateMutability":"pure","type":"function"}],"devdoc":{"author":"Set Protocol * Default implementation of Rebalancing Set Token placeBid function","methods":{},"title":"PlaceBidLibrary"},"userdoc":{"methods":{}}},"settings":{"compilationTarget":{"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/tokens/rebalancing-libraries/PlaceBidLibrary.sol":"PlaceBidLibrary"},"evmVersion":"byzantium","libraries":{},"optimizer":{"enabled":true,"runs":200},"remappings":[]},"sources":{"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ICore.sol":{"keccak256":"0x5dc3db4398630ea52d2a40c9ddfa89d94e65c2770a12bab4d2a5c8eb573fb0a0","urls":["bzzr://25e90b53f61b388e0950b808e2296f82d427b66cfd6021212713436b2a592e31"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/RebalancingLibrary.sol":{"keccak256":"0x7f9dd2f95b2ee71a98b94cb9b0df15874aa134e7480d04a1fcf36aff166a55f4","urls":["bzzr://f43a5563ec5df095151eee30cf7a0941b5a971917c27c7b34d9586b36563ab5b"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/auction-price-libraries/IAuctionPriceCurve.sol":{"keccak256":"0x52e8b84f3475cb162f93666d1d32dd19cc8838a72c6934ebc22075e58a7acf1b","urls":["bzzr://5d6b372b7dcfab18dfa74013bedaadb1bb455d263dd414a30d01b05abbf5300c"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/tokens/rebalancing-libraries/PlaceBidLibrary.sol":{"keccak256":"0xbbd96934b7990503df2abfdb64ed7ea3756c656f88ddea8e00c4400315419cb4","urls":["bzzr://5d6f7e2a3c53987bb0708431d76b20984153e92ec10fdca25dfebd93a74c8cbd"]},"openzeppelin-solidity/contracts/math/Math.sol":{"keccak256":"0x775160984ceb0931bf67e718fb23afd6fc2a5d38a6e2378ebb438a039ed2269e","urls":["bzzr://209e27ad1c13e3e9b157915e0269ee4c3b6f0a494660dcc4acf1faf102e1a7ad"]},"openzeppelin-solidity/contracts/math/SafeMath.sol":{"keccak256":"0xc2a200a877c4a9b2475c246c54ffecc69ffde3e11af83319c63c2dc5458bac80","urls":["bzzr://c8876e2c39b60f155d748d71d715c8f3903fae5a405ac599adcb6ad2f9a583f9"]}},"version":1}',bytecode:"0x610e59610026600b82828239805160001a60731461001957fe5b30600052607381538281f3fe7300000000000000000000000000000000000000003014608060405260043610610072577c010000000000000000000000000000000000000000000000000000000060003504634645cba181146100775780635a6bff16146100a1578063773d40cc146100b457806384363a72146100c9575b600080fd5b61008a610085366004610948565b6100ea565b604051610098929190610ce3565b60405180910390f35b61008a6100af366004610880565b6101e0565b6100c76100c236600461081b565b610305565b005b6100dc6100d73660046109c1565b610448565b604051610098929190610d66565b60608060008360800151519050606081604051908082528060200260200182016040528015610123578160200160208202803883390190505b509050606082604051908082528060200260200182016040528015610152578160200160208202803883390190505b50905060005b838110156101d15761019b8760400151828151811061017357fe5b60200260200101518860600151838151811061018b57fe5b60200260200101518c8c8c610448565b8483815181106101a757fe5b602002602001018484815181106101ba57fe5b602090810291909101019190915252600101610158565b50909890975095505050505050565b60608060ff83166002146102125760405160e560020a62461bcd02815260040161020990610d08565b60405180910390fd5b6000808773ffffffffffffffffffffffffffffffffffffffff1663e0fd5a7f876040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040161026a9190610d58565b604080518083038186803b15801561028157600080fd5b505afa158015610295573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506102b9919081019061090e565b885191935091506000906102e69083906102da908d9063ffffffff61050c16565b9063ffffffff61053016565b90506102f48184848b6100ea565b945094505050509550959350505050565b6040517f5e63349800000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff831690635e63349890610357903390600401610cd5565b60206040518083038186803b15801561036f57600080fd5b505afa158015610383573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506103a791908101906107f5565b6103c65760405160e560020a62461bcd02815260040161020990610d28565b600083116103e95760405160e560020a62461bcd02815260040161020990610d48565b80516103fc90849063ffffffff61055e16565b1561041c5760405160e560020a62461bcd02815260040161020990610d38565b80602001518311156104435760405160e560020a62461bcd02815260040161020990610d18565b505050565b600080808061045d898763ffffffff61053016565b61046d898763ffffffff61053016565b11156104cd576104c2866104b66104a961048d8d8463ffffffff61053016565b61049d8d8b63ffffffff61053016565b9063ffffffff61057b16565b8a9063ffffffff61053016565b9063ffffffff61050c16565b9150600090506104fe565b6104f7866104b66104a96104e78c8a63ffffffff61053016565b61049d8e8c63ffffffff61053016565b9050600091505b909890975095505050505050565b600080821161051a57600080fd5b600082848161052557fe5b049150505b92915050565b60008261053f5750600061052a565b8282028284828161054c57fe5b041461055757600080fd5b9392505050565b60008161056a57600080fd5b81838161057357fe5b069392505050565b60008282111561058a57600080fd5b50900390565b60006105578235610df8565b600082601f8301126105ad57600080fd5b81356105c06105bb82610da8565b610d81565b915081818352602084019350602081019050838560208402820111156105e557600080fd5b60005b8381101561061157816105fb8882610590565b84525060209283019291909101906001016105e8565b5050505092915050565b600082601f83011261062c57600080fd5b813561063a6105bb82610da8565b9150818183526020840193506020810190508385602084028201111561065f57600080fd5b60005b83811015610611578161067588826107d1565b8452506020928301929190910190600101610662565b60006105578251610e03565b6000608082840312156106a957600080fd5b6106b36080610d81565b905060006106c184846107d1565b82525060206106d2848483016107d1565b60208301525060406106e6848285016107d1565b60408301525060606106fa848285016107d1565b60608301525092915050565b600060a0828403121561071857600080fd5b61072260a0610d81565b9050600061073084846107d1565b8252506020610741848483016107d1565b602083015250604082013567ffffffffffffffff81111561076157600080fd5b61076d8482850161061b565b604083015250606082013567ffffffffffffffff81111561078d57600080fd5b6107998482850161061b565b606083015250608082013567ffffffffffffffff8111156107b957600080fd5b6107c58482850161059c565b60808301525092915050565b60006105578235610df5565b60006105578251610df5565b60006105578235610e08565b60006020828403121561080757600080fd5b6000610813848461068b565b949350505050565b60008060006060848603121561083057600080fd5b600061083c86866107d1565b935050602061084d86828701610590565b925050604084013567ffffffffffffffff81111561086a57600080fd5b61087686828701610706565b9150509250925092565b6000806000806000610100868803121561089957600080fd5b60006108a588886107d1565b95505060206108b688828901610590565b945050604086013567ffffffffffffffff8111156108d357600080fd5b6108df88828901610706565b93505060606108f088828901610697565b92505060e0610901888289016107e9565b9150509295509295909350565b6000806040838503121561092157600080fd5b600061092d85856107dd565b925050602061093e858286016107dd565b9150509250929050565b6000806000806080858703121561095e57600080fd5b600061096a87876107d1565b945050602061097b878288016107d1565b935050604061098c878288016107d1565b925050606085013567ffffffffffffffff8111156109a957600080fd5b6109b587828801610706565b91505092959194509250565b600080600080600060a086880312156109d957600080fd5b60006109e588886107d1565b95505060206109f6888289016107d1565b9450506040610a07888289016107d1565b9350506060610a18888289016107d1565b9250506080610901888289016107d1565b6000610a358383610ccc565b505060200190565b610a4681610e0e565b82525050565b6000610a5782610dcf565b610a618185610dd3565b9350610a6c83610dc9565b60005b82811015610a9757610a82868351610a29565b9550610a8d82610dc9565b9150600101610a6f565b5093949350505050565b6000610aae603883610dd3565b7f526562616c616e63696e67536574546f6b656e2e67657442696450726963653a81527f205374617465206d75737420626520526562616c616e63650000000000000000602082015260400192915050565b6000610b0d604083610dd3565b7f526562616c616e63696e67536574546f6b656e2e706c6163654269643a20426981527f6420657863656564732072656d61696e696e672063757272656e742073657473602082015260400192915050565b6000610b6c603c83610dd3565b7f526562616c616e63696e67536574546f6b656e2e706c6163654269643a20536581527f6e646572206d75737420626520617070726f766564206d6f64756c6500000000602082015260400192915050565b6000610bcb603e83610dd3565b7f526562616c616e63696e67536574546f6b656e2e706c6163654269643a204d7581527f737420626964206d756c7469706c65206f66206d696e696d756d206269640000602082015260400192915050565b6000610c2a602d83610dd3565b7f526562616c616e63696e67536574546f6b656e2e706c6163654269643a20426981527f64206d757374206265203e203000000000000000000000000000000000000000602082015260400192915050565b80516080830190610c8d8482610ccc565b506020820151610ca06020850182610ccc565b506040820151610cb36040850182610ccc565b506060820151610cc66060850182610ccc565b50505050565b610a4681610df5565b6020810161052a8284610a3d565b60408082528101610cf48185610a4c565b905081810360208301526108138184610a4c565b6020808252810161052a81610aa1565b6020808252810161052a81610b00565b6020808252810161052a81610b5f565b6020808252810161052a81610bbe565b6020808252810161052a81610c1d565b6080810161052a8284610c7c565b60408101610d748285610ccc565b6105576020830184610ccc565b60405181810167ffffffffffffffff81118282101715610da057600080fd5b604052919050565b600067ffffffffffffffff821115610dbf57600080fd5b5060209081020190565b60200190565b5190565b90815260200190565b73ffffffffffffffffffffffffffffffffffffffff1690565b90565b600061052a82610ddc565b151590565b60ff1690565b600061052a82600061052a82610df856fea265627a7a72305820803b6e3c29b3f246e928c07a2795b2e73e4bb73c4b74fcb0431516d9c825a7b86c6578706572696d656e74616cf50037",deployedBytecode:"0x7300000000000000000000000000000000000000003014608060405260043610610072577c010000000000000000000000000000000000000000000000000000000060003504634645cba181146100775780635a6bff16146100a1578063773d40cc146100b457806384363a72146100c9575b600080fd5b61008a610085366004610948565b6100ea565b604051610098929190610ce3565b60405180910390f35b61008a6100af366004610880565b6101e0565b6100c76100c236600461081b565b610305565b005b6100dc6100d73660046109c1565b610448565b604051610098929190610d66565b60608060008360800151519050606081604051908082528060200260200182016040528015610123578160200160208202803883390190505b509050606082604051908082528060200260200182016040528015610152578160200160208202803883390190505b50905060005b838110156101d15761019b8760400151828151811061017357fe5b60200260200101518860600151838151811061018b57fe5b60200260200101518c8c8c610448565b8483815181106101a757fe5b602002602001018484815181106101ba57fe5b602090810291909101019190915252600101610158565b50909890975095505050505050565b60608060ff83166002146102125760405160e560020a62461bcd02815260040161020990610d08565b60405180910390fd5b6000808773ffffffffffffffffffffffffffffffffffffffff1663e0fd5a7f876040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040161026a9190610d58565b604080518083038186803b15801561028157600080fd5b505afa158015610295573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506102b9919081019061090e565b885191935091506000906102e69083906102da908d9063ffffffff61050c16565b9063ffffffff61053016565b90506102f48184848b6100ea565b945094505050509550959350505050565b6040517f5e63349800000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff831690635e63349890610357903390600401610cd5565b60206040518083038186803b15801561036f57600080fd5b505afa158015610383573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506103a791908101906107f5565b6103c65760405160e560020a62461bcd02815260040161020990610d28565b600083116103e95760405160e560020a62461bcd02815260040161020990610d48565b80516103fc90849063ffffffff61055e16565b1561041c5760405160e560020a62461bcd02815260040161020990610d38565b80602001518311156104435760405160e560020a62461bcd02815260040161020990610d18565b505050565b600080808061045d898763ffffffff61053016565b61046d898763ffffffff61053016565b11156104cd576104c2866104b66104a961048d8d8463ffffffff61053016565b61049d8d8b63ffffffff61053016565b9063ffffffff61057b16565b8a9063ffffffff61053016565b9063ffffffff61050c16565b9150600090506104fe565b6104f7866104b66104a96104e78c8a63ffffffff61053016565b61049d8e8c63ffffffff61053016565b9050600091505b909890975095505050505050565b600080821161051a57600080fd5b600082848161052557fe5b049150505b92915050565b60008261053f5750600061052a565b8282028284828161054c57fe5b041461055757600080fd5b9392505050565b60008161056a57600080fd5b81838161057357fe5b069392505050565b60008282111561058a57600080fd5b50900390565b60006105578235610df8565b600082601f8301126105ad57600080fd5b81356105c06105bb82610da8565b610d81565b915081818352602084019350602081019050838560208402820111156105e557600080fd5b60005b8381101561061157816105fb8882610590565b84525060209283019291909101906001016105e8565b5050505092915050565b600082601f83011261062c57600080fd5b813561063a6105bb82610da8565b9150818183526020840193506020810190508385602084028201111561065f57600080fd5b60005b83811015610611578161067588826107d1565b8452506020928301929190910190600101610662565b60006105578251610e03565b6000608082840312156106a957600080fd5b6106b36080610d81565b905060006106c184846107d1565b82525060206106d2848483016107d1565b60208301525060406106e6848285016107d1565b60408301525060606106fa848285016107d1565b60608301525092915050565b600060a0828403121561071857600080fd5b61072260a0610d81565b9050600061073084846107d1565b8252506020610741848483016107d1565b602083015250604082013567ffffffffffffffff81111561076157600080fd5b61076d8482850161061b565b604083015250606082013567ffffffffffffffff81111561078d57600080fd5b6107998482850161061b565b606083015250608082013567ffffffffffffffff8111156107b957600080fd5b6107c58482850161059c565b60808301525092915050565b60006105578235610df5565b60006105578251610df5565b60006105578235610e08565b60006020828403121561080757600080fd5b6000610813848461068b565b949350505050565b60008060006060848603121561083057600080fd5b600061083c86866107d1565b935050602061084d86828701610590565b925050604084013567ffffffffffffffff81111561086a57600080fd5b61087686828701610706565b9150509250925092565b6000806000806000610100868803121561089957600080fd5b60006108a588886107d1565b95505060206108b688828901610590565b945050604086013567ffffffffffffffff8111156108d357600080fd5b6108df88828901610706565b93505060606108f088828901610697565b92505060e0610901888289016107e9565b9150509295509295909350565b6000806040838503121561092157600080fd5b600061092d85856107dd565b925050602061093e858286016107dd565b9150509250929050565b6000806000806080858703121561095e57600080fd5b600061096a87876107d1565b945050602061097b878288016107d1565b935050604061098c878288016107d1565b925050606085013567ffffffffffffffff8111156109a957600080fd5b6109b587828801610706565b91505092959194509250565b600080600080600060a086880312156109d957600080fd5b60006109e588886107d1565b95505060206109f6888289016107d1565b9450506040610a07888289016107d1565b9350506060610a18888289016107d1565b9250506080610901888289016107d1565b6000610a358383610ccc565b505060200190565b610a4681610e0e565b82525050565b6000610a5782610dcf565b610a618185610dd3565b9350610a6c83610dc9565b60005b82811015610a9757610a82868351610a29565b9550610a8d82610dc9565b9150600101610a6f565b5093949350505050565b6000610aae603883610dd3565b7f526562616c616e63696e67536574546f6b656e2e67657442696450726963653a81527f205374617465206d75737420626520526562616c616e63650000000000000000602082015260400192915050565b6000610b0d604083610dd3565b7f526562616c616e63696e67536574546f6b656e2e706c6163654269643a20426981527f6420657863656564732072656d61696e696e672063757272656e742073657473602082015260400192915050565b6000610b6c603c83610dd3565b7f526562616c616e63696e67536574546f6b656e2e706c6163654269643a20536581527f6e646572206d75737420626520617070726f766564206d6f64756c6500000000602082015260400192915050565b6000610bcb603e83610dd3565b7f526562616c616e63696e67536574546f6b656e2e706c6163654269643a204d7581527f737420626964206d756c7469706c65206f66206d696e696d756d206269640000602082015260400192915050565b6000610c2a602d83610dd3565b7f526562616c616e63696e67536574546f6b656e2e706c6163654269643a20426981527f64206d757374206265203e203000000000000000000000000000000000000000602082015260400192915050565b80516080830190610c8d8482610ccc565b506020820151610ca06020850182610ccc565b506040820151610cb36040850182610ccc565b506060820151610cc66060850182610ccc565b50505050565b610a4681610df5565b6020810161052a8284610a3d565b60408082528101610cf48185610a4c565b905081810360208301526108138184610a4c565b6020808252810161052a81610aa1565b6020808252810161052a81610b00565b6020808252810161052a81610b5f565b6020808252810161052a81610bbe565b6020808252810161052a81610c1d565b6080810161052a8284610c7c565b60408101610d748285610ccc565b6105576020830184610ccc565b60405181810167ffffffffffffffff81118282101715610da057600080fd5b604052919050565b600067ffffffffffffffff821115610dbf57600080fd5b5060209081020190565b60200190565b5190565b90815260200190565b73ffffffffffffffffffffffffffffffffffffffff1690565b90565b600061052a82610ddc565b151590565b60ff1690565b600061052a82600061052a82610df856fea265627a7a72305820803b6e3c29b3f246e928c07a2795b2e73e4bb73c4b74fcb0431516d9c825a7b86c6578706572696d656e74616cf50037",sourceMap:"1155:8623:76:-;;132:2:-1;166:7;155:9;146:7;137:37;255:7;249:14;246:1;241:23;235:4;232:33;222:2;;269:9;222:2;293:9;290:1;283:20;323:4;314:7;306:22;347:7;338;331:24",deployedSourceMap:"1155:8623:76:-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;5214:1179;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;3403:1212;;;;;;;;;:::i;1602:1060::-;;;;;;;;;:::i;:::-;;7075:2701;;;;;;;;;:::i;:::-;;;;;;;;;5214:1179;5466:16;5484;5557:26;5586:18;:37;;;:44;5557:73;;5640:32;5689:18;5675:33;;;;;;;;;;;;;;;;;;;;;;29:2:-1;21:6;17:15;117:4;105:10;97:6;88:34;136:17;;-1:-1;5675:33:76;;5640:68;;5718:33;5768:18;5754:33;;;;;;;;;;;;;;;;;;;;;;29:2:-1;21:6;17:15;117:4;105:10;97:6;88:34;136:17;;-1:-1;5754:33:76;-1:-1:-1;5718:69:76;-1:-1:-1;5924:9:76;5919:415;5943:18;5939:1;:22;5919:415;;;6072:251;6109:18;:39;;;6149:1;6109:42;;;;;;;;;;;;;;6169:18;:39;;;6209:1;6169:42;;;;;;;;;;;;;;6229:16;6263:15;6296:13;6072:19;:251::i;:::-;6000:15;6016:1;6000:18;;;;;;;;;;;;;6036:16;6053:1;6036:19;;;;;;;;;;;;;;;;;5982:341;;;;;5963:3;;5919:415;;;-1:-1:-1;6352:15:76;;;;-1:-1:-1;5214:1179:76;-1:-1:-1;;;;;;5214:1179:76:o;3403:1212::-;3720:16;;3829:60;;;3854:34;3829:60;3808:163;;;;-1:-1:-1;;;;;3808:163:76;;;;;;;;;;;;;;;;;4075:22;4107:20;4189:15;4170:51;;;4235:23;4170:98;;;;;;;;;;;;;;;;;;;;;;;;;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;4170:98:76;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;4170:98:76;;;;;;;101:4:-1;97:9;90:4;84;80:15;76:31;69:5;65:43;126:6;120:4;113:20;0:138;4170:98:76;;;;;;;;;4357:29;;4137:131;;-1:-1:-1;4137:131:76;-1:-1:-1;4317:23:76;;4343:62;;4137:131;;4343:44;;:9;;:44;:13;:44;:::i;:::-;:48;:62;:48;:62;:::i;:::-;4317:88;;4462:146;4497:15;4526:14;4554:12;4580:18;4462:21;:146::i;:::-;4455:153;;;;;;;3403:1212;;;;;;;;:::o;1602:1060::-;1866:44;;;;;:32;;;;;;:44;;1899:10;;1866:44;;;;;;;;;;;;;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1866:44:76;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;1866:44:76;;;;;;;101:4:-1;97:9;90:4;84;80:15;76:31;69:5;65:43;126:6;120:4;113:20;0:138;1866:44:76;;;;;;;;;1845:151;;;;-1:-1:-1;;;;;1845:151:76;;;;;;;;;2098:1;2086:9;:13;2065:105;;;;-1:-1:-1;;;;;2065:105:76;;;;;;;;;2287:29;;2273:44;;:9;;:44;:13;:44;:::i;:::-;:49;2252:158;;;;-1:-1:-1;;;;;2252:158:76;;;;;;;;;2526:18;:39;;;2513:9;:52;;2492:163;;;;-1:-1:-1;;;;;2492:163:76;;;;;;;;;1602:1060;;;:::o;7075:2701::-;7313:7;;;;8982:33;:12;8999:15;8982:33;:16;:33;:::i;:::-;8948:31;:12;8965:13;8948:31;:16;:31;:::i;:::-;:67;8944:783;;;9083:143;9210:15;9083:122;9121:70;9157:33;:12;9210:15;9157:33;:16;:33;:::i;:::-;9121:31;:12;9138:13;9121:31;:16;:31;:::i;:::-;:35;:70;:35;:70;:::i;:::-;9083:16;;:122;:20;:122;:::i;:::-;:126;:143;:126;:143;:::i;:::-;9070:156;;9357:1;9343:15;;8944:783;;;9443:143;9570:15;9443:122;9481:70;9519:31;:12;9536:13;9519:31;:16;:31;:::i;:::-;9481:33;:12;9498:15;9481:33;:16;:33;:::i;9443:143::-;9429:157;;9715:1;9702:14;;8944:783;9745:10;;;;-1:-1:-1;7075:2701:76;-1:-1:-1;;;;;;7075:2701:76:o;782:296:174:-;840:7;937:1;933;:5;925:14;;;;;;949:9;965:1;961;:5;;;;;;;-1:-1:-1;;782:296:174;;;;;:::o;231:421::-;289:7;529:6;525:45;;-1:-1:-1;558:1:174;551:8;;525:45;592:5;;;596:1;592;:5;:1;615:5;;;;;:10;607:19;;;;;;644:1;231:421;-1:-1:-1;;;231:421:174:o;1739:121::-;1797:7;1824:6;1816:15;;;;;;1852:1;1848;:5;;;;;;;1739:121;-1:-1:-1;;;1739:121:174:o;1211:145::-;1269:7;1301:1;1296;:6;;1288:15;;;;;;-1:-1:-1;1325:5:174;;;1211:145::o;5:118:-1:-;;72:46;110:6;97:20;72:46;;148:699;;261:3;254:4;246:6;242:17;238:27;228:2;;279:1;276;269:12;228:2;316:6;303:20;338:76;353:60;406:6;353:60;;;338:76;;;329:85;;431:5;456:6;449:5;442:21;486:4;478:6;474:17;464:27;;508:4;503:3;499:14;492:21;;561:6;608:3;600:4;592:6;588:17;583:3;579:27;576:36;573:2;;;625:1;622;615:12;573:2;650:1;635:206;660:6;657:1;654:13;635:206;;;718:3;740:37;773:3;761:10;740:37;;;728:50;;-1:-1;801:4;792:14;;;;820;;;;;682:1;675:9;635:206;;;639:14;221:626;;;;;;;;873:699;;986:3;979:4;971:6;967:17;963:27;953:2;;1004:1;1001;994:12;953:2;1041:6;1028:20;1063:76;1078:60;1131:6;1078:60;;1063:76;1054:85;;1156:5;1181:6;1174:5;1167:21;1211:4;1203:6;1199:17;1189:27;;1233:4;1228:3;1224:14;1217:21;;1286:6;1333:3;1325:4;1317:6;1313:17;1308:3;1304:27;1301:36;1298:2;;;1350:1;1347;1340:12;1298:2;1375:1;1360:206;1385:6;1382:1;1379:13;1360:206;;;1443:3;1465:37;1498:3;1486:10;1465:37;;;1453:50;;-1:-1;1526:4;1517:14;;;;1545;;;;;1407:1;1400:9;1360:206;;1580:116;;1655:36;1683:6;1677:13;1655:36;;1758:821;;1887:4;1875:9;1870:3;1866:19;1862:30;1859:2;;;1905:1;1902;1895:12;1859:2;1923:20;1938:4;1923:20;;;1914:29;-1:-1;2005:1;2036:49;2081:3;2061:9;2036:49;;;2012:74;;-1:-1;2161:2;2194:49;2239:3;2215:22;;;2194:49;;;2187:4;2180:5;2176:16;2169:75;2107:148;2318:2;2351:49;2396:3;2387:6;2376:9;2372:22;2351:49;;;2344:4;2337:5;2333:16;2326:75;2265:147;2475:2;2508:49;2553:3;2544:6;2533:9;2529:22;2508:49;;;2501:4;2494:5;2490:16;2483:75;2422:147;1853:726;;;;;2636:1298;;2760:4;2748:9;2743:3;2739:19;2735:30;2732:2;;;2778:1;2775;2768:12;2732:2;2796:20;2811:4;2796:20;;;2787:29;-1:-1;2872:1;2903:49;2948:3;2928:9;2903:49;;;2879:74;;-1:-1;3030:2;3063:49;3108:3;3084:22;;;3063:49;;;3056:4;3049:5;3045:16;3038:75;2974:150;3218:2;3207:9;3203:18;3190:32;3242:18;3234:6;3231:30;3228:2;;;3274:1;3271;3264:12;3228:2;3309:70;3375:3;3366:6;3355:9;3351:22;3309:70;;;3302:4;3295:5;3291:16;3284:96;3134:257;3485:2;3474:9;3470:18;3457:32;3509:18;3501:6;3498:30;3495:2;;;3541:1;3538;3531:12;3495:2;3576:70;3642:3;3633:6;3622:9;3618:22;3576:70;;;3569:4;3562:5;3558:16;3551:96;3401:257;3750:3;3739:9;3735:19;3722:33;3775:18;3767:6;3764:30;3761:2;;;3807:1;3804;3797:12;3761:2;3842:70;3908:3;3899:6;3888:9;3884:22;3842:70;;;3835:4;3828:5;3824:16;3817:96;3668:256;2726:1208;;;;;3941:118;;4008:46;4046:6;4033:20;4008:46;;4066:122;;4144:39;4175:6;4169:13;4144:39;;4195:114;;4260:44;4296:6;4283:20;4260:44;;4316:257;;4428:2;4416:9;4407:7;4403:23;4399:32;4396:2;;;4444:1;4441;4434:12;4396:2;4479:1;4496:61;4549:7;4529:9;4496:61;;;4486:71;4390:183;-1:-1;;;;4390:183;4580:647;;;;4753:2;4741:9;4732:7;4728:23;4724:32;4721:2;;;4769:1;4766;4759:12;4721:2;4804:1;4821:53;4866:7;4846:9;4821:53;;;4811:63;;4783:97;4911:2;4929:53;4974:7;4965:6;4954:9;4950:22;4929:53;;;4919:63;;4890:98;5047:2;5036:9;5032:18;5019:32;5071:18;5063:6;5060:30;5057:2;;;5103:1;5100;5093:12;5057:2;5123:88;5203:7;5194:6;5183:9;5179:22;5123:88;;;5113:98;;4998:219;4715:512;;;;;;5234:975;;;;;;5479:3;5467:9;5458:7;5454:23;5450:33;5447:2;;;5496:1;5493;5486:12;5447:2;5531:1;5548:53;5593:7;5573:9;5548:53;;;5538:63;;5510:97;5638:2;5656:53;5701:7;5692:6;5681:9;5677:22;5656:53;;;5646:63;;5617:98;5774:2;5763:9;5759:18;5746:32;5798:18;5790:6;5787:30;5784:2;;;5830:1;5827;5820:12;5784:2;5850:88;5930:7;5921:6;5910:9;5906:22;5850:88;;;5840:98;;5725:219;5975:2;5993:93;6078:7;6069:6;6058:9;6054:22;5993:93;;;5983:103;;5954:138;6123:3;6142:51;6185:7;6176:6;6165:9;6161:22;6142:51;;;6132:61;;6102:97;5441:768;;;;;;;;;6216:399;;;6348:2;6336:9;6327:7;6323:23;6319:32;6316:2;;;6364:1;6361;6354:12;6316:2;6399:1;6416:64;6472:7;6452:9;6416:64;;;6406:74;;6378:108;6517:2;6535:64;6591:7;6582:6;6571:9;6567:22;6535:64;;;6525:74;;6496:109;6310:305;;;;;;6622:773;;;;;6812:3;6800:9;6791:7;6787:23;6783:33;6780:2;;;6829:1;6826;6819:12;6780:2;6864:1;6881:53;6926:7;6906:9;6881:53;;;6871:63;;6843:97;6971:2;6989:53;7034:7;7025:6;7014:9;7010:22;6989:53;;;6979:63;;6950:98;7079:2;7097:53;7142:7;7133:6;7122:9;7118:22;7097:53;;;7087:63;;7058:98;7215:2;7204:9;7200:18;7187:32;7239:18;7231:6;7228:30;7225:2;;;7271:1;7268;7261:12;7225:2;7291:88;7371:7;7362:6;7351:9;7347:22;7291:88;;;7281:98;;7166:219;6774:621;;;;;;;;7402:743;;;;;;7574:3;7562:9;7553:7;7549:23;7545:33;7542:2;;;7591:1;7588;7581:12;7542:2;7626:1;7643:53;7688:7;7668:9;7643:53;;;7633:63;;7605:97;7733:2;7751:53;7796:7;7787:6;7776:9;7772:22;7751:53;;;7741:63;;7712:98;7841:2;7859:53;7904:7;7895:6;7884:9;7880:22;7859:53;;;7849:63;;7820:98;7949:2;7967:53;8012:7;8003:6;7992:9;7988:22;7967:53;;;7957:63;;7928:98;8057:3;8076:53;8121:7;8112:6;8101:9;8097:22;8076:53;;8153:189;;8248:54;8298:3;8290:6;8248:54;;;-1:-1;;8331:4;8322:14;;8241:101;8350:142;8441:45;8480:5;8441:45;;;8436:3;8429:58;8423:69;;;8530:645;;8683:54;8731:5;8683:54;;;8750:94;8837:6;8832:3;8750:94;;;8743:101;;8864:56;8914:5;8864:56;;;8941:1;8926:227;8951:6;8948:1;8945:13;8926:227;;;8998:71;9065:3;9056:6;9050:13;8998:71;;;8991:78;;9086:60;9139:6;9086:60;;;9076:70;-1:-1;8973:1;8966:9;8926:227;;;-1:-1;9166:3;;8662:513;-1:-1;;;;8662:513;9184:465;;9344:67;9408:2;9403:3;9344:67;;;9444:66;9424:87;;9545:66;9540:2;9531:12;;9524:88;9640:2;9631:12;;9330:319;-1:-1;;9330:319;9658:465;;9818:67;9882:2;9877:3;9818:67;;;9918:66;9898:87;;10019:66;10014:2;10005:12;;9998:88;10114:2;10105:12;;9804:319;-1:-1;;9804:319;10132:465;;10292:67;10356:2;10351:3;10292:67;;;10392:66;10372:87;;10493:66;10488:2;10479:12;;10472:88;10588:2;10579:12;;10278:319;-1:-1;;10278:319;10606:465;;10766:67;10830:2;10825:3;10766:67;;;10866:66;10846:87;;10967:66;10962:2;10953:12;;10946:88;11062:2;11053:12;;10752:319;-1:-1;;10752:319;11080:465;;11240:67;11304:2;11299:3;11240:67;;;11340:66;11320:87;;11441:66;11436:2;11427:12;;11420:88;11536:2;11527:12;;11226:319;-1:-1;;11226:319;11660:856;11910:22;;11833:4;11824:14;;;11938:61;11828:3;11910:22;11938:61;;;11853:152;12091:4;12084:5;12080:16;12074:23;12103:62;12159:4;12154:3;12150:14;12137:11;12103:62;;;12015:156;12256:4;12249:5;12245:16;12239:23;12268:62;12324:4;12319:3;12315:14;12302:11;12268:62;;;12181:155;12421:4;12414:5;12410:16;12404:23;12433:62;12489:4;12484:3;12480:14;12467:11;12433:62;;;12346:155;11806:710;;;;12523:110;12596:31;12621:5;12596:31;;12900:229;13026:2;13011:18;;13040:79;13015:9;13092:6;13040:79;;13136:644;13390:2;13404:47;;;13375:18;;13465:116;13375:18;13567:6;13465:116;;;13457:124;;13629:9;13623:4;13619:20;13614:2;13603:9;13599:18;13592:48;13654:116;13765:4;13756:6;13654:116;;13787:407;13978:2;13992:47;;;13963:18;;14053:131;13963:18;14053:131;;14201:407;14392:2;14406:47;;;14377:18;;14467:131;14377:18;14467:131;;14615:407;14806:2;14820:47;;;14791:18;;14881:131;14791:18;14881:131;;15029:407;15220:2;15234:47;;;15205:18;;15295:131;15205:18;15295:131;;15443:407;15634:2;15648:47;;;15619:18;;15709:131;15619:18;15709:131;;15857:374;16055:3;16040:19;;16070:151;16044:9;16194:6;16070:151;;16238:348;16392:2;16377:18;;16406:79;16381:9;16458:6;16406:79;;;16496:80;16572:2;16561:9;16557:18;16548:6;16496:80;;16593:256;16655:2;16649:9;16681:17;;;16756:18;16741:34;;16777:22;;;16738:62;16735:2;;;16813:1;16810;16803:12;16735:2;16829;16822:22;16633:216;;-1:-1;16633:216;16856:254;;17011:18;17003:6;17000:30;16997:2;;;17043:1;17040;17033:12;16997:2;-1:-1;17072:4;17060:17;;;17090:15;;16934:176;17380:121;17489:4;17477:17;;17458:43;17510:107;17600:12;;17584:33;17756:186;17882:19;;;17931:4;17922:14;;17875:67;18122:128;18202:42;18191:54;;18174:76;18257:79;18326:5;18309:27;18343:105;;18412:31;18437:5;18412:31;;18455:92;18528:13;18521:21;;18504:43;18775:88;18853:4;18842:16;;18825:38;18870:129;;18957:37;18988:5;19006:121;19085:37;19116:5;19085:37;",
source:'/*\n    Copyright 2018 Set Labs Inc.\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\npragma solidity 0.5.7;\npragma experimental "ABIEncoderV2";\n\nimport { Math } from "openzeppelin-solidity/contracts/math/Math.sol";\nimport { SafeMath } from "openzeppelin-solidity/contracts/math/SafeMath.sol";\nimport { IAuctionPriceCurve } from "../../lib/auction-price-libraries/IAuctionPriceCurve.sol";\nimport { ICore } from "../../interfaces/ICore.sol";\nimport { RebalancingLibrary } from "../../lib/RebalancingLibrary.sol";\n\n\n/**\n * @title PlaceBidLibrary\n * @author Set Protocol\n *\n * Default implementation of Rebalancing Set Token placeBid function\n */\nlibrary PlaceBidLibrary {\n    using SafeMath for uint256;\n\n    /* ============ Internal Functions ============ */\n\n    /*\n     * Place bid during rebalance auction. Can only be called by Core.\n     *\n     * @param _quantity                 The amount of currentSet to be rebalanced\n     * @param _coreAddress              Core address\n     * @param _biddingParameters        Struct containing relevant data for calculating token flows\n     */\n    function validatePlaceBid(\n        uint256 _quantity,\n        address _coreAddress,\n        RebalancingLibrary.BiddingParameters memory _biddingParameters\n    )\n        public\n        view\n    {\n        // Make sure sender is a module\n        require(\n            ICore(_coreAddress).validModules(msg.sender),\n            "RebalancingSetToken.placeBid: Sender must be approved module"\n        );\n\n        // Make sure that bid amount is greater than zero\n        require(\n            _quantity > 0,\n            "RebalancingSetToken.placeBid: Bid must be > 0"\n        );\n\n        // Make sure that bid amount is multiple of minimum bid amount\n        require(\n            _quantity.mod(_biddingParameters.minimumBid) == 0,\n            "RebalancingSetToken.placeBid: Must bid multiple of minimum bid"\n        );\n\n        // Make sure that bid Amount is less than remainingCurrentSets\n        require(\n            _quantity <= _biddingParameters.remainingCurrentSets,\n            "RebalancingSetToken.placeBid: Bid exceeds remaining current sets"\n        );\n    }\n\n    /*\n     * Get token inflows and outflows required for bid. Also the amount of Rebalancing\n     * Sets that would be generated.\n     *\n     * @param _quantity               The amount of currentSet to be rebalanced\n     * @param _auctionLibrary         Auction library used in rebalance\n     * @param _biddingParameters      Struct containing relevant data for calculating token flows\n     * @param _auctionPriceParameters Struct containing auction price curve parameters\n     * @param _rebalanceState         State of rebalancing set token\n     * @return inflowUnitArray        Array of amount of tokens inserted into system in bid\n     * @return outflowUnitArray       Array of amount of tokens taken out of system in bid\n     */\n    function getBidPrice(\n        uint256 _quantity,\n        address _auctionLibrary,\n        RebalancingLibrary.BiddingParameters memory _biddingParameters,\n        RebalancingLibrary.AuctionPriceParameters memory _auctionPriceParameters,\n        uint8 _rebalanceState\n    )\n        public\n        view\n        returns (uint256[] memory, uint256[] memory)\n    {\n        // Confirm in Rebalance State\n        require(\n            _rebalanceState == uint8(RebalancingLibrary.State.Rebalance),\n            "RebalancingSetToken.getBidPrice: State must be Rebalance"\n        );\n\n        // Get bid conversion price, currently static placeholder for calling auctionlibrary\n        uint256 priceNumerator;\n        uint256 priceDivisor;\n        (priceNumerator, priceDivisor) = IAuctionPriceCurve(_auctionLibrary).getCurrentPrice(\n            _auctionPriceParameters\n        );\n\n        // Normalized quantity amount\n        uint256 unitsMultiplier = _quantity.div(_biddingParameters.minimumBid).mul(priceDivisor);\n\n        // Calculate token flow arrays\n        return createTokenFlowArrays(\n            unitsMultiplier,\n            priceNumerator,\n            priceDivisor,\n            _biddingParameters\n        );\n    }\n\n    /*\n     * Creates arrays of token inflows and outflows\n     *\n     * @param _unitsMultiplier        Bid amount normalized to number of standard bid amounts\n     * @param _priceNumerator         The numerator of the price ratio\n     * @param _priceDivisor           The denominator of the price ratio\n     * @param _biddingParameters      Struct containing relevant data for calculating token flows\n     * @return inflowUnitArray        Array of amount of tokens inserted into system in bid\n     * @return outflowUnitArray       Array of amount of tokens taken out of system in bid\n     */\n    function createTokenFlowArrays(\n        uint256 _unitsMultiplier,\n        uint256 _priceNumerator,\n        uint256 _priceDivisor,\n        RebalancingLibrary.BiddingParameters memory _biddingParameters\n    )\n        public\n        pure\n        returns (uint256[] memory, uint256[] memory)\n    {\n        // Declare unit arrays in memory\n        uint256 combinedTokenCount = _biddingParameters.combinedTokenArray.length;\n        uint256[] memory inflowUnitArray = new uint256[](combinedTokenCount);\n        uint256[] memory outflowUnitArray = new uint256[](combinedTokenCount);\n\n        // Cycle through each token in combinedTokenArray, calculate inflow/outflow and store\n        // result in array\n        for (uint256 i = 0; i < combinedTokenCount; i++) {\n            (\n                inflowUnitArray[i],\n                outflowUnitArray[i]\n            ) = calculateTokenFlows(\n                _biddingParameters.combinedCurrentUnits[i],\n                _biddingParameters.combinedNextSetUnits[i],\n                _unitsMultiplier,\n                _priceNumerator,\n                _priceDivisor\n            );\n        }\n\n        return (inflowUnitArray, outflowUnitArray);\n    }\n\n    /*\n     * Calculates token inflow/outflow for single component in combinedTokenArray\n     *\n     * @param _currentUnit          Amount of token i in currentSet per minimum bid amount\n     * @param _nextSetUnit          Amount of token i in nextSet per minimum bid amount\n     * @param _unitsMultiplier      Bid amount normalized to number of minimum bid amounts\n     * @param _priceNumerator       The numerator of the price ratio\n     * @param _priceDivisor         The denominator of the price ratio\n     * @return inflowUnit           Amount of token i transferred into the system\n     * @return outflowUnit          Amount of token i transferred to the bidder\n     */\n    function calculateTokenFlows(\n        uint256 _currentUnit,\n        uint256 _nextSetUnit,\n        uint256 _unitsMultiplier,\n        uint256 _priceNumerator,\n        uint256 _priceDivisor\n    )\n        public\n        pure\n        returns (uint256, uint256)\n    {\n        /*\n         * Below is a mathematically simplified formula for calculating token inflows and\n         * outflows, the following is it\'s derivation:\n         * token_flow = (bidQuantity/price)*(nextUnit - price*currentUnit)\n         *\n         * Where,\n         * 1) price = (priceNumerator/priceDivisor),\n         * 2) nextUnit and currentUnit are the amount of component i needed for a\n         * standardAmount of sets to be rebalanced where one standardAmount =\n         * max(natural unit nextSet, natural unit currentSet), and\n         * 3) bidQuantity is a normalized amount in terms of the standardAmount used\n         * to calculate nextUnit and currentUnit. This is represented by the unitsMultiplier\n         * variable.\n         *\n         * Given these definitions we can derive the below formula as follows:\n         * token_flow = (unitsMultiplier/(priceNumerator/priceDivisor))*\n         * (nextUnit - (priceNumerator/priceDivisor)*currentUnit)\n         *\n         * We can then multiply this equation by (priceDivisor/priceDivisor)\n         * which simplifies the above equation to:\n         *\n         * (unitsMultiplier/priceNumerator)* (nextUnit*priceDivisor - currentUnit*priceNumerator)\n         *\n         * This is the equation seen below, but since unsigned integers are used we must check to see if\n         * nextUnit*priceDivisor > currentUnit*priceNumerator, otherwise those two terms must be\n         * flipped in the equation.\n         */\n        uint256 inflowUnit;\n        uint256 outflowUnit;\n\n        // Use if statement to check if token inflow or outflow\n        if (_nextSetUnit.mul(_priceDivisor) > _currentUnit.mul(_priceNumerator)) {\n            // Calculate inflow amount\n            inflowUnit = _unitsMultiplier.mul(\n                _nextSetUnit.mul(_priceDivisor).sub(_currentUnit.mul(_priceNumerator))\n            ).div(_priceNumerator);\n\n            // Set outflow amount to 0 for component i, since tokens need to be injected in rebalance\n            outflowUnit = 0;\n        } else {\n            // Calculate outflow amount\n            outflowUnit = _unitsMultiplier.mul(\n                _currentUnit.mul(_priceNumerator).sub(_nextSetUnit.mul(_priceDivisor))\n            ).div(_priceNumerator);\n\n            // Set inflow amount to 0 for component i, since tokens need to be returned in rebalance\n            inflowUnit = 0;\n        }\n\n        return (inflowUnit, outflowUnit);\n    }\n}\n',sourcePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/tokens/rebalancing-libraries/PlaceBidLibrary.sol",ast:{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/tokens/rebalancing-libraries/PlaceBidLibrary.sol",exportedSymbols:{PlaceBidLibrary:[17473]},id:17474,nodeType:"SourceUnit",nodes:[{id:17177,literals:["solidity","0.5",".7"],nodeType:"PragmaDirective",src:"597:22:76"},{id:17178,literals:["experimental","ABIEncoderV2"],nodeType:"PragmaDirective",src:"620:35:76"},{absolutePath:"openzeppelin-solidity/contracts/math/Math.sol",file:"openzeppelin-solidity/contracts/math/Math.sol",id:17180,nodeType:"ImportDirective",scope:17474,sourceUnit:29513,src:"657:69:76",symbolAliases:[{foreign:17179,local:null}],unitAlias:""},{absolutePath:"openzeppelin-solidity/contracts/math/SafeMath.sol",file:"openzeppelin-solidity/contracts/math/SafeMath.sol",id:17182,nodeType:"ImportDirective",scope:17474,sourceUnit:29641,src:"727:77:76",symbolAliases:[{foreign:17181,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/auction-price-libraries/IAuctionPriceCurve.sol",file:"../../lib/auction-price-libraries/IAuctionPriceCurve.sol",id:17184,nodeType:"ImportDirective",scope:17474,sourceUnit:6867,src:"805:94:76",symbolAliases:[{foreign:17183,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ICore.sol",file:"../../interfaces/ICore.sol",id:17186,nodeType:"ImportDirective",scope:17474,sourceUnit:4747,src:"900:51:76",symbolAliases:[{foreign:17185,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/RebalancingLibrary.sol",file:"../../lib/RebalancingLibrary.sol",id:17188,nodeType:"ImportDirective",scope:17474,sourceUnit:6658,src:"952:70:76",symbolAliases:[{foreign:17187,local:null}],unitAlias:""},{baseContracts:[],contractDependencies:[],contractKind:"library",documentation:"@title PlaceBidLibrary\n@author Set Protocol\n * Default implementation of Rebalancing Set Token placeBid function",fullyImplemented:true,id:17473,linearizedBaseContracts:[17473],name:"PlaceBidLibrary",nodeType:"ContractDefinition",nodes:[{id:17191,libraryName:{contractScope:null,id:17189,name:"SafeMath",nodeType:"UserDefinedTypeName",referencedDeclaration:29640,src:"1191:8:76",typeDescriptions:{typeIdentifier:"t_contract$_SafeMath_$29640",typeString:"library SafeMath"}},nodeType:"UsingForDirective",src:"1185:27:76",typeName:{id:17190,name:"uint256",nodeType:"ElementaryTypeName",src:"1204:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}},{body:{id:17237,nodeType:"Block",src:"1795:867:76",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,id:17205,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"1899:3:76",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:17206,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"1899:10:76",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}}],expression:{argumentTypes:[{typeIdentifier:"t_address_payable",typeString:"address payable"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:17202,name:"_coreAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17195,src:"1872:12:76",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:17201,name:"ICore",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:4746,src:"1866:5:76",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ICore_$4746_$",typeString:"type(contract ICore)"}},id:17203,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"1866:19:76",typeDescriptions:{typeIdentifier:"t_contract$_ICore_$4746",typeString:"contract ICore"}},id:17204,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"validModules",nodeType:"MemberAccess",referencedDeclaration:4490,src:"1866:32:76",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$returns$_t_bool_$",typeString:"function (address) view external returns (bool)"}},id:17207,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"1866:44:76",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e67536574546f6b656e2e706c6163654269643a2053656e646572206d75737420626520617070726f766564206d6f64756c65",id:17208,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"1924:62:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_9ca341b3699365d4ef430f60324b49bc787cfcc7773501be637279f5ed1f6cb4",typeString:'literal_string "RebalancingSetToken.placeBid: Sender must be approved module"'},value:"RebalancingSetToken.placeBid: Sender must be approved module"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_9ca341b3699365d4ef430f60324b49bc787cfcc7773501be637279f5ed1f6cb4",typeString:'literal_string "RebalancingSetToken.placeBid: Sender must be approved module"'}],id:17200,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"1845:7:76",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:17209,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"1845:151:76",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:17210,nodeType:"ExpressionStatement",src:"1845:151:76"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:17214,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:17212,name:"_quantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17193,src:"2086:9:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:">",rightExpression:{argumentTypes:null,hexValue:"30",id:17213,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"2098:1:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"2086:13:76",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e67536574546f6b656e2e706c6163654269643a20426964206d757374206265203e2030",id:17215,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"2113:47:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_fe5d589365b4a9d22347ee9b70e4bd9cd5b91857260dfa8a8d65e93d2d04f622",typeString:'literal_string "RebalancingSetToken.placeBid: Bid must be > 0"'},value:"RebalancingSetToken.placeBid: Bid must be > 0"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_fe5d589365b4a9d22347ee9b70e4bd9cd5b91857260dfa8a8d65e93d2d04f622",typeString:'literal_string "RebalancingSetToken.placeBid: Bid must be > 0"'}],id:17211,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"2065:7:76",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:17216,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2065:105:76",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:17217,nodeType:"ExpressionStatement",src:"2065:105:76"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:17225,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,id:17221,name:"_biddingParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17197,src:"2287:18:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}},id:17222,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"minimumBid",nodeType:"MemberAccess",referencedDeclaration:6644,src:"2287:29:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17219,name:"_quantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17193,src:"2273:9:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17220,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mod",nodeType:"MemberAccess",referencedDeclaration:29639,src:"2273:13:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17223,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2273:44:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"==",rightExpression:{argumentTypes:null,hexValue:"30",id:17224,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"2321:1:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"2273:49:76",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e67536574546f6b656e2e706c6163654269643a204d75737420626964206d756c7469706c65206f66206d696e696d756d20626964",id:17226,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"2336:64:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_eca39e5e98fe074f9f0d772f1efeb99428954f657c8b5174d566ef7b59fe8505",typeString:'literal_string "RebalancingSetToken.placeBid: Must bid multiple of minimum bid"'},value:"RebalancingSetToken.placeBid: Must bid multiple of minimum bid"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_eca39e5e98fe074f9f0d772f1efeb99428954f657c8b5174d566ef7b59fe8505",typeString:'literal_string "RebalancingSetToken.placeBid: Must bid multiple of minimum bid"'}],id:17218,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"2252:7:76",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:17227,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2252:158:76",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:17228,nodeType:"ExpressionStatement",src:"2252:158:76"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:17233,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:17230,name:"_quantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17193,src:"2513:9:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<=",rightExpression:{argumentTypes:null,expression:{argumentTypes:null,id:17231,name:"_biddingParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17197,src:"2526:18:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}},id:17232,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"remainingCurrentSets",nodeType:"MemberAccess",referencedDeclaration:6646,src:"2526:39:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2513:52:76",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e67536574546f6b656e2e706c6163654269643a2042696420657863656564732072656d61696e696e672063757272656e742073657473",id:17234,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"2579:66:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_14e4c7e2713a7afb8ef07f96bfe145180969bbecaacdbca79d540dd5ebf3878d",typeString:'literal_string "RebalancingSetToken.placeBid: Bid exceeds remaining current sets"'},value:"RebalancingSetToken.placeBid: Bid exceeds remaining current sets"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_14e4c7e2713a7afb8ef07f96bfe145180969bbecaacdbca79d540dd5ebf3878d",typeString:'literal_string "RebalancingSetToken.placeBid: Bid exceeds remaining current sets"'}],id:17229,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"2492:7:76",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:17235,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2492:163:76",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:17236,nodeType:"ExpressionStatement",src:"2492:163:76"}]},documentation:null,id:17238,implemented:true,kind:"function",modifiers:[],name:"validatePlaceBid",nodeType:"FunctionDefinition",parameters:{id:17198,nodeType:"ParameterList",parameters:[{constant:false,id:17193,name:"_quantity",nodeType:"VariableDeclaration",scope:17238,src:"1637:17:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17192,name:"uint256",nodeType:"ElementaryTypeName",src:"1637:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17195,name:"_coreAddress",nodeType:"VariableDeclaration",scope:17238,src:"1664:20:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:17194,name:"address",nodeType:"ElementaryTypeName",src:"1664:7:76",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:17197,name:"_biddingParameters",nodeType:"VariableDeclaration",scope:17238,src:"1694:62:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters"},typeName:{contractScope:null,id:17196,name:"RebalancingLibrary.BiddingParameters",nodeType:"UserDefinedTypeName",referencedDeclaration:6656,src:"1694:36:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_storage_ptr",typeString:"struct RebalancingLibrary.BiddingParameters"}},value:null,visibility:"internal"}],src:"1627:135:76"},returnParameters:{id:17199,nodeType:"ParameterList",parameters:[],src:"1795:0:76"},scope:17473,src:"1602:1060:76",stateMutability:"view",superFunction:null,visibility:"public"},{body:{id:17303,nodeType:"Block",src:"3760:855:76",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint8",typeString:"uint8"},id:17264,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:17258,name:"_rebalanceState",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17248,src:"3829:15:76",typeDescriptions:{typeIdentifier:"t_uint8",typeString:"uint8"}},nodeType:"BinaryOperation",operator:"==",rightExpression:{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,expression:{argumentTypes:null,id:17260,name:"RebalancingLibrary",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6657,src:"3854:18:76",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_RebalancingLibrary_$6657_$",typeString:"type(library RebalancingLibrary)"}},id:17261,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"State",nodeType:"MemberAccess",referencedDeclaration:6633,src:"3854:24:76",typeDescriptions:{typeIdentifier:"t_type$_t_enum$_State_$6633_$",typeString:"type(enum RebalancingLibrary.State)"}},id:17262,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,memberName:"Rebalance",nodeType:"MemberAccess",referencedDeclaration:null,src:"3854:34:76",typeDescriptions:{typeIdentifier:"t_enum$_State_$6633",typeString:"enum RebalancingLibrary.State"}}],expression:{argumentTypes:[{typeIdentifier:"t_enum$_State_$6633",typeString:"enum RebalancingLibrary.State"}],id:17259,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"3848:5:76",typeDescriptions:{typeIdentifier:"t_type$_t_uint8_$",typeString:"type(uint8)"},typeName:"uint8"},id:17263,isConstant:false,isLValue:false,isPure:true,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3848:41:76",typeDescriptions:{typeIdentifier:"t_uint8",typeString:"uint8"}},src:"3829:60:76",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e67536574546f6b656e2e67657442696450726963653a205374617465206d75737420626520526562616c616e6365",id:17265,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"3903:58:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_11510c653bd4452ab5ebc2e9897cd816784a481edc30994707aff383fc411927",typeString:'literal_string "RebalancingSetToken.getBidPrice: State must be Rebalance"'},value:"RebalancingSetToken.getBidPrice: State must be Rebalance"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_11510c653bd4452ab5ebc2e9897cd816784a481edc30994707aff383fc411927",typeString:'literal_string "RebalancingSetToken.getBidPrice: State must be Rebalance"'}],id:17257,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"3808:7:76",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:17266,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3808:163:76",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:17267,nodeType:"ExpressionStatement",src:"3808:163:76"},{assignments:[17269],declarations:[{constant:false,id:17269,name:"priceNumerator",nodeType:"VariableDeclaration",scope:17303,src:"4075:22:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17268,name:"uint256",nodeType:"ElementaryTypeName",src:"4075:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:17270,initialValue:null,nodeType:"VariableDeclarationStatement",src:"4075:22:76"},{assignments:[17272],declarations:[{constant:false,id:17272,name:"priceDivisor",nodeType:"VariableDeclaration",scope:17303,src:"4107:20:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17271,name:"uint256",nodeType:"ElementaryTypeName",src:"4107:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:17273,initialValue:null,nodeType:"VariableDeclarationStatement",src:"4107:20:76"},{expression:{argumentTypes:null,id:17283,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,components:[{argumentTypes:null,id:17274,name:"priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17269,src:"4138:14:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17275,name:"priceDivisor",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17272,src:"4154:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],id:17276,isConstant:false,isInlineArray:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"TupleExpression",src:"4137:30:76",typeDescriptions:{typeIdentifier:"t_tuple$_t_uint256_$_t_uint256_$",typeString:"tuple(uint256,uint256)"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,id:17281,name:"_auctionPriceParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17246,src:"4235:23:76",typeDescriptions:{typeIdentifier:"t_struct$_AuctionPriceParameters_$6642_memory_ptr",typeString:"struct RebalancingLibrary.AuctionPriceParameters memory"}}],expression:{argumentTypes:[{typeIdentifier:"t_struct$_AuctionPriceParameters_$6642_memory_ptr",typeString:"struct RebalancingLibrary.AuctionPriceParameters memory"
}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:17278,name:"_auctionLibrary",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17242,src:"4189:15:76",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:17277,name:"IAuctionPriceCurve",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6866,src:"4170:18:76",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_IAuctionPriceCurve_$6866_$",typeString:"type(contract IAuctionPriceCurve)"}},id:17279,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4170:35:76",typeDescriptions:{typeIdentifier:"t_contract$_IAuctionPriceCurve_$6866",typeString:"contract IAuctionPriceCurve"}},id:17280,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getCurrentPrice",nodeType:"MemberAccess",referencedDeclaration:6865,src:"4170:51:76",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_struct$_AuctionPriceParameters_$6642_memory_ptr_$returns$_t_uint256_$_t_uint256_$",typeString:"function (struct RebalancingLibrary.AuctionPriceParameters memory) view external returns (uint256,uint256)"}},id:17282,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4170:98:76",typeDescriptions:{typeIdentifier:"t_tuple$_t_uint256_$_t_uint256_$",typeString:"tuple(uint256,uint256)"}},src:"4137:131:76",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:17284,nodeType:"ExpressionStatement",src:"4137:131:76"},{assignments:[17286],declarations:[{constant:false,id:17286,name:"unitsMultiplier",nodeType:"VariableDeclaration",scope:17303,src:"4317:23:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17285,name:"uint256",nodeType:"ElementaryTypeName",src:"4317:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:17295,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:17293,name:"priceDivisor",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17272,src:"4392:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,id:17289,name:"_biddingParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17244,src:"4357:18:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}},id:17290,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"minimumBid",nodeType:"MemberAccess",referencedDeclaration:6644,src:"4357:29:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17287,name:"_quantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17240,src:"4343:9:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17288,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"4343:13:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17291,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4343:44:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17292,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"4343:48:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17294,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4343:62:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4317:88:76"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:17297,name:"unitsMultiplier",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17286,src:"4497:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17298,name:"priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17269,src:"4526:14:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17299,name:"priceDivisor",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17272,src:"4554:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17300,name:"_biddingParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17244,src:"4580:18:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}],id:17296,name:"createTokenFlowArrays",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17386,src:"4462:21:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_struct$_BiddingParameters_$6656_memory_ptr_$returns$_t_array$_t_uint256_$dyn_memory_ptr_$_t_array$_t_uint256_$dyn_memory_ptr_$",typeString:"function (uint256,uint256,uint256,struct RebalancingLibrary.BiddingParameters memory) pure returns (uint256[] memory,uint256[] memory)"}},id:17301,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4462:146:76",typeDescriptions:{typeIdentifier:"t_tuple$_t_array$_t_uint256_$dyn_memory_ptr_$_t_array$_t_uint256_$dyn_memory_ptr_$",typeString:"tuple(uint256[] memory,uint256[] memory)"}},functionReturnParameters:17256,id:17302,nodeType:"Return",src:"4455:153:76"}]},documentation:null,id:17304,implemented:true,kind:"function",modifiers:[],name:"getBidPrice",nodeType:"FunctionDefinition",parameters:{id:17249,nodeType:"ParameterList",parameters:[{constant:false,id:17240,name:"_quantity",nodeType:"VariableDeclaration",scope:17304,src:"3433:17:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17239,name:"uint256",nodeType:"ElementaryTypeName",src:"3433:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17242,name:"_auctionLibrary",nodeType:"VariableDeclaration",scope:17304,src:"3460:23:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:17241,name:"address",nodeType:"ElementaryTypeName",src:"3460:7:76",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:17244,name:"_biddingParameters",nodeType:"VariableDeclaration",scope:17304,src:"3493:62:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters"},typeName:{contractScope:null,id:17243,name:"RebalancingLibrary.BiddingParameters",nodeType:"UserDefinedTypeName",referencedDeclaration:6656,src:"3493:36:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_storage_ptr",typeString:"struct RebalancingLibrary.BiddingParameters"}},value:null,visibility:"internal"},{constant:false,id:17246,name:"_auctionPriceParameters",nodeType:"VariableDeclaration",scope:17304,src:"3565:72:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_struct$_AuctionPriceParameters_$6642_memory_ptr",typeString:"struct RebalancingLibrary.AuctionPriceParameters"},typeName:{contractScope:null,id:17245,name:"RebalancingLibrary.AuctionPriceParameters",nodeType:"UserDefinedTypeName",referencedDeclaration:6642,src:"3565:41:76",typeDescriptions:{typeIdentifier:"t_struct$_AuctionPriceParameters_$6642_storage_ptr",typeString:"struct RebalancingLibrary.AuctionPriceParameters"}},value:null,visibility:"internal"},{constant:false,id:17248,name:"_rebalanceState",nodeType:"VariableDeclaration",scope:17304,src:"3647:21:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint8",typeString:"uint8"},typeName:{id:17247,name:"uint8",nodeType:"ElementaryTypeName",src:"3647:5:76",typeDescriptions:{typeIdentifier:"t_uint8",typeString:"uint8"}},value:null,visibility:"internal"}],src:"3423:251:76"},returnParameters:{id:17256,nodeType:"ParameterList",parameters:[{constant:false,id:17252,name:"",nodeType:"VariableDeclaration",scope:17304,src:"3720:16:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:17250,name:"uint256",nodeType:"ElementaryTypeName",src:"3720:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17251,length:null,nodeType:"ArrayTypeName",src:"3720:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"},{constant:false,id:17255,name:"",nodeType:"VariableDeclaration",scope:17304,src:"3738:16:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:17253,name:"uint256",nodeType:"ElementaryTypeName",src:"3738:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17254,length:null,nodeType:"ArrayTypeName",src:"3738:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],src:"3719:36:76"},scope:17473,src:"3403:1212:76",stateMutability:"view",superFunction:null,visibility:"public"},{body:{id:17385,nodeType:"Block",src:"5506:887:76",statements:[{assignments:[17322],declarations:[{constant:false,id:17322,name:"combinedTokenCount",nodeType:"VariableDeclaration",scope:17385,src:"5557:26:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17321,name:"uint256",nodeType:"ElementaryTypeName",src:"5557:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:17326,initialValue:{argumentTypes:null,expression:{argumentTypes:null,expression:{argumentTypes:null,id:17323,name:"_biddingParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17312,src:"5586:18:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}},id:17324,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"combinedTokenArray",nodeType:"MemberAccess",referencedDeclaration:6655,src:"5586:37:76",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_memory",typeString:"address[] memory"}},id:17325,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"length",nodeType:"MemberAccess",referencedDeclaration:null,src:"5586:44:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"5557:73:76"},{assignments:[17330],declarations:[{constant:false,id:17330,name:"inflowUnitArray",nodeType:"VariableDeclaration",scope:17385,src:"5640:32:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:17328,name:"uint256",nodeType:"ElementaryTypeName",src:"5640:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17329,length:null,nodeType:"ArrayTypeName",src:"5640:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:17336,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:17334,name:"combinedTokenCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17322,src:"5689:18:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:17333,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"NewExpression",src:"5675:13:76",typeDescriptions:{typeIdentifier:"t_function_objectcreation_pure$_t_uint256_$returns$_t_array$_t_uint256_$dyn_memory_$",typeString:"function (uint256) pure returns (uint256[] memory)"},typeName:{baseType:{id:17331,name:"uint256",nodeType:"ElementaryTypeName",src:"5679:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17332,length:null,nodeType:"ArrayTypeName",src:"5679:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}}},id:17335,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5675:33:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"5640:68:76"},{assignments:[17340],declarations:[{constant:false,id:17340,name:"outflowUnitArray",nodeType:"VariableDeclaration",scope:17385,src:"5718:33:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:17338,name:"uint256",nodeType:"ElementaryTypeName",src:"5718:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17339,length:null,nodeType:"ArrayTypeName",src:"5718:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:17346,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:17344,name:"combinedTokenCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17322,src:"5768:18:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:17343,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"NewExpression",src:"5754:13:76",typeDescriptions:{typeIdentifier:"t_function_objectcreation_pure$_t_uint256_$returns$_t_array$_t_uint256_$dyn_memory_$",typeString:"function (uint256) pure returns (uint256[] memory)"},typeName:{baseType:{id:17341,name:"uint256",nodeType:"ElementaryTypeName",src:"5758:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17342,length:null,nodeType:"ArrayTypeName",src:"5758:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}}},id:17345,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5754:33:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"5718:69:76"},{body:{id:17379,nodeType:"Block",src:"5968:366:76",statements:[{expression:{argumentTypes:null,id:17377,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,components:[{argumentTypes:null,baseExpression:{argumentTypes:null,id:17357,name:"inflowUnitArray",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17330,src:"6000:15:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:17359,indexExpression:{argumentTypes:null,id:17358,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17348,src:"6016:1:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"6000:18:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,baseExpression:{argumentTypes:null,id:17360,name:"outflowUnitArray",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17340,src:"6036:16:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:17362,indexExpression:{argumentTypes:null,id:17361,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17348,src:"6053:1:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"6036:19:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],id:17363,isConstant:false,isInlineArray:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"TupleExpression",src:"5982:87:76",typeDescriptions:{typeIdentifier:"t_tuple$_t_uint256_$_t_uint256_$",typeString:"tuple(uint256,uint256)"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,baseExpression:{argumentTypes:null,expression:{argumentTypes:null,id:17365,name:"_biddingParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17312,src:"6109:18:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}},id:17366,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"combinedCurrentUnits",nodeType:"MemberAccess",referencedDeclaration:6649,src:"6109:39:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},id:17368,indexExpression:{argumentTypes:null,id:17367,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17348,src:"6149:1:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"6109:42:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,baseExpression:{argumentTypes:null,expression:{argumentTypes:null,id:17369,name:"_biddingParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17312,src:"6169:18:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}},id:17370,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"combinedNextSetUnits",nodeType:"MemberAccess",referencedDeclaration:6652,src:"6169:39:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},id:17372,indexExpression:{argumentTypes:null,id:17371,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17348,src:"6209:1:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"6169:42:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17373,name:"_unitsMultiplier",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17306,src:"6229:16:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17374,name:"_priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17308,src:"6263:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17375,name:"_priceDivisor",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17310,src:"6296:13:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"}],id:17364,name:"calculateTokenFlows",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17472,src:"6072:19:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_uint256_$",typeString:"function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256,uint256)"}},id:17376,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6072:251:76",typeDescriptions:{typeIdentifier:"t_tuple$_t_uint256_$_t_uint256_$",typeString:"tuple(uint256,uint256)"}},src:"5982:341:76",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:17378,nodeType:"ExpressionStatement",src:"5982:341:76"}]},condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:17353,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:17351,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17348,src:"5939:1:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<",rightExpression:{argumentTypes:null,id:17352,name:"combinedTokenCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17322,src:"5943:18:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"5939:22:76",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:17380,initializationExpression:{assignments:[17348],declarations:[{constant:false,id:17348,name:"i",nodeType:"VariableDeclaration",scope:17380,src:"5924:9:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17347,name:"uint256",nodeType:"ElementaryTypeName",src:"5924:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:17350,initialValue:{argumentTypes:null,hexValue:"30",id:17349,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"5936:1:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},nodeType:"VariableDeclarationStatement",src:"5924:13:76"},loopExpression:{expression:{argumentTypes:null,id:17355,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"UnaryOperation",operator:"++",prefix:false,src:"5963:3:76",subExpression:{argumentTypes:null,id:17354,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17348,src:"5963:1:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17356,nodeType:"ExpressionStatement",src:"5963:3:76"},nodeType:"ForStatement",src:"5919:415:76"},{expression:{argumentTypes:null,components:[{argumentTypes:null,id:17381,name:"inflowUnitArray",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17330,src:"6352:15:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},{argumentTypes:null,id:17382,name:"outflowUnitArray",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17340,src:"6369:16:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}}],id:17383,isConstant:false,isInlineArray:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"TupleExpression",src:"6351:35:76",typeDescriptions:{typeIdentifier:"t_tuple$_t_array$_t_uint256_$dyn_memory_ptr_$_t_array$_t_uint256_$dyn_memory_ptr_$",typeString:"tuple(uint256[] memory,uint256[] memory)"}},functionReturnParameters:17320,id:17384,nodeType:"Return",src:"6344:42:76"}]},documentation:null,id:17386,implemented:true,kind:"function",modifiers:[],name:"createTokenFlowArrays",nodeType:"FunctionDefinition",parameters:{id:17313,nodeType:"ParameterList",parameters:[{constant:false,id:17306,name:"_unitsMultiplier",nodeType:"VariableDeclaration",scope:17386,src:"5254:24:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17305,name:"uint256",nodeType:"ElementaryTypeName",src:"5254:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17308,name:"_priceNumerator",nodeType:"VariableDeclaration",scope:17386,src:"5288:23:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17307,name:"uint256",nodeType:"ElementaryTypeName",src:"5288:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17310,name:"_priceDivisor",nodeType:"VariableDeclaration",scope:17386,src:"5321:21:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17309,name:"uint256",nodeType:"ElementaryTypeName",src:"5321:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17312,name:"_biddingParameters",nodeType:"VariableDeclaration",scope:17386,src:"5352:62:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters"},typeName:{contractScope:null,id:17311,name:"RebalancingLibrary.BiddingParameters",nodeType:"UserDefinedTypeName",referencedDeclaration:6656,src:"5352:36:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_storage_ptr",typeString:"struct RebalancingLibrary.BiddingParameters"}},value:null,visibility:"internal"}],src:"5244:176:76"},returnParameters:{id:17320,nodeType:"ParameterList",parameters:[{constant:false,id:17316,name:"",nodeType:"VariableDeclaration",scope:17386,src:"5466:16:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:17314,name:"uint256",nodeType:"ElementaryTypeName",src:"5466:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17315,length:null,nodeType:"ArrayTypeName",src:"5466:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"},{constant:false,id:17319,name:"",nodeType:"VariableDeclaration",scope:17386,src:"5484:16:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:17317,name:"uint256",nodeType:"ElementaryTypeName",src:"5484:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17318,length:null,nodeType:"ArrayTypeName",src:"5484:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],src:"5465:36:76"},scope:17473,src:"5214:1179:76",stateMutability:"pure",superFunction:null,visibility:"public"},{body:{id:17471,nodeType:"Block",src:"7335:2441:76",statements:[{assignments:[17404],declarations:[{constant:false,id:17404,name:"inflowUnit",nodeType:"VariableDeclaration",scope:17471,src:"8822:18:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17403,name:"uint256",nodeType:"ElementaryTypeName",src:"8822:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:17405,initialValue:null,nodeType:"VariableDeclarationStatement",src:"8822:18:76"},{assignments:[17407],declarations:[{constant:false,id:17407,name:"outflowUnit",nodeType:"VariableDeclaration",scope:17471,src:"8850:19:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17406,name:"uint256",nodeType:"ElementaryTypeName",src:"8850:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:17408,initialValue:null,nodeType:"VariableDeclarationStatement",src:"8850:19:76"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:17417,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,arguments:[{argumentTypes:null,id:17411,name:"_priceDivisor",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17396,src:"8965:13:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17409,name:"_nextSetUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17390,src:"8948:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17410,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"8948:16:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17412,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"8948:31:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:">",rightExpression:{argumentTypes:null,arguments:[{argumentTypes:null,id:17415,name:"_priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17394,src:"8999:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17413,name:"_currentUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17388,src:"8982:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17414,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"8982:16:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17416,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"8982:33:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"8948:67:76",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:{id:17465,nodeType:"Block",src:"9375:352:76",statements:[{expression:{argumentTypes:null,id:17459,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:17442,name:"outflowUnit",
nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17407,src:"9429:11:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,id:17457,name:"_priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17394,src:"9570:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:17452,name:"_priceDivisor",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17396,src:"9536:13:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17450,name:"_nextSetUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17390,src:"9519:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17451,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"9519:16:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17453,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9519:31:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:17447,name:"_priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17394,src:"9498:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17445,name:"_currentUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17388,src:"9481:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17446,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"9481:16:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17448,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9481:33:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17449,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sub",nodeType:"MemberAccess",referencedDeclaration:29595,src:"9481:37:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17454,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9481:70:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17443,name:"_unitsMultiplier",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17392,src:"9443:16:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17444,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"9443:20:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17455,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9443:122:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17456,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"9443:126:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17458,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9443:143:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"9429:157:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17460,nodeType:"ExpressionStatement",src:"9429:157:76"},{expression:{argumentTypes:null,id:17463,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:17461,name:"inflowUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17404,src:"9702:10:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,hexValue:"30",id:17462,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"9715:1:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"9702:14:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17464,nodeType:"ExpressionStatement",src:"9702:14:76"}]},id:17466,nodeType:"IfStatement",src:"8944:783:76",trueBody:{id:17441,nodeType:"Block",src:"9017:352:76",statements:[{expression:{argumentTypes:null,id:17435,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:17418,name:"inflowUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17404,src:"9070:10:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,id:17433,name:"_priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17394,src:"9210:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:17428,name:"_priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17394,src:"9174:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17426,name:"_currentUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17388,src:"9157:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17427,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"9157:16:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17429,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9157:33:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:17423,name:"_priceDivisor",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17396,src:"9138:13:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17421,name:"_nextSetUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17390,src:"9121:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17422,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"9121:16:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17424,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9121:31:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17425,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sub",nodeType:"MemberAccess",referencedDeclaration:29595,src:"9121:35:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17430,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9121:70:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17419,name:"_unitsMultiplier",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17392,src:"9083:16:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17420,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"9083:20:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17431,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9083:122:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17432,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"9083:126:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17434,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9083:143:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"9070:156:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17436,nodeType:"ExpressionStatement",src:"9070:156:76"},{expression:{argumentTypes:null,id:17439,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:17437,name:"outflowUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17407,src:"9343:11:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,hexValue:"30",id:17438,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"9357:1:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"9343:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17440,nodeType:"ExpressionStatement",src:"9343:15:76"}]}},{expression:{argumentTypes:null,components:[{argumentTypes:null,id:17467,name:"inflowUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17404,src:"9745:10:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17468,name:"outflowUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17407,src:"9757:11:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],id:17469,isConstant:false,isInlineArray:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"TupleExpression",src:"9744:25:76",typeDescriptions:{typeIdentifier:"t_tuple$_t_uint256_$_t_uint256_$",typeString:"tuple(uint256,uint256)"}},functionReturnParameters:17402,id:17470,nodeType:"Return",src:"9737:32:76"}]},documentation:null,id:17472,implemented:true,kind:"function",modifiers:[],name:"calculateTokenFlows",nodeType:"FunctionDefinition",parameters:{id:17397,nodeType:"ParameterList",parameters:[{constant:false,id:17388,name:"_currentUnit",nodeType:"VariableDeclaration",scope:17472,src:"7113:20:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17387,name:"uint256",nodeType:"ElementaryTypeName",src:"7113:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17390,name:"_nextSetUnit",nodeType:"VariableDeclaration",scope:17472,src:"7143:20:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17389,name:"uint256",nodeType:"ElementaryTypeName",src:"7143:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17392,name:"_unitsMultiplier",nodeType:"VariableDeclaration",scope:17472,src:"7173:24:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17391,name:"uint256",nodeType:"ElementaryTypeName",src:"7173:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17394,name:"_priceNumerator",nodeType:"VariableDeclaration",scope:17472,src:"7207:23:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17393,name:"uint256",nodeType:"ElementaryTypeName",src:"7207:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17396,name:"_priceDivisor",nodeType:"VariableDeclaration",scope:17472,src:"7240:21:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17395,name:"uint256",nodeType:"ElementaryTypeName",src:"7240:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"7103:164:76"},returnParameters:{id:17402,nodeType:"ParameterList",parameters:[{constant:false,id:17399,name:"",nodeType:"VariableDeclaration",scope:17472,src:"7313:7:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17398,name:"uint256",nodeType:"ElementaryTypeName",src:"7313:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17401,name:"",nodeType:"VariableDeclaration",scope:17472,src:"7322:7:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17400,name:"uint256",nodeType:"ElementaryTypeName",src:"7322:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"7312:18:76"},scope:17473,src:"7075:2701:76",stateMutability:"pure",superFunction:null,visibility:"public"}],scope:17474,src:"1155:8623:76"}],src:"597:9182:76"},legacyAST:{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/tokens/rebalancing-libraries/PlaceBidLibrary.sol",exportedSymbols:{PlaceBidLibrary:[17473]},id:17474,nodeType:"SourceUnit",nodes:[{id:17177,literals:["solidity","0.5",".7"],nodeType:"PragmaDirective",src:"597:22:76"},{id:17178,literals:["experimental","ABIEncoderV2"],nodeType:"PragmaDirective",src:"620:35:76"},{absolutePath:"openzeppelin-solidity/contracts/math/Math.sol",file:"openzeppelin-solidity/contracts/math/Math.sol",id:17180,nodeType:"ImportDirective",scope:17474,sourceUnit:29513,src:"657:69:76",symbolAliases:[{foreign:17179,local:null}],unitAlias:""},{absolutePath:"openzeppelin-solidity/contracts/math/SafeMath.sol",file:"openzeppelin-solidity/contracts/math/SafeMath.sol",id:17182,nodeType:"ImportDirective",scope:17474,sourceUnit:29641,src:"727:77:76",symbolAliases:[{foreign:17181,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/auction-price-libraries/IAuctionPriceCurve.sol",file:"../../lib/auction-price-libraries/IAuctionPriceCurve.sol",id:17184,nodeType:"ImportDirective",scope:17474,sourceUnit:6867,src:"805:94:76",symbolAliases:[{foreign:17183,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ICore.sol",file:"../../interfaces/ICore.sol",id:17186,nodeType:"ImportDirective",scope:17474,sourceUnit:4747,src:"900:51:76",symbolAliases:[{foreign:17185,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/RebalancingLibrary.sol",file:"../../lib/RebalancingLibrary.sol",id:17188,nodeType:"ImportDirective",scope:17474,sourceUnit:6658,src:"952:70:76",symbolAliases:[{foreign:17187,local:null}],unitAlias:""},{baseContracts:[],contractDependencies:[],contractKind:"library",documentation:"@title PlaceBidLibrary\n@author Set Protocol\n * Default implementation of Rebalancing Set Token placeBid function",fullyImplemented:true,id:17473,linearizedBaseContracts:[17473],name:"PlaceBidLibrary",nodeType:"ContractDefinition",nodes:[{id:17191,libraryName:{contractScope:null,id:17189,name:"SafeMath",nodeType:"UserDefinedTypeName",referencedDeclaration:29640,src:"1191:8:76",typeDescriptions:{typeIdentifier:"t_contract$_SafeMath_$29640",typeString:"library SafeMath"}},nodeType:"UsingForDirective",src:"1185:27:76",typeName:{id:17190,name:"uint256",nodeType:"ElementaryTypeName",src:"1204:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}},{body:{id:17237,nodeType:"Block",src:"1795:867:76",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,id:17205,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"1899:3:76",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:17206,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"1899:10:76",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}}],expression:{argumentTypes:[{typeIdentifier:"t_address_payable",typeString:"address payable"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:17202,name:"_coreAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17195,src:"1872:12:76",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:17201,name:"ICore",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:4746,src:"1866:5:76",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ICore_$4746_$",typeString:"type(contract ICore)"}},id:17203,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"1866:19:76",typeDescriptions:{typeIdentifier:"t_contract$_ICore_$4746",typeString:"contract ICore"}},id:17204,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"validModules",nodeType:"MemberAccess",referencedDeclaration:4490,src:"1866:32:76",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$returns$_t_bool_$",typeString:"function (address) view external returns (bool)"}},id:17207,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"1866:44:76",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e67536574546f6b656e2e706c6163654269643a2053656e646572206d75737420626520617070726f766564206d6f64756c65",id:17208,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"1924:62:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_9ca341b3699365d4ef430f60324b49bc787cfcc7773501be637279f5ed1f6cb4",typeString:'literal_string "RebalancingSetToken.placeBid: Sender must be approved module"'},value:"RebalancingSetToken.placeBid: Sender must be approved module"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_9ca341b3699365d4ef430f60324b49bc787cfcc7773501be637279f5ed1f6cb4",typeString:'literal_string "RebalancingSetToken.placeBid: Sender must be approved module"'}],id:17200,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"1845:7:76",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:17209,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"1845:151:76",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:17210,nodeType:"ExpressionStatement",src:"1845:151:76"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:17214,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:17212,name:"_quantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17193,src:"2086:9:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:">",rightExpression:{argumentTypes:null,hexValue:"30",id:17213,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"2098:1:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"2086:13:76",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e67536574546f6b656e2e706c6163654269643a20426964206d757374206265203e2030",id:17215,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"2113:47:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_fe5d589365b4a9d22347ee9b70e4bd9cd5b91857260dfa8a8d65e93d2d04f622",typeString:'literal_string "RebalancingSetToken.placeBid: Bid must be > 0"'},value:"RebalancingSetToken.placeBid: Bid must be > 0"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_fe5d589365b4a9d22347ee9b70e4bd9cd5b91857260dfa8a8d65e93d2d04f622",typeString:'literal_string "RebalancingSetToken.placeBid: Bid must be > 0"'}],id:17211,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"2065:7:76",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:17216,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2065:105:76",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:17217,nodeType:"ExpressionStatement",src:"2065:105:76"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:17225,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,id:17221,name:"_biddingParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17197,src:"2287:18:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}},id:17222,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"minimumBid",nodeType:"MemberAccess",referencedDeclaration:6644,src:"2287:29:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17219,name:"_quantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17193,src:"2273:9:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17220,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mod",nodeType:"MemberAccess",referencedDeclaration:29639,src:"2273:13:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17223,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2273:44:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"==",rightExpression:{argumentTypes:null,hexValue:"30",id:17224,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"2321:1:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"2273:49:76",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e67536574546f6b656e2e706c6163654269643a204d75737420626964206d756c7469706c65206f66206d696e696d756d20626964",id:17226,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"2336:64:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_eca39e5e98fe074f9f0d772f1efeb99428954f657c8b5174d566ef7b59fe8505",typeString:'literal_string "RebalancingSetToken.placeBid: Must bid multiple of minimum bid"'},value:"RebalancingSetToken.placeBid: Must bid multiple of minimum bid"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_eca39e5e98fe074f9f0d772f1efeb99428954f657c8b5174d566ef7b59fe8505",typeString:'literal_string "RebalancingSetToken.placeBid: Must bid multiple of minimum bid"'}],id:17218,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"2252:7:76",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:17227,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2252:158:76",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:17228,nodeType:"ExpressionStatement",src:"2252:158:76"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:17233,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:17230,name:"_quantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17193,src:"2513:9:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<=",rightExpression:{argumentTypes:null,expression:{argumentTypes:null,id:17231,name:"_biddingParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17197,src:"2526:18:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}},id:17232,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"remainingCurrentSets",nodeType:"MemberAccess",referencedDeclaration:6646,src:"2526:39:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2513:52:76",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e67536574546f6b656e2e706c6163654269643a2042696420657863656564732072656d61696e696e672063757272656e742073657473",id:17234,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"2579:66:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_14e4c7e2713a7afb8ef07f96bfe145180969bbecaacdbca79d540dd5ebf3878d",typeString:'literal_string "RebalancingSetToken.placeBid: Bid exceeds remaining current sets"'},value:"RebalancingSetToken.placeBid: Bid exceeds remaining current sets"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_14e4c7e2713a7afb8ef07f96bfe145180969bbecaacdbca79d540dd5ebf3878d",typeString:'literal_string "RebalancingSetToken.placeBid: Bid exceeds remaining current sets"'}],id:17229,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"2492:7:76",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:17235,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2492:163:76",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:17236,nodeType:"ExpressionStatement",src:"2492:163:76"}]},documentation:null,id:17238,implemented:true,kind:"function",modifiers:[],name:"validatePlaceBid",nodeType:"FunctionDefinition",parameters:{id:17198,nodeType:"ParameterList",parameters:[{constant:false,id:17193,name:"_quantity",nodeType:"VariableDeclaration",scope:17238,src:"1637:17:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17192,name:"uint256",nodeType:"ElementaryTypeName",src:"1637:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17195,name:"_coreAddress",nodeType:"VariableDeclaration",scope:17238,src:"1664:20:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:17194,name:"address",nodeType:"ElementaryTypeName",src:"1664:7:76",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:17197,name:"_biddingParameters",nodeType:"VariableDeclaration",scope:17238,src:"1694:62:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters"},typeName:{contractScope:null,id:17196,name:"RebalancingLibrary.BiddingParameters",nodeType:"UserDefinedTypeName",referencedDeclaration:6656,src:"1694:36:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_storage_ptr",typeString:"struct RebalancingLibrary.BiddingParameters"}},value:null,visibility:"internal"}],src:"1627:135:76"},returnParameters:{id:17199,nodeType:"ParameterList",parameters:[],src:"1795:0:76"},scope:17473,src:"1602:1060:76",stateMutability:"view",superFunction:null,
visibility:"public"},{body:{id:17303,nodeType:"Block",src:"3760:855:76",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint8",typeString:"uint8"},id:17264,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:17258,name:"_rebalanceState",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17248,src:"3829:15:76",typeDescriptions:{typeIdentifier:"t_uint8",typeString:"uint8"}},nodeType:"BinaryOperation",operator:"==",rightExpression:{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,expression:{argumentTypes:null,id:17260,name:"RebalancingLibrary",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6657,src:"3854:18:76",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_RebalancingLibrary_$6657_$",typeString:"type(library RebalancingLibrary)"}},id:17261,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"State",nodeType:"MemberAccess",referencedDeclaration:6633,src:"3854:24:76",typeDescriptions:{typeIdentifier:"t_type$_t_enum$_State_$6633_$",typeString:"type(enum RebalancingLibrary.State)"}},id:17262,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,memberName:"Rebalance",nodeType:"MemberAccess",referencedDeclaration:null,src:"3854:34:76",typeDescriptions:{typeIdentifier:"t_enum$_State_$6633",typeString:"enum RebalancingLibrary.State"}}],expression:{argumentTypes:[{typeIdentifier:"t_enum$_State_$6633",typeString:"enum RebalancingLibrary.State"}],id:17259,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"3848:5:76",typeDescriptions:{typeIdentifier:"t_type$_t_uint8_$",typeString:"type(uint8)"},typeName:"uint8"},id:17263,isConstant:false,isLValue:false,isPure:true,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3848:41:76",typeDescriptions:{typeIdentifier:"t_uint8",typeString:"uint8"}},src:"3829:60:76",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e67536574546f6b656e2e67657442696450726963653a205374617465206d75737420626520526562616c616e6365",id:17265,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"3903:58:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_11510c653bd4452ab5ebc2e9897cd816784a481edc30994707aff383fc411927",typeString:'literal_string "RebalancingSetToken.getBidPrice: State must be Rebalance"'},value:"RebalancingSetToken.getBidPrice: State must be Rebalance"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_11510c653bd4452ab5ebc2e9897cd816784a481edc30994707aff383fc411927",typeString:'literal_string "RebalancingSetToken.getBidPrice: State must be Rebalance"'}],id:17257,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"3808:7:76",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:17266,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3808:163:76",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:17267,nodeType:"ExpressionStatement",src:"3808:163:76"},{assignments:[17269],declarations:[{constant:false,id:17269,name:"priceNumerator",nodeType:"VariableDeclaration",scope:17303,src:"4075:22:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17268,name:"uint256",nodeType:"ElementaryTypeName",src:"4075:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:17270,initialValue:null,nodeType:"VariableDeclarationStatement",src:"4075:22:76"},{assignments:[17272],declarations:[{constant:false,id:17272,name:"priceDivisor",nodeType:"VariableDeclaration",scope:17303,src:"4107:20:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17271,name:"uint256",nodeType:"ElementaryTypeName",src:"4107:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:17273,initialValue:null,nodeType:"VariableDeclarationStatement",src:"4107:20:76"},{expression:{argumentTypes:null,id:17283,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,components:[{argumentTypes:null,id:17274,name:"priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17269,src:"4138:14:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17275,name:"priceDivisor",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17272,src:"4154:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],id:17276,isConstant:false,isInlineArray:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"TupleExpression",src:"4137:30:76",typeDescriptions:{typeIdentifier:"t_tuple$_t_uint256_$_t_uint256_$",typeString:"tuple(uint256,uint256)"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,id:17281,name:"_auctionPriceParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17246,src:"4235:23:76",typeDescriptions:{typeIdentifier:"t_struct$_AuctionPriceParameters_$6642_memory_ptr",typeString:"struct RebalancingLibrary.AuctionPriceParameters memory"}}],expression:{argumentTypes:[{typeIdentifier:"t_struct$_AuctionPriceParameters_$6642_memory_ptr",typeString:"struct RebalancingLibrary.AuctionPriceParameters memory"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:17278,name:"_auctionLibrary",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17242,src:"4189:15:76",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:17277,name:"IAuctionPriceCurve",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6866,src:"4170:18:76",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_IAuctionPriceCurve_$6866_$",typeString:"type(contract IAuctionPriceCurve)"}},id:17279,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4170:35:76",typeDescriptions:{typeIdentifier:"t_contract$_IAuctionPriceCurve_$6866",typeString:"contract IAuctionPriceCurve"}},id:17280,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getCurrentPrice",nodeType:"MemberAccess",referencedDeclaration:6865,src:"4170:51:76",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_struct$_AuctionPriceParameters_$6642_memory_ptr_$returns$_t_uint256_$_t_uint256_$",typeString:"function (struct RebalancingLibrary.AuctionPriceParameters memory) view external returns (uint256,uint256)"}},id:17282,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4170:98:76",typeDescriptions:{typeIdentifier:"t_tuple$_t_uint256_$_t_uint256_$",typeString:"tuple(uint256,uint256)"}},src:"4137:131:76",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:17284,nodeType:"ExpressionStatement",src:"4137:131:76"},{assignments:[17286],declarations:[{constant:false,id:17286,name:"unitsMultiplier",nodeType:"VariableDeclaration",scope:17303,src:"4317:23:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17285,name:"uint256",nodeType:"ElementaryTypeName",src:"4317:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:17295,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:17293,name:"priceDivisor",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17272,src:"4392:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,id:17289,name:"_biddingParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17244,src:"4357:18:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}},id:17290,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"minimumBid",nodeType:"MemberAccess",referencedDeclaration:6644,src:"4357:29:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17287,name:"_quantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17240,src:"4343:9:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17288,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"4343:13:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17291,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4343:44:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17292,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"4343:48:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17294,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4343:62:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4317:88:76"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:17297,name:"unitsMultiplier",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17286,src:"4497:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17298,name:"priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17269,src:"4526:14:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17299,name:"priceDivisor",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17272,src:"4554:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17300,name:"_biddingParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17244,src:"4580:18:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}],id:17296,name:"createTokenFlowArrays",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17386,src:"4462:21:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_struct$_BiddingParameters_$6656_memory_ptr_$returns$_t_array$_t_uint256_$dyn_memory_ptr_$_t_array$_t_uint256_$dyn_memory_ptr_$",typeString:"function (uint256,uint256,uint256,struct RebalancingLibrary.BiddingParameters memory) pure returns (uint256[] memory,uint256[] memory)"}},id:17301,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4462:146:76",typeDescriptions:{typeIdentifier:"t_tuple$_t_array$_t_uint256_$dyn_memory_ptr_$_t_array$_t_uint256_$dyn_memory_ptr_$",typeString:"tuple(uint256[] memory,uint256[] memory)"}},functionReturnParameters:17256,id:17302,nodeType:"Return",src:"4455:153:76"}]},documentation:null,id:17304,implemented:true,kind:"function",modifiers:[],name:"getBidPrice",nodeType:"FunctionDefinition",parameters:{id:17249,nodeType:"ParameterList",parameters:[{constant:false,id:17240,name:"_quantity",nodeType:"VariableDeclaration",scope:17304,src:"3433:17:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17239,name:"uint256",nodeType:"ElementaryTypeName",src:"3433:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17242,name:"_auctionLibrary",nodeType:"VariableDeclaration",scope:17304,src:"3460:23:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:17241,name:"address",nodeType:"ElementaryTypeName",src:"3460:7:76",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:17244,name:"_biddingParameters",nodeType:"VariableDeclaration",scope:17304,src:"3493:62:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters"},typeName:{contractScope:null,id:17243,name:"RebalancingLibrary.BiddingParameters",nodeType:"UserDefinedTypeName",referencedDeclaration:6656,src:"3493:36:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_storage_ptr",typeString:"struct RebalancingLibrary.BiddingParameters"}},value:null,visibility:"internal"},{constant:false,id:17246,name:"_auctionPriceParameters",nodeType:"VariableDeclaration",scope:17304,src:"3565:72:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_struct$_AuctionPriceParameters_$6642_memory_ptr",typeString:"struct RebalancingLibrary.AuctionPriceParameters"},typeName:{contractScope:null,id:17245,name:"RebalancingLibrary.AuctionPriceParameters",nodeType:"UserDefinedTypeName",referencedDeclaration:6642,src:"3565:41:76",typeDescriptions:{typeIdentifier:"t_struct$_AuctionPriceParameters_$6642_storage_ptr",typeString:"struct RebalancingLibrary.AuctionPriceParameters"}},value:null,visibility:"internal"},{constant:false,id:17248,name:"_rebalanceState",nodeType:"VariableDeclaration",scope:17304,src:"3647:21:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint8",typeString:"uint8"},typeName:{id:17247,name:"uint8",nodeType:"ElementaryTypeName",src:"3647:5:76",typeDescriptions:{typeIdentifier:"t_uint8",typeString:"uint8"}},value:null,visibility:"internal"}],src:"3423:251:76"},returnParameters:{id:17256,nodeType:"ParameterList",parameters:[{constant:false,id:17252,name:"",nodeType:"VariableDeclaration",scope:17304,src:"3720:16:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:17250,name:"uint256",nodeType:"ElementaryTypeName",src:"3720:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17251,length:null,nodeType:"ArrayTypeName",src:"3720:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"},{constant:false,id:17255,name:"",nodeType:"VariableDeclaration",scope:17304,src:"3738:16:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:17253,name:"uint256",nodeType:"ElementaryTypeName",src:"3738:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17254,length:null,nodeType:"ArrayTypeName",src:"3738:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],src:"3719:36:76"},scope:17473,src:"3403:1212:76",stateMutability:"view",superFunction:null,visibility:"public"},{body:{id:17385,nodeType:"Block",src:"5506:887:76",statements:[{assignments:[17322],declarations:[{constant:false,id:17322,name:"combinedTokenCount",nodeType:"VariableDeclaration",scope:17385,src:"5557:26:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17321,name:"uint256",nodeType:"ElementaryTypeName",src:"5557:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:17326,initialValue:{argumentTypes:null,expression:{argumentTypes:null,expression:{argumentTypes:null,id:17323,name:"_biddingParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17312,src:"5586:18:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}},id:17324,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"combinedTokenArray",nodeType:"MemberAccess",referencedDeclaration:6655,src:"5586:37:76",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_memory",typeString:"address[] memory"}},id:17325,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"length",nodeType:"MemberAccess",referencedDeclaration:null,src:"5586:44:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"5557:73:76"},{assignments:[17330],declarations:[{constant:false,id:17330,name:"inflowUnitArray",nodeType:"VariableDeclaration",scope:17385,src:"5640:32:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:17328,name:"uint256",nodeType:"ElementaryTypeName",src:"5640:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17329,length:null,nodeType:"ArrayTypeName",src:"5640:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:17336,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:17334,name:"combinedTokenCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17322,src:"5689:18:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:17333,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"NewExpression",src:"5675:13:76",typeDescriptions:{typeIdentifier:"t_function_objectcreation_pure$_t_uint256_$returns$_t_array$_t_uint256_$dyn_memory_$",typeString:"function (uint256) pure returns (uint256[] memory)"},typeName:{baseType:{id:17331,name:"uint256",nodeType:"ElementaryTypeName",src:"5679:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17332,length:null,nodeType:"ArrayTypeName",src:"5679:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}}},id:17335,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5675:33:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"5640:68:76"},{assignments:[17340],declarations:[{constant:false,id:17340,name:"outflowUnitArray",nodeType:"VariableDeclaration",scope:17385,src:"5718:33:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:17338,name:"uint256",nodeType:"ElementaryTypeName",src:"5718:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17339,length:null,nodeType:"ArrayTypeName",src:"5718:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:17346,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:17344,name:"combinedTokenCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17322,src:"5768:18:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:17343,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"NewExpression",src:"5754:13:76",typeDescriptions:{typeIdentifier:"t_function_objectcreation_pure$_t_uint256_$returns$_t_array$_t_uint256_$dyn_memory_$",typeString:"function (uint256) pure returns (uint256[] memory)"},typeName:{baseType:{id:17341,name:"uint256",nodeType:"ElementaryTypeName",src:"5758:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17342,length:null,nodeType:"ArrayTypeName",src:"5758:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}}},id:17345,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5754:33:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"5718:69:76"},{body:{id:17379,nodeType:"Block",src:"5968:366:76",statements:[{expression:{argumentTypes:null,id:17377,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,components:[{argumentTypes:null,baseExpression:{argumentTypes:null,id:17357,name:"inflowUnitArray",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17330,src:"6000:15:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:17359,indexExpression:{argumentTypes:null,id:17358,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17348,src:"6016:1:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"6000:18:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,baseExpression:{argumentTypes:null,id:17360,name:"outflowUnitArray",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17340,src:"6036:16:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:17362,indexExpression:{argumentTypes:null,id:17361,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17348,src:"6053:1:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"6036:19:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],id:17363,isConstant:false,isInlineArray:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"TupleExpression",src:"5982:87:76",typeDescriptions:{typeIdentifier:"t_tuple$_t_uint256_$_t_uint256_$",typeString:"tuple(uint256,uint256)"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,baseExpression:{argumentTypes:null,expression:{argumentTypes:null,id:17365,name:"_biddingParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17312,src:"6109:18:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}},id:17366,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"combinedCurrentUnits",nodeType:"MemberAccess",referencedDeclaration:6649,src:"6109:39:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},id:17368,indexExpression:{argumentTypes:null,id:17367,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17348,src:"6149:1:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"6109:42:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,baseExpression:{argumentTypes:null,expression:{argumentTypes:null,id:17369,name:"_biddingParameters",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17312,src:"6169:18:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters memory"}},id:17370,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"combinedNextSetUnits",nodeType:"MemberAccess",referencedDeclaration:6652,src:"6169:39:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},id:17372,indexExpression:{argumentTypes:null,id:17371,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17348,src:"6209:1:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"6169:42:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17373,name:"_unitsMultiplier",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17306,src:"6229:16:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17374,name:"_priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17308,src:"6263:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17375,name:"_priceDivisor",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17310,src:"6296:13:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"}],id:17364,name:"calculateTokenFlows",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17472,src:"6072:19:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_uint256_$",typeString:"function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256,uint256)"}},id:17376,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6072:251:76",typeDescriptions:{typeIdentifier:"t_tuple$_t_uint256_$_t_uint256_$",typeString:"tuple(uint256,uint256)"}},src:"5982:341:76",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:17378,nodeType:"ExpressionStatement",src:"5982:341:76"}]},condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:17353,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:17351,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17348,src:"5939:1:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<",rightExpression:{argumentTypes:null,id:17352,name:"combinedTokenCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17322,src:"5943:18:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"5939:22:76",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:17380,initializationExpression:{assignments:[17348],declarations:[{constant:false,id:17348,name:"i",nodeType:"VariableDeclaration",scope:17380,src:"5924:9:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17347,name:"uint256",nodeType:"ElementaryTypeName",src:"5924:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:17350,initialValue:{argumentTypes:null,hexValue:"30",id:17349,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"5936:1:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},nodeType:"VariableDeclarationStatement",src:"5924:13:76"},loopExpression:{expression:{argumentTypes:null,id:17355,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"UnaryOperation",operator:"++",prefix:false,src:"5963:3:76",subExpression:{argumentTypes:null,id:17354,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17348,src:"5963:1:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17356,nodeType:"ExpressionStatement",src:"5963:3:76"},nodeType:"ForStatement",src:"5919:415:76"},{expression:{argumentTypes:null,components:[{argumentTypes:null,id:17381,name:"inflowUnitArray",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17330,src:"6352:15:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},{argumentTypes:null,id:17382,name:"outflowUnitArray",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17340,src:"6369:16:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}}],id:17383,isConstant:false,isInlineArray:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"TupleExpression",src:"6351:35:76",typeDescriptions:{typeIdentifier:"t_tuple$_t_array$_t_uint256_$dyn_memory_ptr_$_t_array$_t_uint256_$dyn_memory_ptr_$",typeString:"tuple(uint256[] memory,uint256[] memory)"}},functionReturnParameters:17320,id:17384,nodeType:"Return",src:"6344:42:76"}]},documentation:null,id:17386,implemented:true,kind:"function",modifiers:[],name:"createTokenFlowArrays",nodeType:"FunctionDefinition",parameters:{id:17313,nodeType:"ParameterList",parameters:[{constant:false,id:17306,name:"_unitsMultiplier",nodeType:"VariableDeclaration",scope:17386,src:"5254:24:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17305,name:"uint256",nodeType:"ElementaryTypeName",src:"5254:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17308,name:"_priceNumerator",nodeType:"VariableDeclaration",scope:17386,src:"5288:23:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17307,name:"uint256",nodeType:"ElementaryTypeName",src:"5288:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17310,name:"_priceDivisor",nodeType:"VariableDeclaration",scope:17386,src:"5321:21:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17309,name:"uint256",nodeType:"ElementaryTypeName",src:"5321:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"
}},value:null,visibility:"internal"},{constant:false,id:17312,name:"_biddingParameters",nodeType:"VariableDeclaration",scope:17386,src:"5352:62:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_memory_ptr",typeString:"struct RebalancingLibrary.BiddingParameters"},typeName:{contractScope:null,id:17311,name:"RebalancingLibrary.BiddingParameters",nodeType:"UserDefinedTypeName",referencedDeclaration:6656,src:"5352:36:76",typeDescriptions:{typeIdentifier:"t_struct$_BiddingParameters_$6656_storage_ptr",typeString:"struct RebalancingLibrary.BiddingParameters"}},value:null,visibility:"internal"}],src:"5244:176:76"},returnParameters:{id:17320,nodeType:"ParameterList",parameters:[{constant:false,id:17316,name:"",nodeType:"VariableDeclaration",scope:17386,src:"5466:16:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:17314,name:"uint256",nodeType:"ElementaryTypeName",src:"5466:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17315,length:null,nodeType:"ArrayTypeName",src:"5466:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"},{constant:false,id:17319,name:"",nodeType:"VariableDeclaration",scope:17386,src:"5484:16:76",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:17317,name:"uint256",nodeType:"ElementaryTypeName",src:"5484:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17318,length:null,nodeType:"ArrayTypeName",src:"5484:9:76",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],src:"5465:36:76"},scope:17473,src:"5214:1179:76",stateMutability:"pure",superFunction:null,visibility:"public"},{body:{id:17471,nodeType:"Block",src:"7335:2441:76",statements:[{assignments:[17404],declarations:[{constant:false,id:17404,name:"inflowUnit",nodeType:"VariableDeclaration",scope:17471,src:"8822:18:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17403,name:"uint256",nodeType:"ElementaryTypeName",src:"8822:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:17405,initialValue:null,nodeType:"VariableDeclarationStatement",src:"8822:18:76"},{assignments:[17407],declarations:[{constant:false,id:17407,name:"outflowUnit",nodeType:"VariableDeclaration",scope:17471,src:"8850:19:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17406,name:"uint256",nodeType:"ElementaryTypeName",src:"8850:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:17408,initialValue:null,nodeType:"VariableDeclarationStatement",src:"8850:19:76"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:17417,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,arguments:[{argumentTypes:null,id:17411,name:"_priceDivisor",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17396,src:"8965:13:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17409,name:"_nextSetUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17390,src:"8948:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17410,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"8948:16:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17412,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"8948:31:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:">",rightExpression:{argumentTypes:null,arguments:[{argumentTypes:null,id:17415,name:"_priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17394,src:"8999:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17413,name:"_currentUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17388,src:"8982:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17414,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"8982:16:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17416,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"8982:33:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"8948:67:76",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:{id:17465,nodeType:"Block",src:"9375:352:76",statements:[{expression:{argumentTypes:null,id:17459,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:17442,name:"outflowUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17407,src:"9429:11:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,id:17457,name:"_priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17394,src:"9570:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:17452,name:"_priceDivisor",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17396,src:"9536:13:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17450,name:"_nextSetUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17390,src:"9519:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17451,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"9519:16:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17453,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9519:31:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:17447,name:"_priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17394,src:"9498:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17445,name:"_currentUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17388,src:"9481:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17446,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"9481:16:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17448,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9481:33:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17449,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sub",nodeType:"MemberAccess",referencedDeclaration:29595,src:"9481:37:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17454,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9481:70:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17443,name:"_unitsMultiplier",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17392,src:"9443:16:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17444,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"9443:20:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17455,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9443:122:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17456,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"9443:126:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17458,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9443:143:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"9429:157:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17460,nodeType:"ExpressionStatement",src:"9429:157:76"},{expression:{argumentTypes:null,id:17463,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:17461,name:"inflowUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17404,src:"9702:10:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,hexValue:"30",id:17462,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"9715:1:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"9702:14:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17464,nodeType:"ExpressionStatement",src:"9702:14:76"}]},id:17466,nodeType:"IfStatement",src:"8944:783:76",trueBody:{id:17441,nodeType:"Block",src:"9017:352:76",statements:[{expression:{argumentTypes:null,id:17435,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:17418,name:"inflowUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17404,src:"9070:10:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,id:17433,name:"_priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17394,src:"9210:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:17428,name:"_priceNumerator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17394,src:"9174:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17426,name:"_currentUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17388,src:"9157:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17427,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"9157:16:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17429,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9157:33:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:17423,name:"_priceDivisor",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17396,src:"9138:13:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17421,name:"_nextSetUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17390,src:"9121:12:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17422,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"9121:16:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17424,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9121:31:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17425,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sub",nodeType:"MemberAccess",referencedDeclaration:29595,src:"9121:35:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17430,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9121:70:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:17419,name:"_unitsMultiplier",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17392,src:"9083:16:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17420,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"9083:20:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17431,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9083:122:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17432,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"9083:126:76",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:17434,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9083:143:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"9070:156:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17436,nodeType:"ExpressionStatement",src:"9070:156:76"},{expression:{argumentTypes:null,id:17439,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:17437,name:"outflowUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17407,src:"9343:11:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,hexValue:"30",id:17438,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"9357:1:76",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"9343:15:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:17440,nodeType:"ExpressionStatement",src:"9343:15:76"}]}},{expression:{argumentTypes:null,components:[{argumentTypes:null,id:17467,name:"inflowUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17404,src:"9745:10:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:17468,name:"outflowUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:17407,src:"9757:11:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],id:17469,isConstant:false,isInlineArray:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"TupleExpression",src:"9744:25:76",typeDescriptions:{typeIdentifier:"t_tuple$_t_uint256_$_t_uint256_$",typeString:"tuple(uint256,uint256)"}},functionReturnParameters:17402,id:17470,nodeType:"Return",src:"9737:32:76"}]},documentation:null,id:17472,implemented:true,kind:"function",modifiers:[],name:"calculateTokenFlows",nodeType:"FunctionDefinition",parameters:{id:17397,nodeType:"ParameterList",parameters:[{constant:false,id:17388,name:"_currentUnit",nodeType:"VariableDeclaration",scope:17472,src:"7113:20:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17387,name:"uint256",nodeType:"ElementaryTypeName",src:"7113:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17390,name:"_nextSetUnit",nodeType:"VariableDeclaration",scope:17472,src:"7143:20:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17389,name:"uint256",nodeType:"ElementaryTypeName",src:"7143:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17392,name:"_unitsMultiplier",nodeType:"VariableDeclaration",scope:17472,src:"7173:24:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17391,name:"uint256",nodeType:"ElementaryTypeName",src:"7173:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17394,name:"_priceNumerator",nodeType:"VariableDeclaration",scope:17472,src:"7207:23:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17393,name:"uint256",nodeType:"ElementaryTypeName",src:"7207:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17396,name:"_priceDivisor",nodeType:"VariableDeclaration",scope:17472,src:"7240:21:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17395,name:"uint256",nodeType:"ElementaryTypeName",src:"7240:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"7103:164:76"},returnParameters:{id:17402,nodeType:"ParameterList",parameters:[{constant:false,id:17399,name:"",nodeType:"VariableDeclaration",scope:17472,src:"7313:7:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17398,name:"uint256",nodeType:"ElementaryTypeName",src:"7313:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:17401,name:"",nodeType:"VariableDeclaration",scope:17472,src:"7322:7:76",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:17400,name:"uint256",nodeType:"ElementaryTypeName",src:"7322:7:76",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"7312:18:76"},scope:17473,src:"7075:2701:76",stateMutability:"pure",superFunction:null,visibility:"public"}],scope:17474,src:"1155:8623:76"}],src:"597:9182:76"},compiler:{name:"solc",version:"0.5.7+commit.6da8b019.Linux.g++"},networks:{},schemaVersion:"3.0.23",updatedAt:"2020-04-07T04:29:24.669Z",devdoc:{author:"Set Protocol * Default implementation of Rebalancing Set Token placeBid function",methods:{},title:"PlaceBidLibrary"},userdoc:{methods:{}}};