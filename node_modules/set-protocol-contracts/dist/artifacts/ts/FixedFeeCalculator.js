"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FixedFeeCalculator={contractName:"FixedFeeCalculator",abi:[{constant:true,inputs:[{name:"",type:"address"}],name:"isInitialized",outputs:[{name:"",type:"bool"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[{name:"",type:"address"}],name:"fees",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:false,inputs:[{name:"_feeCalculatorData",type:"bytes"}],name:"initialize",outputs:[],payable:false,stateMutability:"nonpayable",type:"function"},{constant:true,inputs:[],name:"getFee",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:false,inputs:[],name:"updateAndGetFee",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"nonpayable",type:"function"},{constant:false,inputs:[{name:"_newFeePercentage",type:"bytes"}],name:"adjustFee",outputs:[],payable:false,stateMutability:"nonpayable",type:"function"}],metadata:'{"compiler":{"version":"0.5.7+commit.6da8b019"},"language":"Solidity","output":{"abi":[{"constant":false,"inputs":[],"name":"updateAndGetFee","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_feeCalculatorData","type":"bytes"}],"name":"initialize","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_newFeePercentage","type":"bytes"}],"name":"adjustFee","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getFee","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"isInitialized","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"fees","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}],"devdoc":{"author":"Set Protocol * Smart contract that stores and returns fees (represented as scaled decimal values). Meant to be used with a RebalancingSetTokenV2","methods":{"initialize(bytes)":{"params":{"_feeCalculatorData":"Bytes encoded data about the fee for the sender"}}},"title":"FixedFeeCalculator"},"userdoc":{"methods":{"getFee()":{"notice":"Returns the fee initialized by the sender. Implicitly returns 0 if the fee has not bee initialized."},"initialize(bytes)":{"notice":"Initializes the rebalance fee for the caller. Fee is represented as a scaled decimal value. (e.g. 1% = 10 ** 18, 0.1% = 10 ** 17) Intended to be called by a RebalancingSetTokenV2 during initialization."},"updateAndGetFee()":{"notice":"Same as getFee, but a non-view function."}}}},"settings":{"compilationTarget":{"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/fee-calculators/FixedFeeCalculator.sol":"FixedFeeCalculator"},"evmVersion":"byzantium","libraries":{},"optimizer":{"enabled":true,"runs":200},"remappings":[]},"sources":{"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/fee-calculators/FixedFeeCalculator.sol":{"keccak256":"0x286387fa7f743e857d0163b0d5e2e84dd5e30cf2a5ab8d42ca86e1f161f28256","urls":["bzzr://65cb68831eea70282b6cdf7f7a86b32f0db075d52cc5222c61e7041c7b1adf06"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ICore.sol":{"keccak256":"0x5dc3db4398630ea52d2a40c9ddfa89d94e65c2770a12bab4d2a5c8eb573fb0a0","urls":["bzzr://25e90b53f61b388e0950b808e2296f82d427b66cfd6021212713436b2a592e31"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IFeeCalculator.sol":{"keccak256":"0xfdce9b333367bfed8f379738b0eabfe4be0045db735e9f24493de09729593d4d","urls":["bzzr://d2fa7438b492f4f08009810e3e9a2e2c22a429c307562e3f5274d4bfe2d21734"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ISetToken.sol":{"keccak256":"0xfa6c0c07f8394d89b6b8f72e15778f8452a9341acb20cebb8421f3522aaca1bd","urls":["bzzr://ccf23bb78fd507bf8cbf5cf7ac2a660a1463b87a3689196e42b8f6862d1a6b11"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/SetTokenLibrary.sol":{"keccak256":"0x0c0952057a64c3af0ace01db29258145deff7d935bdc53d1bbab6fff87b3b146","urls":["bzzr://ad1944f45fade934870661a4e91c260625755760ff0ef047677547fbdc6a16bf"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/CommonMath.sol":{"keccak256":"0x3d1d08c6efc2a973fe2c02ddcb02fd99a8c8eb75f74dcbd93e8e15864eee2b6b","urls":["bzzr://580815dd1cf648a4521d923e59087de21143d9c48115ab71579a1f5a8f3d36af"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/ScaleValidations.sol":{"keccak256":"0xba602c9dda228b4552744ef0ba26329a3ada2610c42cb085a373d873d58d1391","urls":["bzzr://78110cdd43a9f5b4092cb51867e79da62e6d8b324ffb24d0dd448ad3e27048ee"]},"openzeppelin-solidity/contracts/math/SafeMath.sol":{"keccak256":"0xc2a200a877c4a9b2475c246c54ffecc69ffde3e11af83319c63c2dc5458bac80","urls":["bzzr://c8876e2c39b60f155d748d71d715c8f3903fae5a405ac599adcb6ad2f9a583f9"]}},"version":1}',bytecode:"0x608060405234801561001057600080fd5b506104da806100206000396000f3fe608060405234801561001057600080fd5b506004361061007e577c0100000000000000000000000000000000000000000000000000000000600035046320f554048114610083578063439fab911461009d578063cbf1c3541461010f578063ced72f8714610083578063d60b347f1461017f578063faaebd21146101c6575b600080fd5b61008b6101f9565b60408051918252519081900360200190f35b61010d600480360360208110156100b357600080fd5b8101906020810181356401000000008111156100ce57600080fd5b8201836020820111156100e057600080fd5b8035906020019184600183028401116401000000008311171561010257600080fd5b50909250905061020c565b005b61010d6004803603602081101561012557600080fd5b81019060208101813564010000000081111561014057600080fd5b82018360208201111561015257600080fd5b8035906020019184600183028401116401000000008311171561017457600080fd5b509092509050610302565b6101b26004803603602081101561019557600080fd5b503573ffffffffffffffffffffffffffffffffffffffff16610355565b604080519115158252519081900360200190f35b61008b600480360360208110156101dc57600080fd5b503573ffffffffffffffffffffffffffffffffffffffff1661036a565b3360009081526001602052604090205490565b3360009081526020819052604090205460ff161561028b57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601760248201527f4d757374206e6f7420626520696e697469616c697a6564000000000000000000604482015290519081900360640190fd5b60006102cc83838080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525061037c92505050565b90506102d781610383565b33600090815260016020818152604080842094909455829052919020805460ff191690911790555050565b61034182828080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525061037c92505050565b336000908152600160205260409020555050565b60006020819052908152604090205460ff1681565b60016020526000908152604090205481565b6020015190565b61038c81610398565b6103958161040f565b50565b670de0b6b3a764000081111561039557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600f60248201527f4d757374206265203c3d20313030250000000000000000000000000000000000604482015290519081900360640190fd5b61042581655af3107a400063ffffffff61049116565b1561039557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601960248201527f4d757374206265206d756c7469706c65206f6620302e30312500000000000000604482015290519081900360640190fd5b60008161049d57600080fd5b8183816104a657fe5b06939250505056fea165627a7a72305820cd27d5163158d1a86d5e61c829fbe5fc27317cd0ab4e514805c9558fa697e7c00029",deployedBytecode:"0x608060405234801561001057600080fd5b506004361061007e577c0100000000000000000000000000000000000000000000000000000000600035046320f554048114610083578063439fab911461009d578063cbf1c3541461010f578063ced72f8714610083578063d60b347f1461017f578063faaebd21146101c6575b600080fd5b61008b6101f9565b60408051918252519081900360200190f35b61010d600480360360208110156100b357600080fd5b8101906020810181356401000000008111156100ce57600080fd5b8201836020820111156100e057600080fd5b8035906020019184600183028401116401000000008311171561010257600080fd5b50909250905061020c565b005b61010d6004803603602081101561012557600080fd5b81019060208101813564010000000081111561014057600080fd5b82018360208201111561015257600080fd5b8035906020019184600183028401116401000000008311171561017457600080fd5b509092509050610302565b6101b26004803603602081101561019557600080fd5b503573ffffffffffffffffffffffffffffffffffffffff16610355565b604080519115158252519081900360200190f35b61008b600480360360208110156101dc57600080fd5b503573ffffffffffffffffffffffffffffffffffffffff1661036a565b3360009081526001602052604090205490565b3360009081526020819052604090205460ff161561028b57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601760248201527f4d757374206e6f7420626520696e697469616c697a6564000000000000000000604482015290519081900360640190fd5b60006102cc83838080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525061037c92505050565b90506102d781610383565b33600090815260016020818152604080842094909455829052919020805460ff191690911790555050565b61034182828080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525061037c92505050565b336000908152600160205260409020555050565b60006020819052908152604090205460ff1681565b60016020526000908152604090205481565b6020015190565b61038c81610398565b6103958161040f565b50565b670de0b6b3a764000081111561039557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600f60248201527f4d757374206265203c3d20313030250000000000000000000000000000000000604482015290519081900360640190fd5b61042581655af3107a400063ffffffff61049116565b1561039557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601960248201527f4d757374206265206d756c7469706c65206f6620302e30312500000000000000604482015290519081900360640190fd5b60008161049d57600080fd5b8183816104a657fe5b06939250505056fea165627a7a72305820cd27d5163158d1a86d5e61c829fbe5fc27317cd0ab4e514805c9558fa697e7c00029",sourceMap:"1202:2889:13:-;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1202:2889:13;;;;;;;",deployedSourceMap:"1202:2889:13:-;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1202:2889:13;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2660:113;;;:::i;:::-;;;;;;;;;;;;;;;;1944:400;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;1944:400:13;;;;;;;;21:11:-1;5:28;;2:2;;;46:1;43;36:12;2:2;1944:400:13;;35:9:-1;28:4;12:14;8:25;5:40;2:2;;;58:1;55;48:12;2:2;1944:400:13;;;;;;100:9:-1;95:1;81:12;77:20;67:8;63:35;60:50;39:11;25:12;22:29;11:107;8:2;;;131:1;128;121:12;8:2;-1:-1;1944:400:13;;-1:-1:-1;1944:400:13;-1:-1:-1;1944:400:13;:::i;:::-;;2932:165;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;2932:165:13;;;;;;;;21:11:-1;5:28;;2:2;;;46:1;43;36:12;2:2;2932:165:13;;35:9:-1;28:4;12:14;8:25;5:40;2:2;;;58:1;55;48:12;2:2;2932:165:13;;;;;;100:9:-1;95:1;81:12;77:20;67:8;63:35;60:50;39:11;25:12;22:29;11:107;8:2;;;131:1;128;121:12;8:2;-1:-1;2932:165:13;;-1:-1:-1;2932:165:13;-1:-1:-1;2932:165:13;:::i;1403:45::-;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;1403:45:13;;;;:::i;:::-;;;;;;;;;;;;;;;;;;1509:39;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;1509:39:13;;;;:::i;2660:113::-;2755:10;2720:7;2750:16;;;:4;:16;;;;;;2660:113;:::o;1944:400::-;2121:10;2107:13;:25;;;;;;;;;;;;;2106:26;2098:62;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2171:11;2185:42;2208:18;;2185:42;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;30:3:-1;22:6;14;1:33;99:1;81:16;;74:27;;;;-1:-1;2185:22:13;;-1:-1:-1;;;2185:42:13:i;:::-;2171:56;;2238:16;2250:3;2238:11;:16::i;:::-;2278:10;2273:16;;;;:4;:16;;;;;;;;:22;;;;2305:25;;;;;;:32;;-1:-1:-1;;2305:32:13;;;;;;-1:-1:-1;;1944:400:13:o;2932:165::-;3049:41;3072:17;;3049:41;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;30:3:-1;22:6;14;1:33;99:1;81:16;;74:27;;;;-1:-1;3049:22:13;;-1:-1:-1;;;3049:41:13:i;:::-;3035:10;3030:16;;;;:4;:16;;;;;:60;-1:-1:-1;;2932:165:13:o;1403:45::-;;;;;;;;;;;;;;;;:::o;1509:39::-;;;;;;;;;;;;;:::o;3818:271::-;4048:2;4024:27;4018:34;;3818:271::o;3321:230::-;3413:61;3469:4;3413:55;:61::i;:::-;3493:51;3539:4;3493:45;:51::i;:::-;3321:230;:::o;876:152:123:-;812:4;972:6;:29;;964:57;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1034:189;1133:27;:6;865:4;1133:27;:10;:27;:::i;:::-;:32;1112:104;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1739:121:174;1797:7;1824:6;1816:15;;;;;;1852:1;1848;:5;;;;;;;1739:121;-1:-1:-1;;;1739:121:174:o",source:'/*\n    Copyright 2019 Set Labs Inc.\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\npragma solidity 0.5.7;\n\nimport { SafeMath } from "openzeppelin-solidity/contracts/math/SafeMath.sol";\n\nimport { CommonMath } from "../../lib/CommonMath.sol";\nimport { ICore } from "../interfaces/ICore.sol";\nimport { IFeeCalculator } from "../interfaces/IFeeCalculator.sol";\nimport { SetTokenLibrary } from "../lib/SetTokenLibrary.sol";\nimport { ScaleValidations } from "../../lib/ScaleValidations.sol";\n\n\n/**\n * @title FixedFeeCalculator\n * @author Set Protocol\n *\n * Smart contract that stores and returns fees (represented as scaled decimal values).\n * Meant to be used with a RebalancingSetTokenV2\n */\ncontract FixedFeeCalculator is IFeeCalculator {\n    using SafeMath for uint256;\n\n    /* ============ State Variables ============ */\n\n    // Mapping between an address and its initialization state\n    mapping(address => bool) public isInitialized;\n\n    // Mapping between an address and its current fee\n    mapping(address => uint256) public fees;\n\n    /* ============ External Functions ============ */\n\n    /**\n     * Initializes the rebalance fee for the caller. Fee is represented as a scaled decimal value.\n     * (e.g. 1% = 10 ** 18, 0.1% = 10 ** 17)\n     * Intended to be called by a RebalancingSetTokenV2 during initialization.\n     *\n     * @param _feeCalculatorData       Bytes encoded data about the fee for the sender\n     */\n    function initialize(\n        bytes calldata _feeCalculatorData\n    )\n        external\n    {\n        // Sender fee must not already be initialized\n        require(!isInitialized[msg.sender], "Must not be initialized");\n\n        uint256 fee = parseFeeCalculatorData(_feeCalculatorData);\n\n        validateFee(fee);\n        \n        fees[msg.sender] = fee;\n        isInitialized[msg.sender] = true;\n    }\n\n    /**\n     * Returns the fee initialized by the sender. Implicitly returns 0 if the fee has not bee initialized.\n     */\n    function getFee()\n        external\n        view\n        returns(uint256)\n    {\n        return fees[msg.sender];\n    }\n\n    /**\n     * Same as getFee, but a non-view function.\n     */\n    function updateAndGetFee()\n        external\n        returns(uint256)\n    {\n        return fees[msg.sender];\n    }\n\n    /*\n     * Validate then set new streaming fee.\n     *\n     * @param  _newFeePercentage       Fee type and new streaming fee encoded in bytes\n     */\n    function adjustFee(\n        bytes calldata _newFeePercentage\n    )\n        external\n    {\n        fees[msg.sender] = parseFeeCalculatorData(_newFeePercentage);\n    }\n\n    /* ============ Private Functions ============ */\n\n    /**\n     * Fee should not exceed 100% and should be a multiple of a basis point.\n     *\n     * @param _fee       Fee value represented as scaled value\n     */\n    function validateFee(\n        uint256 _fee\n    )\n        private\n        view\n    {\n        ScaleValidations.validateLessThanEqualOneHundredPercent(_fee);\n        \n        ScaleValidations.validateMultipleOfBasisPoint(_fee);\n    }\n\n    /**\n     * Function to convert the feeCalculator bytes data to the fee\n     *\n     * @param _feeCalculatorData       Bytes encoded data about the fee for the sender\n     * @return _fee                    Parsed fee value represented as scaled value\n     */\n    function parseFeeCalculatorData(\n        bytes memory _feeCalculatorData\n    )\n        private\n        pure\n        returns (uint256)\n    {\n        uint256 fee;\n\n        assembly {\n            fee := mload(add(_feeCalculatorData, 32))\n        }\n\n        return fee;\n    }\n}\n',sourcePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/fee-calculators/FixedFeeCalculator.sol",ast:{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/fee-calculators/FixedFeeCalculator.sol",exportedSymbols:{FixedFeeCalculator:[3549]},id:3550,nodeType:"SourceUnit",nodes:[{id:3415,literals:["solidity","0.5",".7"],nodeType:"PragmaDirective",src:"597:22:13"},{absolutePath:"openzeppelin-solidity/contracts/math/SafeMath.sol",file:"openzeppelin-solidity/contracts/math/SafeMath.sol",id:3417,nodeType:"ImportDirective",scope:3550,sourceUnit:29641,src:"621:77:13",symbolAliases:[{foreign:3416,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/CommonMath.sol",file:"../../lib/CommonMath.sol",id:3419,nodeType:"ImportDirective",scope:3550,sourceUnit:23437,src:"700:54:13",symbolAliases:[{foreign:3418,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ICore.sol",file:"../interfaces/ICore.sol",id:3421,nodeType:"ImportDirective",scope:3550,sourceUnit:4747,src:"755:48:13",symbolAliases:[{foreign:3420,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IFeeCalculator.sol",file:"../interfaces/IFeeCalculator.sol",id:3423,nodeType:"ImportDirective",scope:3550,sourceUnit:4868,src:"804:66:13",symbolAliases:[{foreign:3422,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/SetTokenLibrary.sol",file:"../lib/SetTokenLibrary.sol",id:3425,nodeType:"ImportDirective",scope:3550,sourceUnit:6842,src:"871:61:13",symbolAliases:[{foreign:3424,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/ScaleValidations.sol",file:"../../lib/ScaleValidations.sol",id:3427,nodeType:"ImportDirective",scope:3550,sourceUnit:24211,src:"933:66:13",symbolAliases:[{foreign:3426,local:null}],unitAlias:""},{baseContracts:[{arguments:null,baseName:{contractScope:null,id:3428,name:"IFeeCalculator",nodeType:"UserDefinedTypeName",referencedDeclaration:4867,src:"1233:14:13",typeDescriptions:{typeIdentifier:"t_contract$_IFeeCalculator_$4867",typeString:"contract IFeeCalculator"}},id:3429,nodeType:"InheritanceSpecifier",src:"1233:14:13"}],contractDependencies:[4867],contractKind:"contract",documentation:"@title FixedFeeCalculator\n@author Set Protocol\n * Smart contract that stores and returns fees (represented as scaled decimal values).\nMeant to be used with a RebalancingSetTokenV2",fullyImplemented:true,id:3549,linearizedBaseContracts:[3549,4867],name:"FixedFeeCalculator",nodeType:"ContractDefinition",nodes:[{id:3432,libraryName:{contractScope:null,id:3430,name:"SafeMath",nodeType:"UserDefinedTypeName",referencedDeclaration:29640,src:"1260:8:13",typeDescriptions:{typeIdentifier:"t_contract$_SafeMath_$29640",typeString:"library SafeMath"}},nodeType:"UsingForDirective",src:"1254:27:13",typeName:{id:3431,name:"uint256",nodeType:"ElementaryTypeName",src:"1273:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}},{constant:false,id:3436,name:"isInitialized",nodeType:"VariableDeclaration",scope:3549,src:"1403:45:13",stateVariable:true,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_bool_$",typeString:"mapping(address => bool)"},typeName:{id:3435,keyType:{id:3433,name:"address",nodeType:"ElementaryTypeName",src:"1411:7:13",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},nodeType:"Mapping",src:"1403:24:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_bool_$",typeString:"mapping(address => bool)"},valueType:{id:3434,name:"bool",nodeType:"ElementaryTypeName",src:"1422:4:13",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}}},value:null,visibility:"public"},{constant:false,id:3440,name:"fees",nodeType:"VariableDeclaration",scope:3549,src:"1509:39:13",stateVariable:true,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_uint256_$",typeString:"mapping(address => uint256)"},typeName:{id:3439,keyType:{id:3437,name:"address",nodeType:"ElementaryTypeName",src:"1517:7:13",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},nodeType:"Mapping",src:"1509:27:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_uint256_$",typeString:"mapping(address => uint256)"},valueType:{id:3438,name:"uint256",nodeType:"ElementaryTypeName",src:"1528:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}},value:null,visibility:"public"},{body:{id:3478,nodeType:"Block",src:"2034:310:13",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:3450,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"UnaryOperation",operator:"!",prefix:true,src:"2106:26:13",subExpression:{argumentTypes:null,baseExpression:{argumentTypes:null,id:3446,name:"isInitialized",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3436,src:"2107:13:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_bool_$",typeString:"mapping(address => bool)"}},id:3449,indexExpression:{argumentTypes:null,expression:{argumentTypes:null,id:3447,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"2121:3:13",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:3448,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"2121:10:13",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"2107:25:13",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"4d757374206e6f7420626520696e697469616c697a6564",id:3451,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"2134:25:13",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_ccad13a035d69be5b330b79703f32c06568050b8f19d9ea103ac977f7c468e03",typeString:'literal_string "Must not be initialized"'},value:"Must not be initialized"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_ccad13a035d69be5b330b79703f32c06568050b8f19d9ea103ac977f7c468e03",typeString:'literal_string "Must not be initialized"'}],id:3445,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"2098:7:13",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:3452,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2098:62:13",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:3453,nodeType:"ExpressionStatement",src:"2098:62:13"},{assignments:[3455],declarations:[{constant:false,id:3455,name:"fee",nodeType:"VariableDeclaration",scope:3478,src:"2171:11:13",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:3454,name:"uint256",nodeType:"ElementaryTypeName",src:"2171:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:3459,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:3457,name:"_feeCalculatorData",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3442,src:"2208:18:13",typeDescriptions:{typeIdentifier:"t_bytes_calldata_ptr",typeString:"bytes calldata"}}],expression:{argumentTypes:[{typeIdentifier:"t_bytes_calldata_ptr",typeString:"bytes calldata"}],id:3456,name:"parseFeeCalculatorData",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3548,src:"2185:22:13",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_bytes_memory_ptr_$returns$_t_uint256_$",typeString:"function (bytes memory) pure returns (uint256)"}},id:3458,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2185:42:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"2171:56:13"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:3461,name:"fee",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3455,src:"2250:3:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:3460,name:"validateFee",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3534,src:"2238:11:13",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_uint256_$returns$__$",typeString:"function (uint256) view"}},id:3462,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2238:16:13",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:3463,nodeType:"ExpressionStatement",src:"2238:16:13"},{expression:{argumentTypes:null,id:3469,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:3464,name:"fees",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3440,src:"2273:4:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_uint256_$",typeString:"mapping(address => uint256)"}},id:3467,indexExpression:{argumentTypes:null,expression:{argumentTypes:null,id:3465,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"2278:3:13",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:3466,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"2278:10:13",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"2273:16:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,id:3468,name:"fee",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3455,src:"2292:3:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2273:22:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:3470,nodeType:"ExpressionStatement",src:"2273:22:13"},{expression:{argumentTypes:null,id:3476,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:3471,name:"isInitialized",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3436,src:"2305:13:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_bool_$",typeString:"mapping(address => bool)"}},id:3474,indexExpression:{argumentTypes:null,expression:{argumentTypes:null,id:3472,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"2319:3:13",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:3473,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"2319:10:13",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"2305:25:13",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,hexValue:"74727565",id:3475,isConstant:false,isLValue:false,isPure:true,kind:"bool",lValueRequested:false,nodeType:"Literal",src:"2333:4:13",subdenomination:null,typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"},value:"true"},src:"2305:32:13",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:3477,nodeType:"ExpressionStatement",src:"2305:32:13"}]},documentation:"Initializes the rebalance fee for the caller. Fee is represented as a scaled decimal value.\n(e.g. 1% = 10 ** 18, 0.1% = 10 ** 17)\nIntended to be called by a RebalancingSetTokenV2 during initialization.\n     * @param _feeCalculatorData       Bytes encoded data about the fee for the sender",id:3479,implemented:true,kind:"function",modifiers:[],name:"initialize",nodeType:"FunctionDefinition",parameters:{id:3443,nodeType:"ParameterList",parameters:[{constant:false,id:3442,name:"_feeCalculatorData",nodeType:"VariableDeclaration",scope:3479,src:"1973:33:13",stateVariable:false,storageLocation:"calldata",typeDescriptions:{typeIdentifier:"t_bytes_calldata_ptr",typeString:"bytes"},typeName:{id:3441,name:"bytes",nodeType:"ElementaryTypeName",src:"1973:5:13",typeDescriptions:{typeIdentifier:"t_bytes_storage_ptr",typeString:"bytes"}},value:null,visibility:"internal"}],src:"1963:49:13"},returnParameters:{id:3444,nodeType:"ParameterList",parameters:[],src:"2034:0:13"},scope:3549,src:"1944:400:13",stateMutability:"nonpayable",superFunction:4851,visibility:"external"},{body:{id:3489,nodeType:"Block",src:"2550:40:13",statements:[{expression:{argumentTypes:null,baseExpression:{argumentTypes:null,id:3484,name:"fees",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3440,src:"2567:4:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_uint256_$",typeString:"mapping(address => uint256)"}},id:3487,indexExpression:{argumentTypes:null,expression:{argumentTypes:null,id:3485,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"2572:3:13",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:3486,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"2572:10:13",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"2567:16:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:3483,id:3488,nodeType:"Return",src:"2560:23:13"}]},documentation:"Returns the fee initialized by the sender. Implicitly returns 0 if the fee has not bee initialized.",id:3490,implemented:true,kind:"function",modifiers:[],name:"getFee",nodeType:"FunctionDefinition",parameters:{id:3480,nodeType:"ParameterList",parameters:[],src:"2488:2:13"},returnParameters:{id:3483,nodeType:"ParameterList",parameters:[{constant:false,id:3482,name:"",nodeType:"VariableDeclaration",scope:3490,src:"2537:7:13",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",
typeString:"uint256"},typeName:{id:3481,name:"uint256",nodeType:"ElementaryTypeName",src:"2537:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"2536:9:13"},scope:3549,src:"2473:117:13",stateMutability:"view",superFunction:4856,visibility:"external"},{body:{id:3500,nodeType:"Block",src:"2733:40:13",statements:[{expression:{argumentTypes:null,baseExpression:{argumentTypes:null,id:3495,name:"fees",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3440,src:"2750:4:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_uint256_$",typeString:"mapping(address => uint256)"}},id:3498,indexExpression:{argumentTypes:null,expression:{argumentTypes:null,id:3496,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"2755:3:13",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:3497,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"2755:10:13",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"2750:16:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:3494,id:3499,nodeType:"Return",src:"2743:23:13"}]},documentation:"Same as getFee, but a non-view function.",id:3501,implemented:true,kind:"function",modifiers:[],name:"updateAndGetFee",nodeType:"FunctionDefinition",parameters:{id:3491,nodeType:"ParameterList",parameters:[],src:"2684:2:13"},returnParameters:{id:3494,nodeType:"ParameterList",parameters:[{constant:false,id:3493,name:"",nodeType:"VariableDeclaration",scope:3501,src:"2720:7:13",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:3492,name:"uint256",nodeType:"ElementaryTypeName",src:"2720:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"2719:9:13"},scope:3549,src:"2660:113:13",stateMutability:"nonpayable",superFunction:4861,visibility:"external"},{body:{id:3515,nodeType:"Block",src:"3020:77:13",statements:[{expression:{argumentTypes:null,id:3513,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:3506,name:"fees",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3440,src:"3030:4:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_uint256_$",typeString:"mapping(address => uint256)"}},id:3509,indexExpression:{argumentTypes:null,expression:{argumentTypes:null,id:3507,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"3035:3:13",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:3508,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"3035:10:13",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"3030:16:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,id:3511,name:"_newFeePercentage",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3503,src:"3072:17:13",typeDescriptions:{typeIdentifier:"t_bytes_calldata_ptr",typeString:"bytes calldata"}}],expression:{argumentTypes:[{typeIdentifier:"t_bytes_calldata_ptr",typeString:"bytes calldata"}],id:3510,name:"parseFeeCalculatorData",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3548,src:"3049:22:13",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_bytes_memory_ptr_$returns$_t_uint256_$",typeString:"function (bytes memory) pure returns (uint256)"}},id:3512,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3049:41:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"3030:60:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:3514,nodeType:"ExpressionStatement",src:"3030:60:13"}]},documentation:null,id:3516,implemented:true,kind:"function",modifiers:[],name:"adjustFee",nodeType:"FunctionDefinition",parameters:{id:3504,nodeType:"ParameterList",parameters:[{constant:false,id:3503,name:"_newFeePercentage",nodeType:"VariableDeclaration",scope:3516,src:"2960:32:13",stateVariable:false,storageLocation:"calldata",typeDescriptions:{typeIdentifier:"t_bytes_calldata_ptr",typeString:"bytes"},typeName:{id:3502,name:"bytes",nodeType:"ElementaryTypeName",src:"2960:5:13",typeDescriptions:{typeIdentifier:"t_bytes_storage_ptr",typeString:"bytes"}},value:null,visibility:"internal"}],src:"2950:48:13"},returnParameters:{id:3505,nodeType:"ParameterList",parameters:[],src:"3020:0:13"},scope:3549,src:"2932:165:13",stateMutability:"nonpayable",superFunction:4866,visibility:"external"},{body:{id:3533,nodeType:"Block",src:"3403:148:13",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:3524,name:"_fee",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3518,src:"3469:4:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:3521,name:"ScaleValidations",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:24210,src:"3413:16:13",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ScaleValidations_$24210_$",typeString:"type(library ScaleValidations)"}},id:3523,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"validateLessThanEqualOneHundredPercent",nodeType:"MemberAccess",referencedDeclaration:24193,src:"3413:55:13",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_uint256_$returns$__$",typeString:"function (uint256) view"}},id:3525,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3413:61:13",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:3526,nodeType:"ExpressionStatement",src:"3413:61:13"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:3530,name:"_fee",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3518,src:"3539:4:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:3527,name:"ScaleValidations",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:24210,src:"3493:16:13",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ScaleValidations_$24210_$",typeString:"type(library ScaleValidations)"}},id:3529,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"validateMultipleOfBasisPoint",nodeType:"MemberAccess",referencedDeclaration:24209,src:"3493:45:13",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_uint256_$returns$__$",typeString:"function (uint256) view"}},id:3531,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3493:51:13",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:3532,nodeType:"ExpressionStatement",src:"3493:51:13"}]},documentation:"Fee should not exceed 100% and should be a multiple of a basis point.\n     * @param _fee       Fee value represented as scaled value",id:3534,implemented:true,kind:"function",modifiers:[],name:"validateFee",nodeType:"FunctionDefinition",parameters:{id:3519,nodeType:"ParameterList",parameters:[{constant:false,id:3518,name:"_fee",nodeType:"VariableDeclaration",scope:3534,src:"3351:12:13",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:3517,name:"uint256",nodeType:"ElementaryTypeName",src:"3351:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"3341:28:13"},returnParameters:{id:3520,nodeType:"ParameterList",parameters:[],src:"3403:0:13"},scope:3549,src:"3321:230:13",stateMutability:"view",superFunction:null,visibility:"private"},{body:{id:3547,nodeType:"Block",src:"3956:133:13",statements:[{assignments:[3542],declarations:[{constant:false,id:3542,name:"fee",nodeType:"VariableDeclaration",scope:3547,src:"3966:11:13",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:3541,name:"uint256",nodeType:"ElementaryTypeName",src:"3966:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:3543,initialValue:null,nodeType:"VariableDeclarationStatement",src:"3966:11:13"},{externalReferences:[{fee:{declaration:3542,isOffset:false,isSlot:false,src:"4011:3:13",valueSize:1}},{_feeCalculatorData:{declaration:3536,isOffset:false,isSlot:false,src:"4028:18:13",valueSize:1}}],id:3544,nodeType:"InlineAssembly",operations:"{\n    fee := mload(add(_feeCalculatorData, 32))\n}",src:"3988:90:13"},{expression:{argumentTypes:null,id:3545,name:"fee",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3542,src:"4079:3:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:3540,id:3546,nodeType:"Return",src:"4072:10:13"}]},documentation:"Function to convert the feeCalculator bytes data to the fee\n     * @param _feeCalculatorData       Bytes encoded data about the fee for the sender\n@return _fee                    Parsed fee value represented as scaled value",id:3548,implemented:true,kind:"function",modifiers:[],name:"parseFeeCalculatorData",nodeType:"FunctionDefinition",parameters:{id:3537,nodeType:"ParameterList",parameters:[{constant:false,id:3536,name:"_feeCalculatorData",nodeType:"VariableDeclaration",scope:3548,src:"3859:31:13",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_bytes_memory_ptr",typeString:"bytes"},typeName:{id:3535,name:"bytes",nodeType:"ElementaryTypeName",src:"3859:5:13",typeDescriptions:{typeIdentifier:"t_bytes_storage_ptr",typeString:"bytes"}},value:null,visibility:"internal"}],src:"3849:47:13"},returnParameters:{id:3540,nodeType:"ParameterList",parameters:[{constant:false,id:3539,name:"",nodeType:"VariableDeclaration",scope:3548,src:"3943:7:13",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:3538,name:"uint256",nodeType:"ElementaryTypeName",src:"3943:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"3942:9:13"},scope:3549,src:"3818:271:13",stateMutability:"pure",superFunction:null,visibility:"private"}],scope:3550,src:"1202:2889:13"}],src:"597:3495:13"},legacyAST:{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/fee-calculators/FixedFeeCalculator.sol",exportedSymbols:{FixedFeeCalculator:[3549]},id:3550,nodeType:"SourceUnit",nodes:[{id:3415,literals:["solidity","0.5",".7"],nodeType:"PragmaDirective",src:"597:22:13"},{absolutePath:"openzeppelin-solidity/contracts/math/SafeMath.sol",file:"openzeppelin-solidity/contracts/math/SafeMath.sol",id:3417,nodeType:"ImportDirective",scope:3550,sourceUnit:29641,src:"621:77:13",symbolAliases:[{foreign:3416,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/CommonMath.sol",file:"../../lib/CommonMath.sol",id:3419,nodeType:"ImportDirective",scope:3550,sourceUnit:23437,src:"700:54:13",symbolAliases:[{foreign:3418,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ICore.sol",file:"../interfaces/ICore.sol",id:3421,nodeType:"ImportDirective",scope:3550,sourceUnit:4747,src:"755:48:13",symbolAliases:[{foreign:3420,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IFeeCalculator.sol",file:"../interfaces/IFeeCalculator.sol",id:3423,nodeType:"ImportDirective",scope:3550,sourceUnit:4868,src:"804:66:13",symbolAliases:[{foreign:3422,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/SetTokenLibrary.sol",file:"../lib/SetTokenLibrary.sol",id:3425,nodeType:"ImportDirective",scope:3550,sourceUnit:6842,src:"871:61:13",symbolAliases:[{foreign:3424,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/ScaleValidations.sol",file:"../../lib/ScaleValidations.sol",id:3427,nodeType:"ImportDirective",scope:3550,sourceUnit:24211,src:"933:66:13",symbolAliases:[{foreign:3426,local:null}],unitAlias:""},{baseContracts:[{arguments:null,baseName:{contractScope:null,id:3428,name:"IFeeCalculator",nodeType:"UserDefinedTypeName",referencedDeclaration:4867,src:"1233:14:13",typeDescriptions:{typeIdentifier:"t_contract$_IFeeCalculator_$4867",typeString:"contract IFeeCalculator"}},id:3429,nodeType:"InheritanceSpecifier",src:"1233:14:13"}],contractDependencies:[4867],contractKind:"contract",documentation:"@title FixedFeeCalculator\n@author Set Protocol\n * Smart contract that stores and returns fees (represented as scaled decimal values).\nMeant to be used with a RebalancingSetTokenV2",fullyImplemented:true,id:3549,linearizedBaseContracts:[3549,4867],name:"FixedFeeCalculator",nodeType:"ContractDefinition",nodes:[{id:3432,libraryName:{contractScope:null,id:3430,name:"SafeMath",nodeType:"UserDefinedTypeName",referencedDeclaration:29640,src:"1260:8:13",typeDescriptions:{typeIdentifier:"t_contract$_SafeMath_$29640",typeString:"library SafeMath"}},nodeType:"UsingForDirective",src:"1254:27:13",typeName:{id:3431,name:"uint256",nodeType:"ElementaryTypeName",src:"1273:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}},{constant:false,id:3436,name:"isInitialized",nodeType:"VariableDeclaration",scope:3549,src:"1403:45:13",stateVariable:true,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_bool_$",typeString:"mapping(address => bool)"},typeName:{id:3435,keyType:{id:3433,name:"address",nodeType:"ElementaryTypeName",src:"1411:7:13",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},nodeType:"Mapping",src:"1403:24:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_bool_$",typeString:"mapping(address => bool)"},valueType:{id:3434,name:"bool",nodeType:"ElementaryTypeName",src:"1422:4:13",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}}},value:null,visibility:"public"},{constant:false,id:3440,name:"fees",nodeType:"VariableDeclaration",scope:3549,src:"1509:39:13",stateVariable:true,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_uint256_$",typeString:"mapping(address => uint256)"},typeName:{id:3439,keyType:{id:3437,name:"address",nodeType:"ElementaryTypeName",src:"1517:7:13",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},nodeType:"Mapping",src:"1509:27:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_uint256_$",typeString:"mapping(address => uint256)"},valueType:{id:3438,name:"uint256",nodeType:"ElementaryTypeName",src:"1528:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}},value:null,visibility:"public"},{body:{id:3478,nodeType:"Block",src:"2034:310:13",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:3450,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"UnaryOperation",operator:"!",prefix:true,src:"2106:26:13",subExpression:{argumentTypes:null,baseExpression:{argumentTypes:null,id:3446,name:"isInitialized",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3436,src:"2107:13:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_bool_$",typeString:"mapping(address => bool)"}},id:3449,indexExpression:{argumentTypes:null,expression:{argumentTypes:null,id:3447,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"2121:3:13",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:3448,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"2121:10:13",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"2107:25:13",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"4d757374206e6f7420626520696e697469616c697a6564",id:3451,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"2134:25:13",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_ccad13a035d69be5b330b79703f32c06568050b8f19d9ea103ac977f7c468e03",typeString:'literal_string "Must not be initialized"'},value:"Must not be initialized"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_ccad13a035d69be5b330b79703f32c06568050b8f19d9ea103ac977f7c468e03",typeString:'literal_string "Must not be initialized"'}],id:3445,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"2098:7:13",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:3452,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2098:62:13",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:3453,nodeType:"ExpressionStatement",src:"2098:62:13"},{assignments:[3455],declarations:[{constant:false,id:3455,name:"fee",nodeType:"VariableDeclaration",scope:3478,src:"2171:11:13",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:3454,name:"uint256",nodeType:"ElementaryTypeName",src:"2171:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:3459,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:3457,name:"_feeCalculatorData",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3442,src:"2208:18:13",typeDescriptions:{typeIdentifier:"t_bytes_calldata_ptr",typeString:"bytes calldata"}}],expression:{argumentTypes:[{typeIdentifier:"t_bytes_calldata_ptr",typeString:"bytes calldata"}],id:3456,name:"parseFeeCalculatorData",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3548,src:"2185:22:13",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_bytes_memory_ptr_$returns$_t_uint256_$",typeString:"function (bytes memory) pure returns (uint256)"}},id:3458,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2185:42:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"2171:56:13"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:3461,name:"fee",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3455,src:"2250:3:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:3460,name:"validateFee",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3534,src:"2238:11:13",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_uint256_$returns$__$",typeString:"function (uint256) view"}},id:3462,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2238:16:13",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:3463,nodeType:"ExpressionStatement",src:"2238:16:13"},{expression:{argumentTypes:null,id:3469,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:3464,name:"fees",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3440,src:"2273:4:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_uint256_$",typeString:"mapping(address => uint256)"}},id:3467,indexExpression:{argumentTypes:null,expression:{argumentTypes:null,id:3465,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"2278:3:13",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:3466,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"2278:10:13",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"2273:16:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,id:3468,name:"fee",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3455,src:"2292:3:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2273:22:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:3470,nodeType:"ExpressionStatement",src:"2273:22:13"},{expression:{argumentTypes:null,id:3476,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:3471,name:"isInitialized",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3436,src:"2305:13:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_bool_$",typeString:"mapping(address => bool)"}},id:3474,indexExpression:{argumentTypes:null,expression:{argumentTypes:null,id:3472,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"2319:3:13",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:3473,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"2319:10:13",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"2305:25:13",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,hexValue:"74727565",id:3475,isConstant:false,isLValue:false,isPure:true,kind:"bool",lValueRequested:false,nodeType:"Literal",src:"2333:4:13",subdenomination:null,typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"},value:"true"},src:"2305:32:13",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:3477,nodeType:"ExpressionStatement",src:"2305:32:13"}]},documentation:"Initializes the rebalance fee for the caller. Fee is represented as a scaled decimal value.\n(e.g. 1% = 10 ** 18, 0.1% = 10 ** 17)\nIntended to be called by a RebalancingSetTokenV2 during initialization.\n     * @param _feeCalculatorData       Bytes encoded data about the fee for the sender",id:3479,implemented:true,kind:"function",modifiers:[],name:"initialize",nodeType:"FunctionDefinition",parameters:{id:3443,nodeType:"ParameterList",parameters:[{constant:false,id:3442,name:"_feeCalculatorData",nodeType:"VariableDeclaration",scope:3479,src:"1973:33:13",stateVariable:false,storageLocation:"calldata",typeDescriptions:{typeIdentifier:"t_bytes_calldata_ptr",typeString:"bytes"},typeName:{id:3441,name:"bytes",nodeType:"ElementaryTypeName",src:"1973:5:13",typeDescriptions:{typeIdentifier:"t_bytes_storage_ptr",typeString:"bytes"}},value:null,visibility:"internal"}],src:"1963:49:13"},returnParameters:{id:3444,nodeType:"ParameterList",parameters:[],src:"2034:0:13"},scope:3549,src:"1944:400:13",stateMutability:"nonpayable",superFunction:4851,visibility:"external"},{body:{id:3489,nodeType:"Block",src:"2550:40:13",statements:[{expression:{argumentTypes:null,baseExpression:{argumentTypes:null,id:3484,name:"fees",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3440,src:"2567:4:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_uint256_$",typeString:"mapping(address => uint256)"}},id:3487,indexExpression:{argumentTypes:null,expression:{argumentTypes:null,id:3485,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"2572:3:13",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:3486,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"2572:10:13",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"2567:16:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:3483,id:3488,nodeType:"Return",src:"2560:23:13"}]},documentation:"Returns the fee initialized by the sender. Implicitly returns 0 if the fee has not bee initialized.",id:3490,implemented:true,kind:"function",modifiers:[],name:"getFee",nodeType:"FunctionDefinition",parameters:{id:3480,nodeType:"ParameterList",parameters:[],src:"2488:2:13"},returnParameters:{id:3483,nodeType:"ParameterList",parameters:[{constant:false,id:3482,name:"",nodeType:"VariableDeclaration",scope:3490,src:"2537:7:13",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:3481,name:"uint256",nodeType:"ElementaryTypeName",src:"2537:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"2536:9:13"},scope:3549,src:"2473:117:13",stateMutability:"view",superFunction:4856,visibility:"external"},{body:{id:3500,nodeType:"Block",src:"2733:40:13",statements:[{expression:{argumentTypes:null,baseExpression:{argumentTypes:null,id:3495,name:"fees",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3440,src:"2750:4:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_uint256_$",typeString:"mapping(address => uint256)"}},id:3498,indexExpression:{argumentTypes:null,expression:{argumentTypes:null,id:3496,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"2755:3:13",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:3497,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"2755:10:13",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"2750:16:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:3494,id:3499,nodeType:"Return",src:"2743:23:13"}]},documentation:"Same as getFee, but a non-view function.",id:3501,implemented:true,kind:"function",modifiers:[],name:"updateAndGetFee",nodeType:"FunctionDefinition",parameters:{id:3491,nodeType:"ParameterList",parameters:[],src:"2684:2:13"},returnParameters:{id:3494,nodeType:"ParameterList",parameters:[{constant:false,id:3493,name:"",nodeType:"VariableDeclaration",scope:3501,src:"2720:7:13",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:3492,name:"uint256",nodeType:"ElementaryTypeName",src:"2720:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"2719:9:13"},scope:3549,src:"2660:113:13",stateMutability:"nonpayable",superFunction:4861,visibility:"external"},{body:{id:3515,nodeType:"Block",src:"3020:77:13",statements:[{expression:{argumentTypes:null,id:3513,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:3506,name:"fees",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3440,src:"3030:4:13",typeDescriptions:{typeIdentifier:"t_mapping$_t_address_$_t_uint256_$",typeString:"mapping(address => uint256)"}},id:3509,indexExpression:{argumentTypes:null,expression:{argumentTypes:null,id:3507,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"3035:3:13",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:3508,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"3035:10:13",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"3030:16:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,id:3511,name:"_newFeePercentage",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3503,src:"3072:17:13",typeDescriptions:{typeIdentifier:"t_bytes_calldata_ptr",typeString:"bytes calldata"}}],expression:{argumentTypes:[{typeIdentifier:"t_bytes_calldata_ptr",typeString:"bytes calldata"}],id:3510,name:"parseFeeCalculatorData",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3548,src:"3049:22:13",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_bytes_memory_ptr_$returns$_t_uint256_$",typeString:"function (bytes memory) pure returns (uint256)"}},id:3512,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3049:41:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"3030:60:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:3514,nodeType:"ExpressionStatement",src:"3030:60:13"}]},documentation:null,id:3516,implemented:true,kind:"function",modifiers:[],name:"adjustFee",nodeType:"FunctionDefinition",parameters:{id:3504,nodeType:"ParameterList",parameters:[{constant:false,id:3503,name:"_newFeePercentage",nodeType:"VariableDeclaration",scope:3516,src:"2960:32:13",stateVariable:false,storageLocation:"calldata",typeDescriptions:{typeIdentifier:"t_bytes_calldata_ptr",typeString:"bytes"},typeName:{id:3502,name:"bytes",nodeType:"ElementaryTypeName",src:"2960:5:13",typeDescriptions:{typeIdentifier:"t_bytes_storage_ptr",typeString:"bytes"}},value:null,visibility:"internal"}],src:"2950:48:13"},returnParameters:{id:3505,nodeType:"ParameterList",parameters:[],src:"3020:0:13"},scope:3549,src:"2932:165:13",stateMutability:"nonpayable",superFunction:4866,visibility:"external"},{body:{id:3533,nodeType:"Block",src:"3403:148:13",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:3524,name:"_fee",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3518,src:"3469:4:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:3521,name:"ScaleValidations",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:24210,src:"3413:16:13",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ScaleValidations_$24210_$",
typeString:"type(library ScaleValidations)"}},id:3523,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"validateLessThanEqualOneHundredPercent",nodeType:"MemberAccess",referencedDeclaration:24193,src:"3413:55:13",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_uint256_$returns$__$",typeString:"function (uint256) view"}},id:3525,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3413:61:13",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:3526,nodeType:"ExpressionStatement",src:"3413:61:13"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:3530,name:"_fee",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3518,src:"3539:4:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:3527,name:"ScaleValidations",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:24210,src:"3493:16:13",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ScaleValidations_$24210_$",typeString:"type(library ScaleValidations)"}},id:3529,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"validateMultipleOfBasisPoint",nodeType:"MemberAccess",referencedDeclaration:24209,src:"3493:45:13",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_uint256_$returns$__$",typeString:"function (uint256) view"}},id:3531,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3493:51:13",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:3532,nodeType:"ExpressionStatement",src:"3493:51:13"}]},documentation:"Fee should not exceed 100% and should be a multiple of a basis point.\n     * @param _fee       Fee value represented as scaled value",id:3534,implemented:true,kind:"function",modifiers:[],name:"validateFee",nodeType:"FunctionDefinition",parameters:{id:3519,nodeType:"ParameterList",parameters:[{constant:false,id:3518,name:"_fee",nodeType:"VariableDeclaration",scope:3534,src:"3351:12:13",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:3517,name:"uint256",nodeType:"ElementaryTypeName",src:"3351:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"3341:28:13"},returnParameters:{id:3520,nodeType:"ParameterList",parameters:[],src:"3403:0:13"},scope:3549,src:"3321:230:13",stateMutability:"view",superFunction:null,visibility:"private"},{body:{id:3547,nodeType:"Block",src:"3956:133:13",statements:[{assignments:[3542],declarations:[{constant:false,id:3542,name:"fee",nodeType:"VariableDeclaration",scope:3547,src:"3966:11:13",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:3541,name:"uint256",nodeType:"ElementaryTypeName",src:"3966:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:3543,initialValue:null,nodeType:"VariableDeclarationStatement",src:"3966:11:13"},{externalReferences:[{fee:{declaration:3542,isOffset:false,isSlot:false,src:"4011:3:13",valueSize:1}},{_feeCalculatorData:{declaration:3536,isOffset:false,isSlot:false,src:"4028:18:13",valueSize:1}}],id:3544,nodeType:"InlineAssembly",operations:"{\n    fee := mload(add(_feeCalculatorData, 32))\n}",src:"3988:90:13"},{expression:{argumentTypes:null,id:3545,name:"fee",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:3542,src:"4079:3:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:3540,id:3546,nodeType:"Return",src:"4072:10:13"}]},documentation:"Function to convert the feeCalculator bytes data to the fee\n     * @param _feeCalculatorData       Bytes encoded data about the fee for the sender\n@return _fee                    Parsed fee value represented as scaled value",id:3548,implemented:true,kind:"function",modifiers:[],name:"parseFeeCalculatorData",nodeType:"FunctionDefinition",parameters:{id:3537,nodeType:"ParameterList",parameters:[{constant:false,id:3536,name:"_feeCalculatorData",nodeType:"VariableDeclaration",scope:3548,src:"3859:31:13",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_bytes_memory_ptr",typeString:"bytes"},typeName:{id:3535,name:"bytes",nodeType:"ElementaryTypeName",src:"3859:5:13",typeDescriptions:{typeIdentifier:"t_bytes_storage_ptr",typeString:"bytes"}},value:null,visibility:"internal"}],src:"3849:47:13"},returnParameters:{id:3540,nodeType:"ParameterList",parameters:[{constant:false,id:3539,name:"",nodeType:"VariableDeclaration",scope:3548,src:"3943:7:13",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:3538,name:"uint256",nodeType:"ElementaryTypeName",src:"3943:7:13",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"3942:9:13"},scope:3549,src:"3818:271:13",stateMutability:"pure",superFunction:null,visibility:"private"}],scope:3550,src:"1202:2889:13"}],src:"597:3495:13"},compiler:{name:"solc",version:"0.5.7+commit.6da8b019.Linux.g++"},networks:{},schemaVersion:"3.0.23",updatedAt:"2020-04-07T04:29:24.433Z",devdoc:{author:"Set Protocol * Smart contract that stores and returns fees (represented as scaled decimal values). Meant to be used with a RebalancingSetTokenV2",methods:{"initialize(bytes)":{params:{_feeCalculatorData:"Bytes encoded data about the fee for the sender"}}},title:"FixedFeeCalculator"},userdoc:{methods:{"getFee()":{notice:"Returns the fee initialized by the sender. Implicitly returns 0 if the fee has not bee initialized."},"initialize(bytes)":{notice:"Initializes the rebalance fee for the caller. Fee is represented as a scaled decimal value. (e.g. 1% = 10 ** 18, 0.1% = 10 ** 17) Intended to be called by a RebalancingSetTokenV2 during initialization."},"updateAndGetFee()":{notice:"Same as getFee, but a non-view function."}}}};