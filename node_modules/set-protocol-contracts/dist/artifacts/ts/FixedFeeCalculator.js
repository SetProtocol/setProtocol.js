"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FixedFeeCalculator={contractName:"FixedFeeCalculator",abi:[{constant:true,inputs:[{name:"",type:"address"}],name:"isInitialized",outputs:[{name:"",type:"bool"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[{name:"",type:"address"}],name:"fees",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:false,inputs:[{name:"_feeCalculatorData",type:"bytes"}],name:"initialize",outputs:[],payable:false,stateMutability:"nonpayable",type:"function"},{constant:true,inputs:[],name:"getFee",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:false,inputs:[],name:"updateAndGetFee",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"nonpayable",type:"function"},{constant:false,inputs:[{name:"_newFeePercentage",type:"bytes"}],name:"adjustFee",outputs:[],payable:false,stateMutability:"nonpayable",type:"function"}],metadata:'{"compiler":{"version":"0.5.7+commit.6da8b019"},"language":"Solidity","output":{"abi":[{"constant":false,"inputs":[],"name":"updateAndGetFee","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_feeCalculatorData","type":"bytes"}],"name":"initialize","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_newFeePercentage","type":"bytes"}],"name":"adjustFee","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getFee","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"isInitialized","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"fees","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}],"devdoc":{"author":"Set Protocol * Smart contract that stores and returns fees (represented as scaled decimal values). Meant to be used with a RebalancingSetTokenV2","methods":{"initialize(bytes)":{"params":{"_feeCalculatorData":"Bytes encoded data about the fee for the sender"}}},"title":"FixedFeeCalculator"},"userdoc":{"methods":{"getFee()":{"notice":"Returns the fee initialized by the sender. Implicitly returns 0 if the fee has not bee initialized."},"initialize(bytes)":{"notice":"Initializes the rebalance fee for the caller. Fee is represented as a scaled decimal value. (e.g. 1% = 10 ** 18, 0.1% = 10 ** 17) Intended to be called by a RebalancingSetTokenV2 during initialization."},"updateAndGetFee()":{"notice":"Same as getFee, but a non-view function."}}}},"settings":{"compilationTarget":{"/Users/brianweickmann/Documents/Source/set-protocol-contracts/contracts/core/fee-calculators/FixedFeeCalculator.sol":"FixedFeeCalculator"},"evmVersion":"byzantium","libraries":{},"optimizer":{"enabled":true,"runs":200},"remappings":[]},"sources":{"/Users/brianweickmann/Documents/Source/set-protocol-contracts/contracts/core/fee-calculators/FixedFeeCalculator.sol":{"keccak256":"0xac380a8a2f61084040411042aee3054e966a831756746758c13746b74917d4ba","urls":["bzzr://cc4d24ee164f0af0ef443a40c20194324e9b60b5f9832ca74d4f658a06cc8cc1"]},"/Users/brianweickmann/Documents/Source/set-protocol-contracts/contracts/core/interfaces/ICore.sol":{"keccak256":"0x5dc3db4398630ea52d2a40c9ddfa89d94e65c2770a12bab4d2a5c8eb573fb0a0","urls":["bzzr://25e90b53f61b388e0950b808e2296f82d427b66cfd6021212713436b2a592e31"]},"/Users/brianweickmann/Documents/Source/set-protocol-contracts/contracts/core/interfaces/IFeeCalculator.sol":{"keccak256":"0xfdce9b333367bfed8f379738b0eabfe4be0045db735e9f24493de09729593d4d","urls":["bzzr://d2fa7438b492f4f08009810e3e9a2e2c22a429c307562e3f5274d4bfe2d21734"]},"/Users/brianweickmann/Documents/Source/set-protocol-contracts/contracts/core/interfaces/ISetToken.sol":{"keccak256":"0xfa6c0c07f8394d89b6b8f72e15778f8452a9341acb20cebb8421f3522aaca1bd","urls":["bzzr://ccf23bb78fd507bf8cbf5cf7ac2a660a1463b87a3689196e42b8f6862d1a6b11"]},"/Users/brianweickmann/Documents/Source/set-protocol-contracts/contracts/core/lib/SetTokenLibrary.sol":{"keccak256":"0x0c0952057a64c3af0ace01db29258145deff7d935bdc53d1bbab6fff87b3b146","urls":["bzzr://ad1944f45fade934870661a4e91c260625755760ff0ef047677547fbdc6a16bf"]},"openzeppelin-solidity/contracts/math/SafeMath.sol":{"keccak256":"0xc2a200a877c4a9b2475c246c54ffecc69ffde3e11af83319c63c2dc5458bac80","urls":["bzzr://c8876e2c39b60f155d748d71d715c8f3903fae5a405ac599adcb6ad2f9a583f9"]},"set-protocol-contract-utils/contracts/lib/CommonMath.sol":{"keccak256":"0x3d1d08c6efc2a973fe2c02ddcb02fd99a8c8eb75f74dcbd93e8e15864eee2b6b","urls":["bzzr://580815dd1cf648a4521d923e59087de21143d9c48115ab71579a1f5a8f3d36af"]},"set-protocol-contract-utils/contracts/lib/ScaleValidations.sol":{"keccak256":"0xba602c9dda228b4552744ef0ba26329a3ada2610c42cb085a373d873d58d1391","urls":["bzzr://78110cdd43a9f5b4092cb51867e79da62e6d8b324ffb24d0dd448ad3e27048ee"]}},"version":1}',bytecode:"0x608060405234801561001057600080fd5b506104da806100206000396000f3fe608060405234801561001057600080fd5b506004361061007e577c0100000000000000000000000000000000000000000000000000000000600035046320f554048114610083578063439fab911461009d578063cbf1c3541461010f578063ced72f8714610083578063d60b347f1461017f578063faaebd21146101c6575b600080fd5b61008b6101f9565b60408051918252519081900360200190f35b61010d600480360360208110156100b357600080fd5b8101906020810181356401000000008111156100ce57600080fd5b8201836020820111156100e057600080fd5b8035906020019184600183028401116401000000008311171561010257600080fd5b50909250905061020c565b005b61010d6004803603602081101561012557600080fd5b81019060208101813564010000000081111561014057600080fd5b82018360208201111561015257600080fd5b8035906020019184600183028401116401000000008311171561017457600080fd5b509092509050610302565b6101b26004803603602081101561019557600080fd5b503573ffffffffffffffffffffffffffffffffffffffff16610355565b604080519115158252519081900360200190f35b61008b600480360360208110156101dc57600080fd5b503573ffffffffffffffffffffffffffffffffffffffff1661036a565b3360009081526001602052604090205490565b3360009081526020819052604090205460ff161561028b57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601760248201527f4d757374206e6f7420626520696e697469616c697a6564000000000000000000604482015290519081900360640190fd5b60006102cc83838080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525061037c92505050565b90506102d781610383565b33600090815260016020818152604080842094909455829052919020805460ff191690911790555050565b61034182828080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525061037c92505050565b336000908152600160205260409020555050565b60006020819052908152604090205460ff1681565b60016020526000908152604090205481565b6020015190565b61038c81610398565b6103958161040f565b50565b670de0b6b3a764000081111561039557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600f60248201527f4d757374206265203c3d20313030250000000000000000000000000000000000604482015290519081900360640190fd5b61042581655af3107a400063ffffffff61049116565b1561039557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601960248201527f4d757374206265206d756c7469706c65206f6620302e30312500000000000000604482015290519081900360640190fd5b60008161049d57600080fd5b8183816104a657fe5b06939250505056fea165627a7a723058204f89803f3c21275f335138b986ba97a01d4dcf367cd43e23f21f32328a70d5770029",deployedBytecode:"0x608060405234801561001057600080fd5b506004361061007e577c0100000000000000000000000000000000000000000000000000000000600035046320f554048114610083578063439fab911461009d578063cbf1c3541461010f578063ced72f8714610083578063d60b347f1461017f578063faaebd21146101c6575b600080fd5b61008b6101f9565b60408051918252519081900360200190f35b61010d600480360360208110156100b357600080fd5b8101906020810181356401000000008111156100ce57600080fd5b8201836020820111156100e057600080fd5b8035906020019184600183028401116401000000008311171561010257600080fd5b50909250905061020c565b005b61010d6004803603602081101561012557600080fd5b81019060208101813564010000000081111561014057600080fd5b82018360208201111561015257600080fd5b8035906020019184600183028401116401000000008311171561017457600080fd5b509092509050610302565b6101b26004803603602081101561019557600080fd5b503573ffffffffffffffffffffffffffffffffffffffff16610355565b604080519115158252519081900360200190f35b61008b600480360360208110156101dc57600080fd5b503573ffffffffffffffffffffffffffffffffffffffff1661036a565b3360009081526001602052604090205490565b3360009081526020819052604090205460ff161561028b57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601760248201527f4d757374206e6f7420626520696e697469616c697a6564000000000000000000604482015290519081900360640190fd5b60006102cc83838080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525061037c92505050565b90506102d781610383565b33600090815260016020818152604080842094909455829052919020805460ff191690911790555050565b61034182828080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525061037c92505050565b336000908152600160205260409020555050565b60006020819052908152604090205460ff1681565b60016020526000908152604090205481565b6020015190565b61038c81610398565b6103958161040f565b50565b670de0b6b3a764000081111561039557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600f60248201527f4d757374206265203c3d20313030250000000000000000000000000000000000604482015290519081900360640190fd5b61042581655af3107a400063ffffffff61049116565b1561039557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601960248201527f4d757374206265206d756c7469706c65206f6620302e30312500000000000000604482015290519081900360640190fd5b60008161049d57600080fd5b8183816104a657fe5b06939250505056fea165627a7a723058204f89803f3c21275f335138b986ba97a01d4dcf367cd43e23f21f32328a70d5770029",sourceMap:"1266:2889:13:-;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1266:2889:13;;;;;;;",deployedSourceMap:"1266:2889:13:-;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1266:2889:13;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2724:113;;;:::i;:::-;;;;;;;;;;;;;;;;2008:400;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;2008:400:13;;;;;;;;21:11:-1;5:28;;2:2;;;46:1;43;36:12;2:2;2008:400:13;;35:9:-1;28:4;12:14;8:25;5:40;2:2;;;58:1;55;48:12;2:2;2008:400:13;;;;;;100:9:-1;95:1;81:12;77:20;67:8;63:35;60:50;39:11;25:12;22:29;11:107;8:2;;;131:1;128;121:12;8:2;-1:-1;2008:400:13;;-1:-1:-1;2008:400:13;-1:-1:-1;2008:400:13;:::i;:::-;;2996:165;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;2996:165:13;;;;;;;;21:11:-1;5:28;;2:2;;;46:1;43;36:12;2:2;2996:165:13;;35:9:-1;28:4;12:14;8:25;5:40;2:2;;;58:1;55;48:12;2:2;2996:165:13;;;;;;100:9:-1;95:1;81:12;77:20;67:8;63:35;60:50;39:11;25:12;22:29;11:107;8:2;;;131:1;128;121:12;8:2;-1:-1;2996:165:13;;-1:-1:-1;2996:165:13;-1:-1:-1;2996:165:13;:::i;1467:45::-;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;1467:45:13;;;;:::i;:::-;;;;;;;;;;;;;;;;;;1573:39;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;1573:39:13;;;;:::i;2724:113::-;2819:10;2784:7;2814:16;;;:4;:16;;;;;;2724:113;:::o;2008:400::-;2185:10;2171:13;:25;;;;;;;;;;;;;2170:26;2162:62;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2235:11;2249:42;2272:18;;2249:42;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;30:3:-1;22:6;14;1:33;99:1;81:16;;74:27;;;;-1:-1;2249:22:13;;-1:-1:-1;;;2249:42:13:i;:::-;2235:56;;2302:16;2314:3;2302:11;:16::i;:::-;2342:10;2337:16;;;;:4;:16;;;;;;;;:22;;;;2369:25;;;;;;:32;;-1:-1:-1;;2369:32:13;;;;;;-1:-1:-1;;2008:400:13:o;2996:165::-;3113:41;3136:17;;3113:41;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;30:3:-1;22:6;14;1:33;99:1;81:16;;74:27;;;;-1:-1;3113:22:13;;-1:-1:-1;;;3113:41:13:i;:::-;3099:10;3094:16;;;;:4;:16;;;;;:60;-1:-1:-1;;2996:165:13:o;1467:45::-;;;;;;;;;;;;;;;;:::o;1573:39::-;;;;;;;;;;;;;:::o;3882:271::-;4112:2;4088:27;4082:34;;3882:271::o;3385:230::-;3477:61;3533:4;3477:55;:61::i;:::-;3557:51;3603:4;3557:45;:51::i;:::-;3385:230;:::o;876:152:179:-;812:4;972:6;:29;;964:57;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1034:189;1133:27;:6;865:4;1133:27;:10;:27;:::i;:::-;:32;1112:104;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1739:121:166;1797:7;1824:6;1816:15;;;;;;1852:1;1848;:5;;;;;;;1739:121;-1:-1:-1;;;1739:121:166:o",source:'/*\n    Copyright 2019 Set Labs Inc.\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\npragma solidity 0.5.7;\n\nimport { SafeMath } from "openzeppelin-solidity/contracts/math/SafeMath.sol";\nimport { CommonMath } from "set-protocol-contract-utils/contracts/lib/CommonMath.sol";\nimport { ScaleValidations } from "set-protocol-contract-utils/contracts/lib/ScaleValidations.sol";\n\nimport { ICore } from "../interfaces/ICore.sol";\nimport { IFeeCalculator } from "../interfaces/IFeeCalculator.sol";\nimport { SetTokenLibrary } from "../lib/SetTokenLibrary.sol";\n\n\n/**\n * @title FixedFeeCalculator\n * @author Set Protocol\n *\n * Smart contract that stores and returns fees (represented as scaled decimal values).\n * Meant to be used with a RebalancingSetTokenV2\n */\ncontract FixedFeeCalculator is IFeeCalculator {\n    using SafeMath for uint256;\n\n    /* ============ State Variables ============ */\n\n    // Mapping between an address and its initialization state\n    mapping(address => bool) public isInitialized;\n\n    // Mapping between an address and its current fee\n    mapping(address => uint256) public fees;\n\n    /* ============ External Functions ============ */\n\n    /**\n     * Initializes the rebalance fee for the caller. Fee is represented as a scaled decimal value.\n     * (e.g. 1% = 10 ** 18, 0.1% = 10 ** 17)\n     * Intended to be called by a RebalancingSetTokenV2 during initialization.\n     *\n     * @param _feeCalculatorData       Bytes encoded data about the fee for the sender\n     */\n    function initialize(\n        bytes calldata _feeCalculatorData\n    )\n        external\n    {\n        // Sender fee must not already be initialized\n        require(!isInitialized[msg.sender], "Must not be initialized");\n\n        uint256 fee = parseFeeCalculatorData(_feeCalculatorData);\n\n        validateFee(fee);\n        \n        fees[msg.sender] = fee;\n        isInitialized[msg.sender] = true;\n    }\n\n    /**\n     * Returns the fee initialized by the sender. Implicitly returns 0 if the fee has not bee initialized.\n     */\n    function getFee()\n        external\n        view\n        returns(uint256)\n    {\n        return fees[msg.sender];\n    }\n\n    /**\n     * Same as getFee, but a non-view function.\n     */\n    function updateAndGetFee()\n        external\n        returns(uint256)\n    {\n        return fees[msg.sender];\n    }\n\n    /*\n     * Validate then set new streaming fee.\n     *\n     * @param  _newFeePercentage       Fee type and new streaming fee encoded in bytes\n     */\n    function adjustFee(\n        bytes calldata _newFeePercentage\n    )\n        external\n    {\n        fees[msg.sender] = parseFeeCalculatorData(_newFeePercentage);\n    }\n\n    /* ============ Private Functions ============ */\n\n    /**\n     * Fee should not exceed 100% and should be a multiple of a basis point.\n     *\n     * @param _fee       Fee value represented as scaled value\n     */\n    function validateFee(\n        uint256 _fee\n    )\n        private\n        view\n    {\n        ScaleValidations.validateLessThanEqualOneHundredPercent(_fee);\n        \n        ScaleValidations.validateMultipleOfBasisPoint(_fee);\n    }\n\n    /**\n     * Function to convert the feeCalculator bytes data to the fee\n     *\n     * @param _feeCalculatorData       Bytes encoded data about the fee for the sender\n     * @return _fee                    Parsed fee value represented as scaled value\n     */\n    function parseFeeCalculatorData(\n        bytes memory _feeCalculatorData\n    )\n        private\n        pure\n        returns (uint256)\n    {\n        uint256 fee;\n\n        assembly {\n            fee := mload(add(_feeCalculatorData, 32))\n        }\n\n        return fee;\n    }\n}\n',sourcePath:"/Users/brianweickmann/Documents/Source/set-protocol-contracts/contracts/core/fee-calculators/FixedFeeCalculator.sol",compiler:{name:"solc",version:"0.5.7+commit.6da8b019.Linux.g++"},networks:{},schemaVersion:"3.0.23",updatedAt:"2020-05-05T17:13:36.309Z",devdoc:{author:"Set Protocol * Smart contract that stores and returns fees (represented as scaled decimal values). Meant to be used with a RebalancingSetTokenV2",methods:{"initialize(bytes)":{params:{_feeCalculatorData:"Bytes encoded data about the fee for the sender"}}},title:"FixedFeeCalculator"},userdoc:{methods:{"getFee()":{notice:"Returns the fee initialized by the sender. Implicitly returns 0 if the fee has not bee initialized."},"initialize(bytes)":{notice:"Initializes the rebalance fee for the caller. Fee is represented as a scaled decimal value. (e.g. 1% = 10 ** 18, 0.1% = 10 ** 17) Intended to be called by a RebalancingSetTokenV2 during initialization."},"updateAndGetFee()":{notice:"Same as getFee, but a non-view function."}}}};