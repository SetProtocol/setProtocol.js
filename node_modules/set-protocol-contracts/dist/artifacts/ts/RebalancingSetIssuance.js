"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RebalancingSetIssuance={contractName:"RebalancingSetIssuance",abi:[{constant:true,inputs:[],name:"vaultInstance",outputs:[{name:"",type:"address"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"coreInstance",outputs:[{name:"",type:"address"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"core",outputs:[{name:"",type:"address"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"vault",outputs:[{name:"",type:"address"}],payable:false,stateMutability:"view",type:"function"}],metadata:'{"compiler":{"version":"0.5.7+commit.6da8b019"},"language":"Solidity","output":{"abi":[{"constant":true,"inputs":[],"name":"vaultInstance","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"coreInstance","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"core","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"vault","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"}],"devdoc":{"author":"Set Protocol * The RebalancingSetIssuance contains utility functions used in rebalancing SetToken  issuance","methods":{},"title":"RebalancingSetIssuance"},"userdoc":{"methods":{}}},"settings":{"compilationTarget":{"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/modules/lib/RebalancingSetIssuance.sol":"RebalancingSetIssuance"},"evmVersion":"byzantium","libraries":{},"optimizer":{"enabled":true,"runs":200},"remappings":[]},"sources":{"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ICore.sol":{"keccak256":"0x5dc3db4398630ea52d2a40c9ddfa89d94e65c2770a12bab4d2a5c8eb573fb0a0","urls":["bzzr://25e90b53f61b388e0950b808e2296f82d427b66cfd6021212713436b2a592e31"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IRebalancingSetToken.sol":{"keccak256":"0xe7356a7b0f0cc95d9526395d776f523a48fd65618730d67b4f31f20ffbd380da","urls":["bzzr://605a33a818eff7ce3370f25fccb751f61c066b4db0772605a2215d1357d68072"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ISetToken.sol":{"keccak256":"0xfa6c0c07f8394d89b6b8f72e15778f8452a9341acb20cebb8421f3522aaca1bd","urls":["bzzr://ccf23bb78fd507bf8cbf5cf7ac2a660a1463b87a3689196e42b8f6862d1a6b11"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ITransferProxy.sol":{"keccak256":"0x962d54385cc4760c550cd2f16bfdb53e967def4c5d3acb7b3d0b3d7a49f902de","urls":["bzzr://cb8994c8bae7fa1d55d240f44396f4156b45c81afa6fcfa608fd5e4bf9f1a919"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IVault.sol":{"keccak256":"0xf8a6d376173be39f5744492866db5dd3f91453a124d23679ff164ff3817f2f4f","urls":["bzzr://896c0a8329175c1620e1a22467778b835defe0e61847e5a8427a306f42391e64"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/RebalancingLibrary.sol":{"keccak256":"0x7f9dd2f95b2ee71a98b94cb9b0df15874aa134e7480d04a1fcf36aff166a55f4","urls":["bzzr://f43a5563ec5df095151eee30cf7a0941b5a971917c27c7b34d9586b36563ab5b"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/modules/lib/ModuleCoreState.sol":{"keccak256":"0x75a216727092c78a7adb0016e4ed49bc174b4e8725b0e6b0689f86c4d20bcba7","urls":["bzzr://29bbd30e5a474c131c8ae83c00cf82f3bf2162e6f4699cb04f7c06507302e50c"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/modules/lib/RebalancingSetIssuance.sol":{"keccak256":"0xeeabd867f7670496bdfe47ecaffec0b9a1a487ef4614881b84597148c080a486","urls":["bzzr://a8b9e8c7eb7b0fec284f607a306135e97ba6a73d15a357602dd52892d125ae2e"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/AddressArrayUtils.sol":{"keccak256":"0xb716eab4e8c5a336a2f19078928530829af097912bd1b925644f914b63601f08","urls":["bzzr://d8a21d39779beb316adb5180d08dcba1941eeccd9412ff08feb21a631c18c269"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/CommonMath.sol":{"keccak256":"0x3d1d08c6efc2a973fe2c02ddcb02fd99a8c8eb75f74dcbd93e8e15864eee2b6b","urls":["bzzr://580815dd1cf648a4521d923e59087de21143d9c48115ab71579a1f5a8f3d36af"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/ERC20Wrapper.sol":{"keccak256":"0xfda5a6d259a0a33081f621d1eefd6948a6dc108118e05a7899066e4ad05f785a","urls":["bzzr://702c566ec79cddeb64160f882cf25eaa530b806018dc50fd0dc5fab5b8ae76b2"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/IERC20.sol":{"keccak256":"0xe4f71b1797f6421de91c6ce3b55199c5845693a58eddfd417a60b81d0198a9dd","urls":["bzzr://a6a4cebcffaff1db8ef9b78ea58d2d7391cc2b1ed533a1e1309286989f6d4ea0"]},"openzeppelin-solidity/contracts/math/SafeMath.sol":{"keccak256":"0xc2a200a877c4a9b2475c246c54ffecc69ffde3e11af83319c63c2dc5458bac80","urls":["bzzr://c8876e2c39b60f155d748d71d715c8f3903fae5a405ac599adcb6ad2f9a583f9"]}},"version":1}',bytecode:"0x",deployedBytecode:"0x",sourceMap:"",deployedSourceMap:"",source:'/*\n    Copyright 2019 Set Labs Inc.\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\npragma solidity 0.5.7;\n\nimport { SafeMath } from "openzeppelin-solidity/contracts/math/SafeMath.sol";\n\nimport { AddressArrayUtils } from "../../../lib/AddressArrayUtils.sol";\nimport { ERC20Wrapper } from "../../../lib/ERC20Wrapper.sol";\nimport { IRebalancingSetToken } from "../../interfaces/IRebalancingSetToken.sol";\nimport { ISetToken } from "../../interfaces/ISetToken.sol";\nimport { ModuleCoreState } from "./ModuleCoreState.sol";\n\n\n/**\n * @title RebalancingSetIssuance\n * @author Set Protocol\n *\n * The RebalancingSetIssuance contains utility functions used in rebalancing SetToken \n * issuance\n */\ncontract RebalancingSetIssuance is \n    ModuleCoreState\n{\n    using SafeMath for uint256;\n    using AddressArrayUtils for address[];\n\n    // ============ Internal ============\n\n    /**\n     * Validates that wrapped Ether is a component of the SetToken\n     *\n     * @param  _setAddress            Address of the SetToken\n     * @param  _wrappedEtherAddress   Address of wrapped Ether\n     */\n    function validateWETHIsAComponentOfSet(\n        address _setAddress,\n        address _wrappedEtherAddress\n    )\n        internal\n        view\n    {\n        require(\n            ISetToken(_setAddress).tokenIsComponent(_wrappedEtherAddress),\n            "RebalancingSetIssuance.validateWETHIsAComponentOfSet: Components must contain weth"\n        );\n    }\n\n    /**\n     * Validates that the passed in address is tracked by Core and that the quantity\n     * is a multiple of the natural unit\n     *\n     * @param  _rebalancingSetAddress    Address of the rebalancing SetToken to issue/redeem\n     * @param  _rebalancingSetQuantity   The issuance quantity of rebalancing SetToken\n     */   \n    function validateRebalancingSetIssuance(\n        address _rebalancingSetAddress,\n        uint256 _rebalancingSetQuantity\n    ) \n        internal\n        view\n    {\n        // Expect rebalancing SetToken to be valid and enabled SetToken\n        require(\n            coreInstance.validSets(_rebalancingSetAddress),\n            "RebalancingSetIssuance.validateRebalancingIssuance: Invalid or disabled SetToken address"\n        );\n        \n        // Make sure Issuance quantity is multiple of the rebalancing SetToken natural unit\n        require(\n            _rebalancingSetQuantity.mod(ISetToken(_rebalancingSetAddress).naturalUnit()) == 0,\n            "RebalancingSetIssuance.validateRebalancingIssuance: Quantity must be multiple of natural unit"\n        );\n    }\n\n    /**\n     * Given a rebalancing SetToken and a desired issue quantity, calculates the \n     * minimum issuable quantity of the base SetToken. If the calculated quantity is initially\n     * not a multiple of the base SetToken\'s natural unit, the quantity is rounded up\n     * to the next base set natural unit.\n     *\n     * @param  _rebalancingSetAddress    Address of the rebalancing SetToken to issue\n     * @param  _rebalancingSetQuantity   The issuance quantity of rebalancing SetToken\n     * @return requiredBaseSetQuantity   The quantity of base SetToken to issue\n     */    \n    function getBaseSetIssuanceRequiredQuantity(\n        address _rebalancingSetAddress,\n        uint256 _rebalancingSetQuantity\n    )\n        internal\n        view\n        returns (uint256)\n    {\n        IRebalancingSetToken rebalancingSet = IRebalancingSetToken(_rebalancingSetAddress);\n\n        uint256 unitShares = rebalancingSet.unitShares();\n        uint256 naturalUnit = rebalancingSet.naturalUnit();\n\n        uint256 requiredBaseSetQuantity = _rebalancingSetQuantity.div(naturalUnit).mul(unitShares);\n\n        address baseSet = rebalancingSet.currentSet();\n        uint256 baseSetNaturalUnit = ISetToken(baseSet).naturalUnit();\n\n        // If there is a mismatch between the required quantity and the base SetToken natural unit,\n        // round up to the next base SetToken natural unit if required.\n        uint256 roundDownQuantity = requiredBaseSetQuantity.mod(baseSetNaturalUnit);\n        if (roundDownQuantity > 0) {\n            requiredBaseSetQuantity = requiredBaseSetQuantity.sub(roundDownQuantity).add(baseSetNaturalUnit);\n        }\n\n        return requiredBaseSetQuantity;\n    }\n\n\n    /**\n     * Given a rebalancing SetToken address, retrieve the base SetToken quantity redeem quantity based on the quantity\n     * held in the Vault. Rounds down to the nearest base SetToken natural unit\n     *\n     * @param _baseSetAddress             The address of the base SetToken\n     * @return baseSetRedeemQuantity      The quantity of base SetToken to redeem\n     */\n    function getBaseSetRedeemQuantity(\n        address _baseSetAddress\n    )\n        internal\n        view\n        returns (uint256)\n    {\n        // Get base SetToken Details from the rebalancing SetToken\n        uint256 baseSetNaturalUnit = ISetToken(_baseSetAddress).naturalUnit();\n        uint256 baseSetBalance = vaultInstance.getOwnerBalance(\n            _baseSetAddress,\n            address(this)\n        );\n\n        // Round the balance down to the base SetToken natural unit and return\n        return baseSetBalance.sub(baseSetBalance.mod(baseSetNaturalUnit));\n    }\n\n    /**\n     * Checks the base SetToken balances in the Vault and on the contract. \n     * Sends any positive quantity to the user directly or into the Vault\n     * depending on the keepChangeInVault flag.\n     *\n     * @param _baseSetAddress             The address of the base SetToken\n     * @param _transferProxyAddress       The address of the TransferProxy\n     * @param  _keepChangeInVault         Boolean signifying whether excess base SetToken is transferred to the user \n     *                                     or left in the vault\n     */\n    function returnExcessBaseSet(\n        address _baseSetAddress,\n        address _transferProxyAddress,\n        bool _keepChangeInVault\n    )\n        internal\n    {\n        returnExcessBaseSetFromContract(_baseSetAddress, _transferProxyAddress, _keepChangeInVault);\n\n        returnExcessBaseSetInVault(_baseSetAddress, _keepChangeInVault);\n    }   \n\n    /**\n     * Checks the base SetToken balances on the contract and sends\n     * any positive quantity to the user directly or into the Vault\n     * depending on the keepChangeInVault flag.\n     *\n     * @param _baseSetAddress             The address of the base SetToken\n     * @param _transferProxyAddress       The address of the TransferProxy\n     * @param  _keepChangeInVault         Boolean signifying whether excess base SetToken is transfered to the user \n     *                                     or left in the vault\n     */\n    function returnExcessBaseSetFromContract(\n        address _baseSetAddress,\n        address _transferProxyAddress,\n        bool _keepChangeInVault\n    )\n        internal\n    {\n        uint256 baseSetQuantity = ERC20Wrapper.balanceOf(_baseSetAddress, address(this));\n        \n        if (baseSetQuantity == 0) { \n            return; \n        } else if (_keepChangeInVault) {\n            // Ensure base SetToken allowance\n            ERC20Wrapper.ensureAllowance(\n                _baseSetAddress,\n                address(this),\n                _transferProxyAddress,\n                baseSetQuantity\n            );\n\n            // Deposit base SetToken to the user\n            coreInstance.depositModule(\n                address(this),\n                msg.sender,\n                _baseSetAddress,\n                baseSetQuantity\n            );\n        } else {\n            // Transfer directly to the user\n            ERC20Wrapper.transfer(\n                _baseSetAddress,\n                msg.sender,\n                baseSetQuantity\n            );\n        }\n    }\n\n    /**\n     * Checks the base SetToken balances in the Vault and sends\n     * any positive quantity to the user directly or into the Vault\n     * depending on the keepChangeInVault flag.\n     *\n     * @param _baseSetAddress             The address of the base SetToken\n     * @param  _keepChangeInVault         Boolean signifying whether excess base SetToken is transfered to the user \n     *                                     or left in the vault\n     */\n    function returnExcessBaseSetInVault(\n        address _baseSetAddress,\n        bool _keepChangeInVault\n    )\n        internal\n    {\n        // Return base SetToken if any that are in the Vault\n        uint256 baseSetQuantityInVault = vaultInstance.getOwnerBalance(\n            _baseSetAddress,\n            address(this)\n        );\n        \n        if (baseSetQuantityInVault == 0) { \n            return; \n        } else if (_keepChangeInVault) {\n            // Transfer ownership within the vault to the user\n            coreInstance.internalTransfer(\n                _baseSetAddress,\n                msg.sender,\n                baseSetQuantityInVault\n            );\n        } else {\n            // Transfer ownership directly to the user\n            coreInstance.withdrawModule(\n                address(this),\n                msg.sender,\n                _baseSetAddress,\n                baseSetQuantityInVault\n            );\n        }\n    }   \n}\n',sourcePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/modules/lib/RebalancingSetIssuance.sol",ast:{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/modules/lib/RebalancingSetIssuance.sol",exportedSymbols:{RebalancingSetIssuance:[14134]},id:14135,nodeType:"SourceUnit",nodes:[{id:13822,literals:["solidity","0.5",".7"],nodeType:"PragmaDirective",src:"597:22:65"},{absolutePath:"openzeppelin-solidity/contracts/math/SafeMath.sol",file:"openzeppelin-solidity/contracts/math/SafeMath.sol",id:13824,nodeType:"ImportDirective",scope:14135,sourceUnit:29641,src:"621:77:65",symbolAliases:[{foreign:13823,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/AddressArrayUtils.sol",file:"../../../lib/AddressArrayUtils.sol",id:13826,nodeType:"ImportDirective",scope:14135,sourceUnit:22511,src:"700:71:65",symbolAliases:[{foreign:13825,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/ERC20Wrapper.sol",file:"../../../lib/ERC20Wrapper.sol",id:13828,nodeType:"ImportDirective",scope:14135,sourceUnit:23680,src:"772:61:65",symbolAliases:[{foreign:13827,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IRebalancingSetToken.sol",file:"../../interfaces/IRebalancingSetToken.sol",id:13830,nodeType:"ImportDirective",scope:14135,sourceUnit:5225,src:"834:81:65",symbolAliases:[{foreign:13829,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ISetToken.sol",file:"../../interfaces/ISetToken.sol",id:13832,nodeType:"ImportDirective",scope:14135,sourceUnit:5660,src:"916:59:65",symbolAliases:[{foreign:13831,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/modules/lib/ModuleCoreState.sol",file:"./ModuleCoreState.sol",id:13834,nodeType:"ImportDirective",scope:14135,sourceUnit:13784,src:"976:56:65",symbolAliases:[{foreign:13833,local:null}],unitAlias:""},{baseContracts:[{arguments:null,baseName:{contractScope:null,id:13835,name:"ModuleCoreState",nodeType:"UserDefinedTypeName",referencedDeclaration:13783,src:"1242:15:65",typeDescriptions:{typeIdentifier:"t_contract$_ModuleCoreState_$13783",typeString:"contract ModuleCoreState"}},id:13836,nodeType:"InheritanceSpecifier",src:"1242:15:65"}],contractDependencies:[13783],contractKind:"contract",documentation:"@title RebalancingSetIssuance\n@author Set Protocol\n * The RebalancingSetIssuance contains utility functions used in rebalancing SetToken \nissuance",fullyImplemented:false,id:14134,linearizedBaseContracts:[14134,13783],name:"RebalancingSetIssuance",nodeType:"ContractDefinition",nodes:[{id:13839,libraryName:{contractScope:null,id:13837,name:"SafeMath",nodeType:"UserDefinedTypeName",referencedDeclaration:29640,src:"1270:8:65",typeDescriptions:{typeIdentifier:"t_contract$_SafeMath_$29640",typeString:"library SafeMath"}},nodeType:"UsingForDirective",src:"1264:27:65",typeName:{id:13838,name:"uint256",nodeType:"ElementaryTypeName",src:"1283:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}},{id:13843,libraryName:{contractScope:null,id:13840,name:"AddressArrayUtils",nodeType:"UserDefinedTypeName",referencedDeclaration:22510,src:"1302:17:65",typeDescriptions:{typeIdentifier:"t_contract$_AddressArrayUtils_$22510",typeString:"library AddressArrayUtils"}},nodeType:"UsingForDirective",src:"1296:38:65",typeName:{baseType:{id:13841,name:"address",nodeType:"ElementaryTypeName",src:"1324:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},id:13842,length:null,nodeType:"ArrayTypeName",src:"1324:9:65",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_storage_ptr",typeString:"address[]"}}},{body:{id:13860,nodeType:"Block",src:"1744:207:65",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:13855,name:"_wrappedEtherAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13847,src:"1815:20:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:13852,name:"_setAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13845,src:"1785:11:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:13851,name:"ISetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5659,src:"1775:9:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ISetToken_$5659_$",typeString:"type(contract ISetToken)"}},id:13853,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"1775:22:65",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:13854,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"tokenIsComponent",nodeType:"MemberAccess",referencedDeclaration:5637,src:"1775:39:65",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$returns$_t_bool_$",typeString:"function (address) view external returns (bool)"}},id:13856,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"1775:61:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e6753657449737375616e63652e76616c696461746557455448497341436f6d706f6e656e744f665365743a20436f6d706f6e656e7473206d75737420636f6e7461696e2077657468",id:13857,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"1850:84:65",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_f4996ffc8c6511dc71439531eafa6fbc81e8f73fc0a3b671ee9bdfc7fc6810f6",typeString:'literal_string "RebalancingSetIssuance.validateWETHIsAComponentOfSet: Components must contain weth"'},value:"RebalancingSetIssuance.validateWETHIsAComponentOfSet: Components must contain weth"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_f4996ffc8c6511dc71439531eafa6fbc81e8f73fc0a3b671ee9bdfc7fc6810f6",typeString:'literal_string "RebalancingSetIssuance.validateWETHIsAComponentOfSet: Components must contain weth"'}],id:13850,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"1754:7:65",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:13858,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"1754:190:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:13859,nodeType:"ExpressionStatement",src:"1754:190:65"}]},documentation:"Validates that wrapped Ether is a component of the SetToken\n     * @param  _setAddress            Address of the SetToken\n@param  _wrappedEtherAddress   Address of wrapped Ether",id:13861,implemented:true,kind:"function",modifiers:[],name:"validateWETHIsAComponentOfSet",nodeType:"FunctionDefinition",parameters:{id:13848,nodeType:"ParameterList",parameters:[{constant:false,id:13845,name:"_setAddress",nodeType:"VariableDeclaration",scope:13861,src:"1646:19:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:13844,name:"address",nodeType:"ElementaryTypeName",src:"1646:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:13847,name:"_wrappedEtherAddress",nodeType:"VariableDeclaration",scope:13861,src:"1675:28:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:13846,name:"address",nodeType:"ElementaryTypeName",src:"1675:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"}],src:"1636:73:65"},returnParameters:{id:13849,nodeType:"ParameterList",parameters:[],src:"1744:0:65"},scope:14134,src:"1598:353:65",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:13890,nodeType:"Block",src:"2451:602:65",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:13871,name:"_rebalancingSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13863,src:"2577:22:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,id:13869,name:"coreInstance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13752,src:"2554:12:65",typeDescriptions:{typeIdentifier:"t_contract$_ICore_$4746",typeString:"contract ICore"}},id:13870,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"validSets",nodeType:"MemberAccess",referencedDeclaration:4483,src:"2554:22:65",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$returns$_t_bool_$",typeString:"function (address) view external returns (bool)"}},id:13872,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2554:46:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e6753657449737375616e63652e76616c6964617465526562616c616e63696e6749737375616e63653a20496e76616c6964206f722064697361626c656420536574546f6b656e2061646472657373",id:13873,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"2614:90:65",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_ca12de2556921da5998e437d2b379fcf7148b192c8fb7fa8c6851d8a028338d1",typeString:'literal_string "RebalancingSetIssuance.validateRebalancingIssuance: Invalid or disabled SetToken address"'},value:"RebalancingSetIssuance.validateRebalancingIssuance: Invalid or disabled SetToken address"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_ca12de2556921da5998e437d2b379fcf7148b192c8fb7fa8c6851d8a028338d1",typeString:'literal_string "RebalancingSetIssuance.validateRebalancingIssuance: Invalid or disabled SetToken address"'}],id:13868,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"2533:7:65",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:13874,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2533:181:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:13875,nodeType:"ExpressionStatement",src:"2533:181:65"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:13886,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:13880,name:"_rebalancingSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13863,src:"2884:22:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:13879,name:"ISetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5659,src:"2874:9:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ISetToken_$5659_$",typeString:"type(contract ISetToken)"}},id:13881,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2874:33:65",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:13882,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:5618,src:"2874:45:65",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:13883,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2874:47:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:13877,name:"_rebalancingSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13865,src:"2846:23:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13878,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mod",nodeType:"MemberAccess",referencedDeclaration:29639,src:"2846:27:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13884,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2846:76:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"==",rightExpression:{argumentTypes:null,hexValue:"30",id:13885,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"2926:1:65",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"2846:81:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e6753657449737375616e63652e76616c6964617465526562616c616e63696e6749737375616e63653a205175616e74697479206d757374206265206d756c7469706c65206f66206e61747572616c20756e6974",id:13887,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"2941:95:65",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_5945d1fab804f93bf2e025072e28f95dc47a2a7c171b66da2dd6955a54cbb7a7",typeString:'literal_string "RebalancingSetIssuance.validateRebalancingIssuance: Quantity must be multiple of natural unit"'},value:"RebalancingSetIssuance.validateRebalancingIssuance: Quantity must be multiple of natural unit"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_5945d1fab804f93bf2e025072e28f95dc47a2a7c171b66da2dd6955a54cbb7a7",typeString:'literal_string "RebalancingSetIssuance.validateRebalancingIssuance: Quantity must be multiple of natural unit"'}],id:13876,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"2825:7:65",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:13888,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2825:221:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:13889,nodeType:"ExpressionStatement",src:"2825:221:65"}]},documentation:"Validates that the passed in address is tracked by Core and that the quantity\nis a multiple of the natural unit\n     * @param  _rebalancingSetAddress    Address of the rebalancing SetToken to issue/redeem\n@param  _rebalancingSetQuantity   The issuance quantity of rebalancing SetToken",id:13891,implemented:true,kind:"function",modifiers:[],name:"validateRebalancingSetIssuance",nodeType:"FunctionDefinition",parameters:{id:13866,nodeType:"ParameterList",parameters:[{constant:false,id:13863,name:"_rebalancingSetAddress",nodeType:"VariableDeclaration",scope:13891,src:"2338:30:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:13862,name:"address",nodeType:"ElementaryTypeName",src:"2338:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",
typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:13865,name:"_rebalancingSetQuantity",nodeType:"VariableDeclaration",scope:13891,src:"2378:31:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13864,name:"uint256",nodeType:"ElementaryTypeName",src:"2378:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"2328:87:65"},returnParameters:{id:13867,nodeType:"ParameterList",parameters:[],src:"2451:0:65"},scope:14134,src:"2289:764:65",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:13966,nodeType:"Block",src:"3835:902:65",statements:[{assignments:[13901],declarations:[{constant:false,id:13901,name:"rebalancingSet",nodeType:"VariableDeclaration",scope:13966,src:"3845:35:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetToken_$5224",typeString:"contract IRebalancingSetToken"},typeName:{contractScope:null,id:13900,name:"IRebalancingSetToken",nodeType:"UserDefinedTypeName",referencedDeclaration:5224,src:"3845:20:65",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetToken_$5224",typeString:"contract IRebalancingSetToken"}},value:null,visibility:"internal"}],id:13905,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:13903,name:"_rebalancingSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13893,src:"3904:22:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:13902,name:"IRebalancingSetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5224,src:"3883:20:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_IRebalancingSetToken_$5224_$",typeString:"type(contract IRebalancingSetToken)"}},id:13904,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3883:44:65",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetToken_$5224",typeString:"contract IRebalancingSetToken"}},nodeType:"VariableDeclarationStatement",src:"3845:82:65"},{assignments:[13907],declarations:[{constant:false,id:13907,name:"unitShares",nodeType:"VariableDeclaration",scope:13966,src:"3938:18:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13906,name:"uint256",nodeType:"ElementaryTypeName",src:"3938:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:13911,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:13908,name:"rebalancingSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13901,src:"3959:14:65",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetToken_$5224",typeString:"contract IRebalancingSetToken"}},id:13909,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"unitShares",nodeType:"MemberAccess",referencedDeclaration:5162,src:"3959:25:65",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:13910,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3959:27:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3938:48:65"},{assignments:[13913],declarations:[{constant:false,id:13913,name:"naturalUnit",nodeType:"VariableDeclaration",scope:13966,src:"3996:19:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13912,name:"uint256",nodeType:"ElementaryTypeName",src:"3996:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:13917,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:13914,name:"rebalancingSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13901,src:"4018:14:65",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetToken_$5224",typeString:"contract IRebalancingSetToken"}},id:13915,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:5147,src:"4018:26:65",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:13916,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4018:28:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3996:50:65"},{assignments:[13919],declarations:[{constant:false,id:13919,name:"requiredBaseSetQuantity",nodeType:"VariableDeclaration",scope:13966,src:"4057:31:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13918,name:"uint256",nodeType:"ElementaryTypeName",src:"4057:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:13927,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:13925,name:"unitShares",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13907,src:"4136:10:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:13922,name:"naturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13913,src:"4119:11:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:13920,name:"_rebalancingSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13895,src:"4091:23:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13921,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"4091:27:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13923,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4091:40:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13924,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"4091:44:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13926,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4091:56:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4057:90:65"},{assignments:[13929],declarations:[{constant:false,id:13929,name:"baseSet",nodeType:"VariableDeclaration",scope:13966,src:"4158:15:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:13928,name:"address",nodeType:"ElementaryTypeName",src:"4158:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"}],id:13933,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:13930,name:"rebalancingSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13901,src:"4176:14:65",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetToken_$5224",typeString:"contract IRebalancingSetToken"}},id:13931,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"currentSet",nodeType:"MemberAccess",referencedDeclaration:5152,src:"4176:25:65",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_address_$",typeString:"function () view external returns (address)"}},id:13932,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4176:27:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},nodeType:"VariableDeclarationStatement",src:"4158:45:65"},{assignments:[13935],declarations:[{constant:false,id:13935,name:"baseSetNaturalUnit",nodeType:"VariableDeclaration",scope:13966,src:"4213:26:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13934,name:"uint256",nodeType:"ElementaryTypeName",src:"4213:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:13941,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:13937,name:"baseSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13929,src:"4252:7:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:13936,name:"ISetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5659,src:"4242:9:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ISetToken_$5659_$",typeString:"type(contract ISetToken)"}},id:13938,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4242:18:65",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:13939,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:5618,src:"4242:30:65",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:13940,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4242:32:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4213:61:65"},{assignments:[13943],declarations:[{constant:false,id:13943,name:"roundDownQuantity",nodeType:"VariableDeclaration",scope:13966,src:"4457:25:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13942,name:"uint256",nodeType:"ElementaryTypeName",src:"4457:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:13948,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:13946,name:"baseSetNaturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13935,src:"4513:18:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:13944,name:"requiredBaseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13919,src:"4485:23:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13945,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mod",nodeType:"MemberAccess",referencedDeclaration:29639,src:"4485:27:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13947,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4485:47:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4457:75:65"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:13951,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:13949,name:"roundDownQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13943,src:"4546:17:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:">",rightExpression:{argumentTypes:null,hexValue:"30",id:13950,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"4566:1:65",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"4546:21:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:null,id:13963,nodeType:"IfStatement",src:"4542:148:65",trueBody:{id:13962,nodeType:"Block",src:"4569:121:65",statements:[{expression:{argumentTypes:null,id:13960,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:13952,name:"requiredBaseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13919,src:"4583:23:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,id:13958,name:"baseSetNaturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13935,src:"4660:18:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:13955,name:"roundDownQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13943,src:"4637:17:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:13953,name:"requiredBaseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13919,src:"4609:23:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13954,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sub",nodeType:"MemberAccess",referencedDeclaration:29595,src:"4609:27:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13956,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4609:46:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13957,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"add",nodeType:"MemberAccess",referencedDeclaration:29619,src:"4609:50:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13959,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4609:70:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"4583:96:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13961,nodeType:"ExpressionStatement",src:"4583:96:65"}]}},{expression:{argumentTypes:null,id:13964,name:"requiredBaseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13919,src:"4707:23:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:13899,id:13965,nodeType:"Return",src:"4700:30:65"}]},documentation:"Given a rebalancing SetToken and a desired issue quantity, calculates the \nminimum issuable quantity of the base SetToken. If the calculated quantity is initially\nnot a multiple of the base SetToken's natural unit, the quantity is rounded up\nto the next base set natural unit.\n     * @param  _rebalancingSetAddress    Address of the rebalancing SetToken to issue\n@param  _rebalancingSetQuantity   The issuance quantity of rebalancing SetToken\n@return requiredBaseSetQuantity   The quantity of base SetToken to issue",id:13967,implemented:true,kind:"function",modifiers:[],name:"getBaseSetIssuanceRequiredQuantity",nodeType:"FunctionDefinition",parameters:{id:13896,nodeType:"ParameterList",parameters:[{constant:false,id:13893,name:"_rebalancingSetAddress",nodeType:"VariableDeclaration",scope:13967,src:"3697:30:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:13892,name:"address",nodeType:"ElementaryTypeName",src:"3697:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:13895,name:"_rebalancingSetQuantity",nodeType:"VariableDeclaration",scope:13967,src:"3737:31:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13894,name:"uint256",nodeType:"ElementaryTypeName",src:"3737:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"3687:87:65"},returnParameters:{id:13899,nodeType:"ParameterList",parameters:[{constant:false,id:13898,name:"",nodeType:"VariableDeclaration",scope:13967,src:"3822:7:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13897,name:"uint256",nodeType:"ElementaryTypeName",src:"3822:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"3821:9:65"},scope:14134,src:"3644:1093:65",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:14e3,nodeType:"Block",src:"5256:438:65",statements:[{assignments:[13975],declarations:[{constant:false,id:13975,name:"baseSetNaturalUnit",nodeType:"VariableDeclaration",scope:14e3,src:"5333:26:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13974,name:"uint256",nodeType:"ElementaryTypeName",src:"5333:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:13981,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:13977,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13969,src:"5372:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:13976,name:"ISetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5659,src:"5362:9:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ISetToken_$5659_$",typeString:"type(contract ISetToken)"}},id:13978,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5362:26:65",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:13979,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:5618,src:"5362:38:65",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:13980,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5362:40:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"5333:69:65"},{assignments:[13983],declarations:[{constant:false,id:13983,name:"baseSetBalance",nodeType:"VariableDeclaration",scope:14e3,src:"5412:22:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13982,name:"uint256",nodeType:"ElementaryTypeName",src:"5412:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:13991,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:13986,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13969,src:"5480:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,arguments:[{argumentTypes:null,id:13988,name:"this",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30576,src:"5517:4:65",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}],id:13987,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"5509:7:65",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:13989,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5509:13:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,id:13984,name:"vaultInstance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13754,src:"5437:13:65",typeDescriptions:{typeIdentifier:"t_contract$_IVault_$5782",typeString:"contract IVault"}},id:13985,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getOwnerBalance",nodeType:"MemberAccess",referencedDeclaration:5781,src:"5437:29:65",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$_t_address_$returns$_t_uint256_$",typeString:"function (address,address) view external returns (uint256)"}},id:13990,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5437:95:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"5412:120:65"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:13996,name:"baseSetNaturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13975,src:"5667:18:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:13994,name:"baseSetBalance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13983,src:"5648:14:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13995,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mod",nodeType:"MemberAccess",referencedDeclaration:29639,src:"5648:18:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13997,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5648:38:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:13992,name:"baseSetBalance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13983,src:"5629:14:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13993,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sub",nodeType:"MemberAccess",referencedDeclaration:29595,src:"5629:18:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13998,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5629:58:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:13973,id:13999,nodeType:"Return",src:"5622:65:65"}]},documentation:"Given a rebalancing SetToken address, retrieve the base SetToken quantity redeem quantity based on the quantity\nheld in the Vault. Rounds down to the nearest base SetToken natural unit\n     * @param _baseSetAddress             The address of the base SetToken\n@return baseSetRedeemQuantity      The quantity of base SetToken to redeem",id:14001,implemented:true,kind:"function",modifiers:[],name:"getBaseSetRedeemQuantity",nodeType:"FunctionDefinition",parameters:{id:13970,nodeType:"ParameterList",parameters:[{constant:false,id:13969,name:"_baseSetAddress",nodeType:"VariableDeclaration",scope:14001,src:"5166:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:13968,name:"address",nodeType:"ElementaryTypeName",src:"5166:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"}],src:"5156:39:65"},returnParameters:{id:13973,nodeType:"ParameterList",parameters:[{constant:false,id:13972,name:"",nodeType:"VariableDeclaration",scope:14001,src:"5243:7:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13971,name:"uint256",nodeType:"ElementaryTypeName",src:"5243:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"5242:9:65"},scope:14134,src:"5123:571:65",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:14021,nodeType:"Block",src:"6414:182:65",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:14011,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14003,src:"6456:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:14012,name:"_transferProxyAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14005,src:"6473:21:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:14013,name:"_keepChangeInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14007,src:"6496:18:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_bool",typeString:"bool"}],id:14010,name:"returnExcessBaseSetFromContract",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14084,src:"6424:31:65",typeDescriptions:{typeIdentifier:"t_function_internal_nonpayable$_t_address_$_t_address_$_t_bool_$returns$__$",typeString:"function (address,address,bool)"}},id:14014,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6424:91:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:14015,nodeType:"ExpressionStatement",src:"6424:91:65"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:14017,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14003,src:"6553:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:14018,name:"_keepChangeInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14007,src:"6570:18:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_bool",typeString:"bool"}],id:14016,name:"returnExcessBaseSetInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14133,src:"6526:26:65",typeDescriptions:{typeIdentifier:"t_function_internal_nonpayable$_t_address_$_t_bool_$returns$__$",typeString:"function (address,bool)"}},id:14019,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6526:63:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:14020,nodeType:"ExpressionStatement",src:"6526:63:65"}]},documentation:"Checks the base SetToken balances in the Vault and on the contract. \nSends any positive quantity to the user directly or into the Vault\ndepending on the keepChangeInVault flag.\n     * @param _baseSetAddress             The address of the base SetToken\n@param _transferProxyAddress       The address of the TransferProxy\n@param  _keepChangeInVault         Boolean signifying whether excess base SetToken is transferred to the user \n                                    or left in the vault",id:14022,implemented:true,kind:"function",modifiers:[],name:"returnExcessBaseSet",nodeType:"FunctionDefinition",parameters:{id:14008,nodeType:"ParameterList",parameters:[{constant:false,id:14003,name:"_baseSetAddress",nodeType:"VariableDeclaration",scope:14022,src:"6291:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:14002,name:"address",nodeType:"ElementaryTypeName",src:"6291:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:14005,name:"_transferProxyAddress",nodeType:"VariableDeclaration",scope:14022,src:"6324:29:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:14004,name:"address",nodeType:"ElementaryTypeName",src:"6324:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:14007,name:"_keepChangeInVault",nodeType:"VariableDeclaration",scope:14022,src:"6363:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"},typeName:{id:14006,name:"bool",nodeType:"ElementaryTypeName",src:"6363:4:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},value:null,visibility:"internal"}],src:"6281:111:65"},returnParameters:{id:14009,nodeType:"ParameterList",parameters:[],src:"6414:0:65"},scope:14134,src:"6253:343:65",stateMutability:"nonpayable",superFunction:null,visibility:"internal"},{body:{id:14083,nodeType:"Block",src:"7315:887:65",statements:[{assignments:[14032],declarations:[{constant:false,id:14032,name:"baseSetQuantity",nodeType:"VariableDeclaration",scope:14083,src:"7325:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:14031,name:"uint256",nodeType:"ElementaryTypeName",src:"7325:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:14040,initialValue:{argumentTypes:null,
arguments:[{argumentTypes:null,id:14035,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14024,src:"7374:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,arguments:[{argumentTypes:null,id:14037,name:"this",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30576,src:"7399:4:65",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}],id:14036,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"7391:7:65",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:14038,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"7391:13:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,id:14033,name:"ERC20Wrapper",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:23679,src:"7351:12:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ERC20Wrapper_$23679_$",typeString:"type(library ERC20Wrapper)"}},id:14034,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"balanceOf",nodeType:"MemberAccess",referencedDeclaration:23535,src:"7351:22:65",typeDescriptions:{typeIdentifier:"t_function_delegatecall_view$_t_address_$_t_address_$returns$_t_uint256_$",typeString:"function (address,address) view returns (uint256)"}},id:14039,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"7351:54:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"7325:80:65"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:14043,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:14041,name:"baseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14032,src:"7428:15:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"==",rightExpression:{argumentTypes:null,hexValue:"30",id:14042,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"7447:1:65",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"7428:20:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:{condition:{argumentTypes:null,id:14046,name:"_keepChangeInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14028,src:"7493:18:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:{id:14080,nodeType:"Block",src:"7997:199:65",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:14074,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14024,src:"8095:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,expression:{argumentTypes:null,id:14075,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"8128:3:65",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:14076,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"8128:10:65",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},{argumentTypes:null,id:14077,name:"baseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14032,src:"8156:15:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address_payable",typeString:"address payable"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:14071,name:"ERC20Wrapper",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:23679,src:"8056:12:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ERC20Wrapper_$23679_$",typeString:"type(library ERC20Wrapper)"}},id:14073,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"transfer",nodeType:"MemberAccess",referencedDeclaration:23579,src:"8056:21:65",typeDescriptions:{typeIdentifier:"t_function_delegatecall_nonpayable$_t_address_$_t_address_$_t_uint256_$returns$__$",typeString:"function (address,address,uint256)"}},id:14078,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"8056:129:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:14079,nodeType:"ExpressionStatement",src:"8056:129:65"}]},id:14081,nodeType:"IfStatement",src:"7489:707:65",trueBody:{id:14070,nodeType:"Block",src:"7513:478:65",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:14050,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14024,src:"7619:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,arguments:[{argumentTypes:null,id:14052,name:"this",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30576,src:"7660:4:65",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}],id:14051,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"7652:7:65",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:14053,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"7652:13:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:14054,name:"_transferProxyAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14026,src:"7683:21:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:14055,name:"baseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14032,src:"7722:15:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:14047,name:"ERC20Wrapper",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:23679,src:"7573:12:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ERC20Wrapper_$23679_$",typeString:"type(library ERC20Wrapper)"}},id:14049,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"ensureAllowance",nodeType:"MemberAccess",referencedDeclaration:23663,src:"7573:28:65",typeDescriptions:{typeIdentifier:"t_function_internal_nonpayable$_t_address_$_t_address_$_t_address_$_t_uint256_$returns$__$",typeString:"function (address,address,address,uint256)"}},id:14056,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"7573:178:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:14057,nodeType:"ExpressionStatement",src:"7573:178:65"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:14062,name:"this",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30576,src:"7867:4:65",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}],id:14061,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"7859:7:65",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:14063,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"7859:13:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,expression:{argumentTypes:null,id:14064,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"7890:3:65",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:14065,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"7890:10:65",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},{argumentTypes:null,id:14066,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14024,src:"7918:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:14067,name:"baseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14032,src:"7951:15:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address_payable",typeString:"address payable"},{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:14058,name:"coreInstance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13752,src:"7815:12:65",typeDescriptions:{typeIdentifier:"t_contract$_ICore_$4746",typeString:"contract ICore"}},id:14060,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"depositModule",nodeType:"MemberAccess",referencedDeclaration:4627,src:"7815:26:65",typeDescriptions:{typeIdentifier:"t_function_external_nonpayable$_t_address_$_t_address_$_t_address_$_t_uint256_$returns$__$",typeString:"function (address,address,address,uint256) external"}},id:14068,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"7815:165:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:14069,nodeType:"ExpressionStatement",src:"7815:165:65"}]}},id:14082,nodeType:"IfStatement",src:"7424:772:65",trueBody:{id:14045,nodeType:"Block",src:"7450:33:65",statements:[{expression:null,functionReturnParameters:14030,id:14044,nodeType:"Return",src:"7465:7:65"}]}}]},documentation:"Checks the base SetToken balances on the contract and sends\nany positive quantity to the user directly or into the Vault\ndepending on the keepChangeInVault flag.\n     * @param _baseSetAddress             The address of the base SetToken\n@param _transferProxyAddress       The address of the TransferProxy\n@param  _keepChangeInVault         Boolean signifying whether excess base SetToken is transfered to the user \n                                    or left in the vault",id:14084,implemented:true,kind:"function",modifiers:[],name:"returnExcessBaseSetFromContract",nodeType:"FunctionDefinition",parameters:{id:14029,nodeType:"ParameterList",parameters:[{constant:false,id:14024,name:"_baseSetAddress",nodeType:"VariableDeclaration",scope:14084,src:"7192:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:14023,name:"address",nodeType:"ElementaryTypeName",src:"7192:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:14026,name:"_transferProxyAddress",nodeType:"VariableDeclaration",scope:14084,src:"7225:29:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:14025,name:"address",nodeType:"ElementaryTypeName",src:"7225:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:14028,name:"_keepChangeInVault",nodeType:"VariableDeclaration",scope:14084,src:"7264:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"},typeName:{id:14027,name:"bool",nodeType:"ElementaryTypeName",src:"7264:4:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},value:null,visibility:"internal"}],src:"7182:111:65"},returnParameters:{id:14030,nodeType:"ParameterList",parameters:[],src:"7315:0:65"},scope:14134,src:"7142:1060:65",stateMutability:"nonpayable",superFunction:null,visibility:"internal"},{body:{id:14132,nodeType:"Block",src:"8796:811:65",statements:[{assignments:[14092],declarations:[{constant:false,id:14092,name:"baseSetQuantityInVault",nodeType:"VariableDeclaration",scope:14132,src:"8867:30:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:14091,name:"uint256",nodeType:"ElementaryTypeName",src:"8867:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:14100,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:14095,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14086,src:"8943:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,arguments:[{argumentTypes:null,id:14097,name:"this",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30576,src:"8980:4:65",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}],id:14096,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"8972:7:65",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:14098,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"8972:13:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,id:14093,name:"vaultInstance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13754,src:"8900:13:65",typeDescriptions:{typeIdentifier:"t_contract$_IVault_$5782",typeString:"contract IVault"}},id:14094,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getOwnerBalance",nodeType:"MemberAccess",referencedDeclaration:5781,src:"8900:29:65",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$_t_address_$returns$_t_uint256_$",typeString:"function (address,address) view external returns (uint256)"}},id:14099,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"8900:95:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"8867:128:65"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:14103,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:14101,name:"baseSetQuantityInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14092,src:"9018:22:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"==",rightExpression:{argumentTypes:null,hexValue:"30",id:14102,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"9044:1:65",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"9018:27:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:{condition:{argumentTypes:null,id:14106,name:"_keepChangeInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14088,src:"9090:18:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:{id:14129,nodeType:"Block",src:"9348:253:65",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:14121,name:"this",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30576,src:"9470:4:65",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}],id:14120,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"9462:7:65",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:14122,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9462:13:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,expression:{argumentTypes:null,id:14123,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"9493:3:65",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:14124,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"9493:10:65",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},{argumentTypes:null,id:14125,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14086,src:"9521:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:14126,name:"baseSetQuantityInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14092,src:"9554:22:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address_payable",typeString:"address payable"},{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:14117,name:"coreInstance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13752,src:"9417:12:65",typeDescriptions:{typeIdentifier:"t_contract$_ICore_$4746",typeString:"contract ICore"}},id:14119,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"withdrawModule",nodeType:"MemberAccess",referencedDeclaration:4638,src:"9417:27:65",typeDescriptions:{typeIdentifier:"t_function_external_nonpayable$_t_address_$_t_address_$_t_address_$_t_uint256_$returns$__$",typeString:"function (address,address,address,uint256) external"}},id:14127,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9417:173:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:14128,nodeType:"ExpressionStatement",src:"9417:173:65"}]},id:14130,nodeType:"IfStatement",src:"9086:515:65",trueBody:{id:14116,nodeType:"Block",src:"9110:232:65",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:14110,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14086,src:"9234:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,expression:{argumentTypes:null,id:14111,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"9267:3:65",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:14112,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"9267:10:65",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},{argumentTypes:null,id:14113,name:"baseSetQuantityInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14092,src:"9295:22:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address_payable",typeString:"address payable"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:14107,name:"coreInstance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13752,src:"9187:12:65",typeDescriptions:{typeIdentifier:"t_contract$_ICore_$4746",typeString:"contract ICore"}},id:14109,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"internalTransfer",nodeType:"MemberAccess",referencedDeclaration:4595,src:"9187:29:65",typeDescriptions:{typeIdentifier:"t_function_external_nonpayable$_t_address_$_t_address_$_t_uint256_$returns$__$",typeString:"function (address,address,uint256) external"}},id:14114,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9187:144:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:14115,nodeType:"ExpressionStatement",src:"9187:144:65"}]}},id:14131,nodeType:"IfStatement",src:"9014:587:65",trueBody:{id:14105,nodeType:"Block",src:"9047:33:65",statements:[{expression:null,functionReturnParameters:14090,id:14104,nodeType:"Return",src:"9062:7:65"}]}}]},documentation:"Checks the base SetToken balances in the Vault and sends\nany positive quantity to the user directly or into the Vault\ndepending on the keepChangeInVault flag.\n     * @param _baseSetAddress             The address of the base SetToken\n@param  _keepChangeInVault         Boolean signifying whether excess base SetToken is transfered to the user \n                                    or left in the vault",id:14133,implemented:true,kind:"function",modifiers:[],name:"returnExcessBaseSetInVault",nodeType:"FunctionDefinition",parameters:{id:14089,nodeType:"ParameterList",parameters:[{constant:false,id:14086,name:"_baseSetAddress",nodeType:"VariableDeclaration",scope:14133,src:"8712:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:14085,name:"address",nodeType:"ElementaryTypeName",src:"8712:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:14088,name:"_keepChangeInVault",nodeType:"VariableDeclaration",scope:14133,src:"8745:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"},typeName:{id:14087,name:"bool",nodeType:"ElementaryTypeName",src:"8745:4:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},value:null,visibility:"internal"}],src:"8702:72:65"},returnParameters:{id:14090,nodeType:"ParameterList",parameters:[],src:"8796:0:65"},scope:14134,src:"8667:940:65",stateMutability:"nonpayable",superFunction:null,visibility:"internal"}],scope:14135,src:"1202:8410:65"}],src:"597:9016:65"},legacyAST:{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/modules/lib/RebalancingSetIssuance.sol",exportedSymbols:{RebalancingSetIssuance:[14134]},id:14135,nodeType:"SourceUnit",nodes:[{id:13822,literals:["solidity","0.5",".7"],nodeType:"PragmaDirective",src:"597:22:65"},{absolutePath:"openzeppelin-solidity/contracts/math/SafeMath.sol",file:"openzeppelin-solidity/contracts/math/SafeMath.sol",id:13824,nodeType:"ImportDirective",scope:14135,sourceUnit:29641,src:"621:77:65",symbolAliases:[{foreign:13823,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/AddressArrayUtils.sol",file:"../../../lib/AddressArrayUtils.sol",id:13826,nodeType:"ImportDirective",scope:14135,sourceUnit:22511,src:"700:71:65",symbolAliases:[{foreign:13825,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/ERC20Wrapper.sol",file:"../../../lib/ERC20Wrapper.sol",id:13828,nodeType:"ImportDirective",scope:14135,sourceUnit:23680,src:"772:61:65",symbolAliases:[{foreign:13827,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IRebalancingSetToken.sol",file:"../../interfaces/IRebalancingSetToken.sol",id:13830,nodeType:"ImportDirective",scope:14135,sourceUnit:5225,src:"834:81:65",symbolAliases:[{foreign:13829,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ISetToken.sol",file:"../../interfaces/ISetToken.sol",id:13832,nodeType:"ImportDirective",scope:14135,sourceUnit:5660,src:"916:59:65",symbolAliases:[{foreign:13831,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/modules/lib/ModuleCoreState.sol",file:"./ModuleCoreState.sol",id:13834,nodeType:"ImportDirective",scope:14135,sourceUnit:13784,src:"976:56:65",symbolAliases:[{foreign:13833,local:null}],unitAlias:""},{baseContracts:[{arguments:null,baseName:{contractScope:null,id:13835,name:"ModuleCoreState",nodeType:"UserDefinedTypeName",referencedDeclaration:13783,src:"1242:15:65",typeDescriptions:{typeIdentifier:"t_contract$_ModuleCoreState_$13783",typeString:"contract ModuleCoreState"}},id:13836,nodeType:"InheritanceSpecifier",src:"1242:15:65"}],contractDependencies:[13783],contractKind:"contract",documentation:"@title RebalancingSetIssuance\n@author Set Protocol\n * The RebalancingSetIssuance contains utility functions used in rebalancing SetToken \nissuance",fullyImplemented:false,id:14134,linearizedBaseContracts:[14134,13783],name:"RebalancingSetIssuance",nodeType:"ContractDefinition",nodes:[{id:13839,libraryName:{contractScope:null,id:13837,name:"SafeMath",nodeType:"UserDefinedTypeName",referencedDeclaration:29640,src:"1270:8:65",typeDescriptions:{typeIdentifier:"t_contract$_SafeMath_$29640",typeString:"library SafeMath"}},nodeType:"UsingForDirective",src:"1264:27:65",typeName:{id:13838,name:"uint256",nodeType:"ElementaryTypeName",src:"1283:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}},{id:13843,libraryName:{contractScope:null,id:13840,name:"AddressArrayUtils",nodeType:"UserDefinedTypeName",referencedDeclaration:22510,src:"1302:17:65",typeDescriptions:{typeIdentifier:"t_contract$_AddressArrayUtils_$22510",typeString:"library AddressArrayUtils"}},nodeType:"UsingForDirective",src:"1296:38:65",typeName:{baseType:{id:13841,name:"address",nodeType:"ElementaryTypeName",src:"1324:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},id:13842,length:null,nodeType:"ArrayTypeName",src:"1324:9:65",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_storage_ptr",typeString:"address[]"}}},{body:{id:13860,nodeType:"Block",src:"1744:207:65",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:13855,name:"_wrappedEtherAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13847,src:"1815:20:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:13852,name:"_setAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13845,src:"1785:11:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:13851,name:"ISetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5659,src:"1775:9:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ISetToken_$5659_$",typeString:"type(contract ISetToken)"}},id:13853,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"1775:22:65",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:13854,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"tokenIsComponent",nodeType:"MemberAccess",referencedDeclaration:5637,src:"1775:39:65",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$returns$_t_bool_$",typeString:"function (address) view external returns (bool)"}},id:13856,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"1775:61:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e6753657449737375616e63652e76616c696461746557455448497341436f6d706f6e656e744f665365743a20436f6d706f6e656e7473206d75737420636f6e7461696e2077657468",id:13857,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"1850:84:65",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_f4996ffc8c6511dc71439531eafa6fbc81e8f73fc0a3b671ee9bdfc7fc6810f6",typeString:'literal_string "RebalancingSetIssuance.validateWETHIsAComponentOfSet: Components must contain weth"'},value:"RebalancingSetIssuance.validateWETHIsAComponentOfSet: Components must contain weth"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_f4996ffc8c6511dc71439531eafa6fbc81e8f73fc0a3b671ee9bdfc7fc6810f6",typeString:'literal_string "RebalancingSetIssuance.validateWETHIsAComponentOfSet: Components must contain weth"'}],id:13850,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"1754:7:65",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:13858,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"1754:190:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:13859,nodeType:"ExpressionStatement",src:"1754:190:65"}]},documentation:"Validates that wrapped Ether is a component of the SetToken\n     * @param  _setAddress            Address of the SetToken\n@param  _wrappedEtherAddress   Address of wrapped Ether",id:13861,implemented:true,kind:"function",modifiers:[],name:"validateWETHIsAComponentOfSet",nodeType:"FunctionDefinition",parameters:{id:13848,nodeType:"ParameterList",parameters:[{constant:false,id:13845,name:"_setAddress",nodeType:"VariableDeclaration",scope:13861,src:"1646:19:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:13844,name:"address",nodeType:"ElementaryTypeName",src:"1646:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"
},{constant:false,id:13847,name:"_wrappedEtherAddress",nodeType:"VariableDeclaration",scope:13861,src:"1675:28:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:13846,name:"address",nodeType:"ElementaryTypeName",src:"1675:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"}],src:"1636:73:65"},returnParameters:{id:13849,nodeType:"ParameterList",parameters:[],src:"1744:0:65"},scope:14134,src:"1598:353:65",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:13890,nodeType:"Block",src:"2451:602:65",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:13871,name:"_rebalancingSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13863,src:"2577:22:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,id:13869,name:"coreInstance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13752,src:"2554:12:65",typeDescriptions:{typeIdentifier:"t_contract$_ICore_$4746",typeString:"contract ICore"}},id:13870,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"validSets",nodeType:"MemberAccess",referencedDeclaration:4483,src:"2554:22:65",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$returns$_t_bool_$",typeString:"function (address) view external returns (bool)"}},id:13872,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2554:46:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e6753657449737375616e63652e76616c6964617465526562616c616e63696e6749737375616e63653a20496e76616c6964206f722064697361626c656420536574546f6b656e2061646472657373",id:13873,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"2614:90:65",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_ca12de2556921da5998e437d2b379fcf7148b192c8fb7fa8c6851d8a028338d1",typeString:'literal_string "RebalancingSetIssuance.validateRebalancingIssuance: Invalid or disabled SetToken address"'},value:"RebalancingSetIssuance.validateRebalancingIssuance: Invalid or disabled SetToken address"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_ca12de2556921da5998e437d2b379fcf7148b192c8fb7fa8c6851d8a028338d1",typeString:'literal_string "RebalancingSetIssuance.validateRebalancingIssuance: Invalid or disabled SetToken address"'}],id:13868,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"2533:7:65",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:13874,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2533:181:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:13875,nodeType:"ExpressionStatement",src:"2533:181:65"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:13886,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:13880,name:"_rebalancingSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13863,src:"2884:22:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:13879,name:"ISetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5659,src:"2874:9:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ISetToken_$5659_$",typeString:"type(contract ISetToken)"}},id:13881,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2874:33:65",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:13882,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:5618,src:"2874:45:65",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:13883,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2874:47:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:13877,name:"_rebalancingSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13865,src:"2846:23:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13878,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mod",nodeType:"MemberAccess",referencedDeclaration:29639,src:"2846:27:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13884,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2846:76:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"==",rightExpression:{argumentTypes:null,hexValue:"30",id:13885,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"2926:1:65",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"2846:81:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"526562616c616e63696e6753657449737375616e63652e76616c6964617465526562616c616e63696e6749737375616e63653a205175616e74697479206d757374206265206d756c7469706c65206f66206e61747572616c20756e6974",id:13887,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"2941:95:65",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_5945d1fab804f93bf2e025072e28f95dc47a2a7c171b66da2dd6955a54cbb7a7",typeString:'literal_string "RebalancingSetIssuance.validateRebalancingIssuance: Quantity must be multiple of natural unit"'},value:"RebalancingSetIssuance.validateRebalancingIssuance: Quantity must be multiple of natural unit"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_5945d1fab804f93bf2e025072e28f95dc47a2a7c171b66da2dd6955a54cbb7a7",typeString:'literal_string "RebalancingSetIssuance.validateRebalancingIssuance: Quantity must be multiple of natural unit"'}],id:13876,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"2825:7:65",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:13888,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2825:221:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:13889,nodeType:"ExpressionStatement",src:"2825:221:65"}]},documentation:"Validates that the passed in address is tracked by Core and that the quantity\nis a multiple of the natural unit\n     * @param  _rebalancingSetAddress    Address of the rebalancing SetToken to issue/redeem\n@param  _rebalancingSetQuantity   The issuance quantity of rebalancing SetToken",id:13891,implemented:true,kind:"function",modifiers:[],name:"validateRebalancingSetIssuance",nodeType:"FunctionDefinition",parameters:{id:13866,nodeType:"ParameterList",parameters:[{constant:false,id:13863,name:"_rebalancingSetAddress",nodeType:"VariableDeclaration",scope:13891,src:"2338:30:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:13862,name:"address",nodeType:"ElementaryTypeName",src:"2338:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:13865,name:"_rebalancingSetQuantity",nodeType:"VariableDeclaration",scope:13891,src:"2378:31:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13864,name:"uint256",nodeType:"ElementaryTypeName",src:"2378:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"2328:87:65"},returnParameters:{id:13867,nodeType:"ParameterList",parameters:[],src:"2451:0:65"},scope:14134,src:"2289:764:65",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:13966,nodeType:"Block",src:"3835:902:65",statements:[{assignments:[13901],declarations:[{constant:false,id:13901,name:"rebalancingSet",nodeType:"VariableDeclaration",scope:13966,src:"3845:35:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetToken_$5224",typeString:"contract IRebalancingSetToken"},typeName:{contractScope:null,id:13900,name:"IRebalancingSetToken",nodeType:"UserDefinedTypeName",referencedDeclaration:5224,src:"3845:20:65",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetToken_$5224",typeString:"contract IRebalancingSetToken"}},value:null,visibility:"internal"}],id:13905,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:13903,name:"_rebalancingSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13893,src:"3904:22:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:13902,name:"IRebalancingSetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5224,src:"3883:20:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_IRebalancingSetToken_$5224_$",typeString:"type(contract IRebalancingSetToken)"}},id:13904,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3883:44:65",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetToken_$5224",typeString:"contract IRebalancingSetToken"}},nodeType:"VariableDeclarationStatement",src:"3845:82:65"},{assignments:[13907],declarations:[{constant:false,id:13907,name:"unitShares",nodeType:"VariableDeclaration",scope:13966,src:"3938:18:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13906,name:"uint256",nodeType:"ElementaryTypeName",src:"3938:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:13911,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:13908,name:"rebalancingSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13901,src:"3959:14:65",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetToken_$5224",typeString:"contract IRebalancingSetToken"}},id:13909,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"unitShares",nodeType:"MemberAccess",referencedDeclaration:5162,src:"3959:25:65",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:13910,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3959:27:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3938:48:65"},{assignments:[13913],declarations:[{constant:false,id:13913,name:"naturalUnit",nodeType:"VariableDeclaration",scope:13966,src:"3996:19:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13912,name:"uint256",nodeType:"ElementaryTypeName",src:"3996:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:13917,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:13914,name:"rebalancingSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13901,src:"4018:14:65",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetToken_$5224",typeString:"contract IRebalancingSetToken"}},id:13915,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:5147,src:"4018:26:65",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:13916,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4018:28:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3996:50:65"},{assignments:[13919],declarations:[{constant:false,id:13919,name:"requiredBaseSetQuantity",nodeType:"VariableDeclaration",scope:13966,src:"4057:31:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13918,name:"uint256",nodeType:"ElementaryTypeName",src:"4057:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:13927,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:13925,name:"unitShares",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13907,src:"4136:10:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:13922,name:"naturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13913,src:"4119:11:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:13920,name:"_rebalancingSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13895,src:"4091:23:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13921,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"4091:27:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13923,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4091:40:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13924,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"4091:44:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13926,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4091:56:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4057:90:65"},{assignments:[13929],declarations:[{constant:false,id:13929,name:"baseSet",nodeType:"VariableDeclaration",scope:13966,src:"4158:15:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:13928,name:"address",nodeType:"ElementaryTypeName",src:"4158:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"}],id:13933,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:13930,name:"rebalancingSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13901,src:"4176:14:65",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetToken_$5224",typeString:"contract IRebalancingSetToken"}},id:13931,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"currentSet",nodeType:"MemberAccess",referencedDeclaration:5152,src:"4176:25:65",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_address_$",typeString:"function () view external returns (address)"}},id:13932,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4176:27:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},nodeType:"VariableDeclarationStatement",src:"4158:45:65"},{assignments:[13935],declarations:[{constant:false,id:13935,name:"baseSetNaturalUnit",nodeType:"VariableDeclaration",scope:13966,src:"4213:26:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13934,name:"uint256",nodeType:"ElementaryTypeName",src:"4213:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:13941,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:13937,name:"baseSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13929,src:"4252:7:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:13936,name:"ISetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5659,src:"4242:9:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ISetToken_$5659_$",typeString:"type(contract ISetToken)"}},id:13938,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4242:18:65",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:13939,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:5618,src:"4242:30:65",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:13940,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4242:32:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4213:61:65"},{assignments:[13943],declarations:[{constant:false,id:13943,name:"roundDownQuantity",nodeType:"VariableDeclaration",scope:13966,src:"4457:25:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13942,name:"uint256",nodeType:"ElementaryTypeName",src:"4457:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:13948,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:13946,name:"baseSetNaturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13935,src:"4513:18:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:13944,name:"requiredBaseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13919,src:"4485:23:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13945,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mod",nodeType:"MemberAccess",referencedDeclaration:29639,src:"4485:27:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13947,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4485:47:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4457:75:65"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:13951,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:13949,name:"roundDownQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13943,src:"4546:17:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:">",rightExpression:{argumentTypes:null,hexValue:"30",id:13950,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"4566:1:65",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"4546:21:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:null,id:13963,nodeType:"IfStatement",src:"4542:148:65",trueBody:{id:13962,nodeType:"Block",src:"4569:121:65",statements:[{expression:{argumentTypes:null,id:13960,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:13952,name:"requiredBaseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13919,src:"4583:23:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,id:13958,name:"baseSetNaturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13935,src:"4660:18:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:13955,name:"roundDownQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13943,src:"4637:17:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:13953,name:"requiredBaseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13919,src:"4609:23:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13954,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sub",nodeType:"MemberAccess",referencedDeclaration:29595,src:"4609:27:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13956,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4609:46:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13957,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"add",nodeType:"MemberAccess",referencedDeclaration:29619,src:"4609:50:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13959,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4609:70:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"4583:96:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13961,nodeType:"ExpressionStatement",src:"4583:96:65"}]}},{expression:{argumentTypes:null,id:13964,name:"requiredBaseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13919,src:"4707:23:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:13899,id:13965,nodeType:"Return",src:"4700:30:65"}]},documentation:"Given a rebalancing SetToken and a desired issue quantity, calculates the \nminimum issuable quantity of the base SetToken. If the calculated quantity is initially\nnot a multiple of the base SetToken's natural unit, the quantity is rounded up\nto the next base set natural unit.\n     * @param  _rebalancingSetAddress    Address of the rebalancing SetToken to issue\n@param  _rebalancingSetQuantity   The issuance quantity of rebalancing SetToken\n@return requiredBaseSetQuantity   The quantity of base SetToken to issue",id:13967,implemented:true,kind:"function",modifiers:[],name:"getBaseSetIssuanceRequiredQuantity",nodeType:"FunctionDefinition",parameters:{id:13896,nodeType:"ParameterList",parameters:[{constant:false,id:13893,name:"_rebalancingSetAddress",nodeType:"VariableDeclaration",scope:13967,src:"3697:30:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:13892,name:"address",nodeType:"ElementaryTypeName",src:"3697:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:13895,name:"_rebalancingSetQuantity",nodeType:"VariableDeclaration",scope:13967,src:"3737:31:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13894,name:"uint256",nodeType:"ElementaryTypeName",src:"3737:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"3687:87:65"},returnParameters:{id:13899,nodeType:"ParameterList",parameters:[{constant:false,id:13898,name:"",nodeType:"VariableDeclaration",scope:13967,src:"3822:7:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13897,name:"uint256",nodeType:"ElementaryTypeName",src:"3822:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"3821:9:65"},scope:14134,src:"3644:1093:65",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:14e3,nodeType:"Block",src:"5256:438:65",statements:[{assignments:[13975],declarations:[{constant:false,id:13975,name:"baseSetNaturalUnit",nodeType:"VariableDeclaration",scope:14e3,src:"5333:26:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13974,name:"uint256",nodeType:"ElementaryTypeName",src:"5333:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:13981,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:13977,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13969,src:"5372:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:13976,name:"ISetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5659,src:"5362:9:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ISetToken_$5659_$",typeString:"type(contract ISetToken)"}},id:13978,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5362:26:65",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:13979,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:5618,src:"5362:38:65",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:13980,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5362:40:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"5333:69:65"},{assignments:[13983],declarations:[{constant:false,id:13983,name:"baseSetBalance",nodeType:"VariableDeclaration",scope:14e3,src:"5412:22:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13982,name:"uint256",nodeType:"ElementaryTypeName",src:"5412:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:13991,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:13986,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13969,src:"5480:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,arguments:[{argumentTypes:null,id:13988,name:"this",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30576,src:"5517:4:65",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}],id:13987,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"5509:7:65",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:13989,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5509:13:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,id:13984,name:"vaultInstance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13754,src:"5437:13:65",typeDescriptions:{typeIdentifier:"t_contract$_IVault_$5782",typeString:"contract IVault"}},id:13985,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getOwnerBalance",nodeType:"MemberAccess",referencedDeclaration:5781,src:"5437:29:65",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$_t_address_$returns$_t_uint256_$",typeString:"function (address,address) view external returns (uint256)"}},id:13990,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5437:95:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"5412:120:65"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:13996,name:"baseSetNaturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13975,src:"5667:18:65",
typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:13994,name:"baseSetBalance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13983,src:"5648:14:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13995,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mod",nodeType:"MemberAccess",referencedDeclaration:29639,src:"5648:18:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13997,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5648:38:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:13992,name:"baseSetBalance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13983,src:"5629:14:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:13993,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sub",nodeType:"MemberAccess",referencedDeclaration:29595,src:"5629:18:65",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:13998,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5629:58:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:13973,id:13999,nodeType:"Return",src:"5622:65:65"}]},documentation:"Given a rebalancing SetToken address, retrieve the base SetToken quantity redeem quantity based on the quantity\nheld in the Vault. Rounds down to the nearest base SetToken natural unit\n     * @param _baseSetAddress             The address of the base SetToken\n@return baseSetRedeemQuantity      The quantity of base SetToken to redeem",id:14001,implemented:true,kind:"function",modifiers:[],name:"getBaseSetRedeemQuantity",nodeType:"FunctionDefinition",parameters:{id:13970,nodeType:"ParameterList",parameters:[{constant:false,id:13969,name:"_baseSetAddress",nodeType:"VariableDeclaration",scope:14001,src:"5166:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:13968,name:"address",nodeType:"ElementaryTypeName",src:"5166:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"}],src:"5156:39:65"},returnParameters:{id:13973,nodeType:"ParameterList",parameters:[{constant:false,id:13972,name:"",nodeType:"VariableDeclaration",scope:14001,src:"5243:7:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:13971,name:"uint256",nodeType:"ElementaryTypeName",src:"5243:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"5242:9:65"},scope:14134,src:"5123:571:65",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:14021,nodeType:"Block",src:"6414:182:65",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:14011,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14003,src:"6456:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:14012,name:"_transferProxyAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14005,src:"6473:21:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:14013,name:"_keepChangeInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14007,src:"6496:18:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_bool",typeString:"bool"}],id:14010,name:"returnExcessBaseSetFromContract",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14084,src:"6424:31:65",typeDescriptions:{typeIdentifier:"t_function_internal_nonpayable$_t_address_$_t_address_$_t_bool_$returns$__$",typeString:"function (address,address,bool)"}},id:14014,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6424:91:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:14015,nodeType:"ExpressionStatement",src:"6424:91:65"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:14017,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14003,src:"6553:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:14018,name:"_keepChangeInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14007,src:"6570:18:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_bool",typeString:"bool"}],id:14016,name:"returnExcessBaseSetInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14133,src:"6526:26:65",typeDescriptions:{typeIdentifier:"t_function_internal_nonpayable$_t_address_$_t_bool_$returns$__$",typeString:"function (address,bool)"}},id:14019,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6526:63:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:14020,nodeType:"ExpressionStatement",src:"6526:63:65"}]},documentation:"Checks the base SetToken balances in the Vault and on the contract. \nSends any positive quantity to the user directly or into the Vault\ndepending on the keepChangeInVault flag.\n     * @param _baseSetAddress             The address of the base SetToken\n@param _transferProxyAddress       The address of the TransferProxy\n@param  _keepChangeInVault         Boolean signifying whether excess base SetToken is transferred to the user \n                                    or left in the vault",id:14022,implemented:true,kind:"function",modifiers:[],name:"returnExcessBaseSet",nodeType:"FunctionDefinition",parameters:{id:14008,nodeType:"ParameterList",parameters:[{constant:false,id:14003,name:"_baseSetAddress",nodeType:"VariableDeclaration",scope:14022,src:"6291:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:14002,name:"address",nodeType:"ElementaryTypeName",src:"6291:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:14005,name:"_transferProxyAddress",nodeType:"VariableDeclaration",scope:14022,src:"6324:29:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:14004,name:"address",nodeType:"ElementaryTypeName",src:"6324:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:14007,name:"_keepChangeInVault",nodeType:"VariableDeclaration",scope:14022,src:"6363:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"},typeName:{id:14006,name:"bool",nodeType:"ElementaryTypeName",src:"6363:4:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},value:null,visibility:"internal"}],src:"6281:111:65"},returnParameters:{id:14009,nodeType:"ParameterList",parameters:[],src:"6414:0:65"},scope:14134,src:"6253:343:65",stateMutability:"nonpayable",superFunction:null,visibility:"internal"},{body:{id:14083,nodeType:"Block",src:"7315:887:65",statements:[{assignments:[14032],declarations:[{constant:false,id:14032,name:"baseSetQuantity",nodeType:"VariableDeclaration",scope:14083,src:"7325:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:14031,name:"uint256",nodeType:"ElementaryTypeName",src:"7325:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:14040,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:14035,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14024,src:"7374:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,arguments:[{argumentTypes:null,id:14037,name:"this",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30576,src:"7399:4:65",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}],id:14036,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"7391:7:65",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:14038,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"7391:13:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,id:14033,name:"ERC20Wrapper",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:23679,src:"7351:12:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ERC20Wrapper_$23679_$",typeString:"type(library ERC20Wrapper)"}},id:14034,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"balanceOf",nodeType:"MemberAccess",referencedDeclaration:23535,src:"7351:22:65",typeDescriptions:{typeIdentifier:"t_function_delegatecall_view$_t_address_$_t_address_$returns$_t_uint256_$",typeString:"function (address,address) view returns (uint256)"}},id:14039,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"7351:54:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"7325:80:65"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:14043,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:14041,name:"baseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14032,src:"7428:15:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"==",rightExpression:{argumentTypes:null,hexValue:"30",id:14042,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"7447:1:65",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"7428:20:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:{condition:{argumentTypes:null,id:14046,name:"_keepChangeInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14028,src:"7493:18:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:{id:14080,nodeType:"Block",src:"7997:199:65",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:14074,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14024,src:"8095:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,expression:{argumentTypes:null,id:14075,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"8128:3:65",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:14076,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"8128:10:65",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},{argumentTypes:null,id:14077,name:"baseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14032,src:"8156:15:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address_payable",typeString:"address payable"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:14071,name:"ERC20Wrapper",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:23679,src:"8056:12:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ERC20Wrapper_$23679_$",typeString:"type(library ERC20Wrapper)"}},id:14073,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"transfer",nodeType:"MemberAccess",referencedDeclaration:23579,src:"8056:21:65",typeDescriptions:{typeIdentifier:"t_function_delegatecall_nonpayable$_t_address_$_t_address_$_t_uint256_$returns$__$",typeString:"function (address,address,uint256)"}},id:14078,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"8056:129:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:14079,nodeType:"ExpressionStatement",src:"8056:129:65"}]},id:14081,nodeType:"IfStatement",src:"7489:707:65",trueBody:{id:14070,nodeType:"Block",src:"7513:478:65",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:14050,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14024,src:"7619:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,arguments:[{argumentTypes:null,id:14052,name:"this",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30576,src:"7660:4:65",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}],id:14051,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"7652:7:65",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:14053,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"7652:13:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:14054,name:"_transferProxyAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14026,src:"7683:21:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:14055,name:"baseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14032,src:"7722:15:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:14047,name:"ERC20Wrapper",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:23679,src:"7573:12:65",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ERC20Wrapper_$23679_$",typeString:"type(library ERC20Wrapper)"}},id:14049,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"ensureAllowance",nodeType:"MemberAccess",referencedDeclaration:23663,src:"7573:28:65",typeDescriptions:{typeIdentifier:"t_function_internal_nonpayable$_t_address_$_t_address_$_t_address_$_t_uint256_$returns$__$",typeString:"function (address,address,address,uint256)"}},id:14056,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"7573:178:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:14057,nodeType:"ExpressionStatement",src:"7573:178:65"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:14062,name:"this",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30576,src:"7867:4:65",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}],id:14061,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"7859:7:65",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:14063,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"7859:13:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,expression:{argumentTypes:null,id:14064,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"7890:3:65",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:14065,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"7890:10:65",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},{argumentTypes:null,id:14066,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14024,src:"7918:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:14067,name:"baseSetQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14032,src:"7951:15:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address_payable",typeString:"address payable"},{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:14058,name:"coreInstance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13752,src:"7815:12:65",typeDescriptions:{typeIdentifier:"t_contract$_ICore_$4746",typeString:"contract ICore"}},id:14060,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"depositModule",nodeType:"MemberAccess",referencedDeclaration:4627,src:"7815:26:65",typeDescriptions:{typeIdentifier:"t_function_external_nonpayable$_t_address_$_t_address_$_t_address_$_t_uint256_$returns$__$",typeString:"function (address,address,address,uint256) external"}},id:14068,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"7815:165:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:14069,nodeType:"ExpressionStatement",src:"7815:165:65"}]}},id:14082,nodeType:"IfStatement",src:"7424:772:65",trueBody:{id:14045,nodeType:"Block",src:"7450:33:65",statements:[{expression:null,functionReturnParameters:14030,id:14044,nodeType:"Return",src:"7465:7:65"}]}}]},documentation:"Checks the base SetToken balances on the contract and sends\nany positive quantity to the user directly or into the Vault\ndepending on the keepChangeInVault flag.\n     * @param _baseSetAddress             The address of the base SetToken\n@param _transferProxyAddress       The address of the TransferProxy\n@param  _keepChangeInVault         Boolean signifying whether excess base SetToken is transfered to the user \n                                    or left in the vault",id:14084,implemented:true,kind:"function",modifiers:[],name:"returnExcessBaseSetFromContract",nodeType:"FunctionDefinition",parameters:{id:14029,nodeType:"ParameterList",parameters:[{constant:false,id:14024,name:"_baseSetAddress",nodeType:"VariableDeclaration",scope:14084,src:"7192:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:14023,name:"address",nodeType:"ElementaryTypeName",src:"7192:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:14026,name:"_transferProxyAddress",nodeType:"VariableDeclaration",scope:14084,src:"7225:29:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:14025,name:"address",nodeType:"ElementaryTypeName",src:"7225:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:14028,name:"_keepChangeInVault",nodeType:"VariableDeclaration",scope:14084,src:"7264:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"},typeName:{id:14027,name:"bool",nodeType:"ElementaryTypeName",src:"7264:4:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},value:null,visibility:"internal"}],src:"7182:111:65"},returnParameters:{id:14030,nodeType:"ParameterList",parameters:[],src:"7315:0:65"},scope:14134,src:"7142:1060:65",stateMutability:"nonpayable",superFunction:null,visibility:"internal"},{body:{id:14132,nodeType:"Block",src:"8796:811:65",statements:[{assignments:[14092],declarations:[{constant:false,id:14092,name:"baseSetQuantityInVault",nodeType:"VariableDeclaration",scope:14132,src:"8867:30:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:14091,name:"uint256",nodeType:"ElementaryTypeName",src:"8867:7:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:14100,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:14095,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14086,src:"8943:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,arguments:[{argumentTypes:null,id:14097,name:"this",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30576,src:"8980:4:65",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}],id:14096,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"8972:7:65",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:14098,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"8972:13:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,id:14093,name:"vaultInstance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13754,src:"8900:13:65",typeDescriptions:{typeIdentifier:"t_contract$_IVault_$5782",typeString:"contract IVault"}},id:14094,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getOwnerBalance",nodeType:"MemberAccess",referencedDeclaration:5781,src:"8900:29:65",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$_t_address_$returns$_t_uint256_$",typeString:"function (address,address) view external returns (uint256)"}},id:14099,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"8900:95:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"8867:128:65"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:14103,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:14101,name:"baseSetQuantityInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14092,src:"9018:22:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"==",rightExpression:{argumentTypes:null,hexValue:"30",id:14102,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"9044:1:65",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"9018:27:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:{condition:{argumentTypes:null,id:14106,name:"_keepChangeInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14088,src:"9090:18:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:{id:14129,nodeType:"Block",src:"9348:253:65",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:14121,name:"this",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30576,src:"9470:4:65",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_RebalancingSetIssuance_$14134",typeString:"contract RebalancingSetIssuance"}],id:14120,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"9462:7:65",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:14122,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9462:13:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,expression:{argumentTypes:null,id:14123,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"9493:3:65",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:14124,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"9493:10:65",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},{argumentTypes:null,id:14125,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14086,src:"9521:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:14126,name:"baseSetQuantityInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14092,src:"9554:22:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address_payable",typeString:"address payable"},{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:14117,name:"coreInstance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13752,src:"9417:12:65",typeDescriptions:{typeIdentifier:"t_contract$_ICore_$4746",typeString:"contract ICore"}},id:14119,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"withdrawModule",nodeType:"MemberAccess",referencedDeclaration:4638,src:"9417:27:65",typeDescriptions:{typeIdentifier:"t_function_external_nonpayable$_t_address_$_t_address_$_t_address_$_t_uint256_$returns$__$",typeString:"function (address,address,address,uint256) external"}},id:14127,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9417:173:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:14128,nodeType:"ExpressionStatement",src:"9417:173:65"}]},id:14130,nodeType:"IfStatement",src:"9086:515:65",trueBody:{id:14116,nodeType:"Block",src:"9110:232:65",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:14110,name:"_baseSetAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14086,src:"9234:15:65",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,expression:{argumentTypes:null,id:14111,name:"msg",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30376,src:"9267:3:65",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},id:14112,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sender",nodeType:"MemberAccess",referencedDeclaration:null,src:"9267:10:65",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}},{argumentTypes:null,id:14113,name:"baseSetQuantityInVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:14092,src:"9295:22:65",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address_payable",typeString:"address payable"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:14107,name:"coreInstance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:13752,src:"9187:12:65",typeDescriptions:{typeIdentifier:"t_contract$_ICore_$4746",typeString:"contract ICore"}},id:14109,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"internalTransfer",nodeType:"MemberAccess",referencedDeclaration:4595,src:"9187:29:65",typeDescriptions:{typeIdentifier:"t_function_external_nonpayable$_t_address_$_t_address_$_t_uint256_$returns$__$",typeString:"function (address,address,uint256) external"}},id:14114,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"9187:144:65",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:14115,nodeType:"ExpressionStatement",src:"9187:144:65"}]}},id:14131,nodeType:"IfStatement",src:"9014:587:65",trueBody:{id:14105,nodeType:"Block",src:"9047:33:65",statements:[{expression:null,functionReturnParameters:14090,id:14104,nodeType:"Return",src:"9062:7:65"}]}}]},documentation:"Checks the base SetToken balances in the Vault and sends\nany positive quantity to the user directly or into the Vault\ndepending on the keepChangeInVault flag.\n     * @param _baseSetAddress             The address of the base SetToken\n@param  _keepChangeInVault         Boolean signifying whether excess base SetToken is transfered to the user \n                                    or left in the vault",id:14133,implemented:true,kind:"function",modifiers:[],name:"returnExcessBaseSetInVault",nodeType:"FunctionDefinition",parameters:{id:14089,nodeType:"ParameterList",parameters:[{constant:false,id:14086,name:"_baseSetAddress",nodeType:"VariableDeclaration",scope:14133,src:"8712:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{
id:14085,name:"address",nodeType:"ElementaryTypeName",src:"8712:7:65",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:14088,name:"_keepChangeInVault",nodeType:"VariableDeclaration",scope:14133,src:"8745:23:65",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"},typeName:{id:14087,name:"bool",nodeType:"ElementaryTypeName",src:"8745:4:65",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},value:null,visibility:"internal"}],src:"8702:72:65"},returnParameters:{id:14090,nodeType:"ParameterList",parameters:[],src:"8796:0:65"},scope:14134,src:"8667:940:65",stateMutability:"nonpayable",superFunction:null,visibility:"internal"}],scope:14135,src:"1202:8410:65"}],src:"597:9016:65"},compiler:{name:"solc",version:"0.5.7+commit.6da8b019.Linux.g++"},networks:{},schemaVersion:"3.0.23",updatedAt:"2020-04-07T04:29:24.614Z",devdoc:{author:"Set Protocol * The RebalancingSetIssuance contains utility functions used in rebalancing SetToken  issuance",methods:{},title:"RebalancingSetIssuance"},userdoc:{methods:{}}};