"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SetUSDValuation={contractName:"SetUSDValuation",abi:[{constant:true,inputs:[],name:"SET_FULL_UNIT",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"}],metadata:'{"compiler":{"version":"0.5.7+commit.6da8b019"},"language":"Solidity","output":{"abi":[{"constant":true,"inputs":[],"name":"SET_FULL_UNIT","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}],"devdoc":{"author":"Set Protocol * Utility functions to derive the USD value of a Set and its components","methods":{},"title":"SetUSDValuation"},"userdoc":{"methods":{}}},"settings":{"compilationTarget":{"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/liquidators/impl/SetUSDValuation.sol":"SetUSDValuation"},"evmVersion":"byzantium","libraries":{},"optimizer":{"enabled":true,"runs":200},"remappings":[]},"sources":{"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ICore.sol":{"keccak256":"0x5dc3db4398630ea52d2a40c9ddfa89d94e65c2770a12bab4d2a5c8eb573fb0a0","urls":["bzzr://25e90b53f61b388e0950b808e2296f82d427b66cfd6021212713436b2a592e31"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IFeeCalculator.sol":{"keccak256":"0xfdce9b333367bfed8f379738b0eabfe4be0045db735e9f24493de09729593d4d","urls":["bzzr://d2fa7438b492f4f08009810e3e9a2e2c22a429c307562e3f5274d4bfe2d21734"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ILiquidator.sol":{"keccak256":"0x9d1e66d56cd51d14787cce5ff8fb378eb6a0bb704e7102d7c4eda5de7f585af3","urls":["bzzr://c44220025ac21fda1dda68e236572c5c4f82bf53ccf504a020487b8c746c7b26"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IOracleWhiteList.sol":{"keccak256":"0xc4623b7082c6e017d1f820a05289a71d4262c01444ff1571e92f64a4e82662af","urls":["bzzr://c11cc5b2b50c5e708a09b10adf350e9ea3d3427cc2f199516db4ae9be498aaac"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IRebalancingSetToken.sol":{"keccak256":"0xe7356a7b0f0cc95d9526395d776f523a48fd65618730d67b4f31f20ffbd380da","urls":["bzzr://605a33a818eff7ce3370f25fccb751f61c066b4db0772605a2215d1357d68072"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IRebalancingSetTokenV2.sol":{"keccak256":"0x46c9dc7c09957eaa4f896b33d8d25ff5268e710172330f033379eed62a052ace","urls":["bzzr://c5b5cdc4e58c0905a03ef70954ac23eefe4776c243049f37e7b93cd8277bb7cb"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ISetToken.sol":{"keccak256":"0xfa6c0c07f8394d89b6b8f72e15778f8452a9341acb20cebb8421f3522aaca1bd","urls":["bzzr://ccf23bb78fd507bf8cbf5cf7ac2a660a1463b87a3689196e42b8f6862d1a6b11"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/Rebalance.sol":{"keccak256":"0x74ffa689d93ced6c6e0377a35ec1274241b6191b5aaac5576ada379ac3840286","urls":["bzzr://25bdda3f1f5adfa2c83c760c44993d250cd2df037360f0018d22d268df79e887"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/RebalancingLibrary.sol":{"keccak256":"0x7f9dd2f95b2ee71a98b94cb9b0df15874aa134e7480d04a1fcf36aff166a55f4","urls":["bzzr://f43a5563ec5df095151eee30cf7a0941b5a971917c27c7b34d9586b36563ab5b"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/SetMath.sol":{"keccak256":"0x4c6762ad3d11c03889df48cc3b26bd199f958deffa651ec30655cd1654a47303","urls":["bzzr://b8e968dd2840d9586babe7852589abff3972135fff299285eaafd31687ae4385"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/liquidators/impl/SetUSDValuation.sol":{"keccak256":"0xa4556b8a8a0c1119a0bff6064314b5040a77881ec064a0b686767c51c736d374","urls":["bzzr://dc1a690ceb3d38bd6b6bcab61d79463d5de26d4565a59ecceeb3448b29745485"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/AddressArrayUtils.sol":{"keccak256":"0xb716eab4e8c5a336a2f19078928530829af097912bd1b925644f914b63601f08","urls":["bzzr://d8a21d39779beb316adb5180d08dcba1941eeccd9412ff08feb21a631c18c269"]},"openzeppelin-solidity/contracts/math/Math.sol":{"keccak256":"0x775160984ceb0931bf67e718fb23afd6fc2a5d38a6e2378ebb438a039ed2269e","urls":["bzzr://209e27ad1c13e3e9b157915e0269ee4c3b6f0a494660dcc4acf1faf102e1a7ad"]},"openzeppelin-solidity/contracts/math/SafeMath.sol":{"keccak256":"0xc2a200a877c4a9b2475c246c54ffecc69ffde3e11af83319c63c2dc5458bac80","urls":["bzzr://c8876e2c39b60f155d748d71d715c8f3903fae5a405ac599adcb6ad2f9a583f9"]},"openzeppelin-solidity/contracts/token/ERC20/ERC20Detailed.sol":{"keccak256":"0xa60f7f7ce98ca2d75c8e02da982d3fe91176269fdab2589bbbb7cc65f2d7c9d3","urls":["bzzr://5edd2c9be304a1e8ed055e243daba5345f242008164f9a0565c33197b860323b"]},"openzeppelin-solidity/contracts/token/ERC20/IERC20.sol":{"keccak256":"0x59e7df16169a498cb8837963b2f5461d88e63bd1eb6c7d58b814d76b84ccbe61","urls":["bzzr://e572c9c4e02e37349702451bf3b5dcbbc86a19da5a51695b5b3e1bfe1e7825dc"]},"set-protocol-oracles/contracts/meta-oracles/interfaces/IOracle.sol":{"keccak256":"0xeb5a447a0b1ef47547ce12a91b72412880edb9690aa9bcd8746fc3a379f2fbe9","urls":["bzzr://261675b916b84f58bea71ec28c4f711291053174ddf47e860c26daaee506744a"]}},"version":1}',bytecode:"0x60d6610025600b82828239805160001a60731461001857fe5b30600052607381538281f3fe7300000000000000000000000000000000000000003014608060405260043610604f577c01000000000000000000000000000000000000000000000000000000006000350463f3a4e2d881146054575b600080fd5b605a606e565b604051606591906087565b60405180910390f35b670de0b6b3a764000081565b6081816099565b82525050565b6020810160938284607a565b92915050565b9056fea265627a7a723058206c935a5e6296a8afe5639be1ca546900ac2a42b0a5495a08dd4ad6d5bb9a6f7d6c6578706572696d656e74616cf50037",deployedBytecode:"0x7300000000000000000000000000000000000000003014608060405260043610604f577c01000000000000000000000000000000000000000000000000000000006000350463f3a4e2d881146054575b600080fd5b605a606e565b604051606591906087565b60405180910390f35b670de0b6b3a764000081565b6081816099565b82525050565b6020810160938284607a565b92915050565b9056fea265627a7a723058206c935a5e6296a8afe5639be1ca546900ac2a42b0a5495a08dd4ad6d5bb9a6f7d6c6578706572696d656e74616cf50037",sourceMap:"1524:4041:51:-;;132:2:-1;166:7;155:9;146:7;137:37;255:7;249:14;246:1;241:23;235:4;232:33;222:2;;269:9;222:2;293:9;290:1;283:20;323:4;314:7;306:22;347:7;338;331:24",deployedSourceMap:"1524:4041:51:-;;;;;;;;;;;;;;;;;;;;;;;;1630:48;;;:::i;:::-;;;;;;;;;;;;;;;;;1670:8;1630:48;:::o;5:128:-1:-;96:31;121:5;96:31;;;91:3;84:44;78:55;;;140:229;266:2;251:18;;280:79;255:9;332:6;280:79;;;237:132;;;;;376:79;445:5;428:27",source:'/*\n    Copyright 2019 Set Labs Inc.\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\npragma solidity 0.5.7;\npragma experimental "ABIEncoderV2";\n\nimport { ERC20Detailed } from "openzeppelin-solidity/contracts/token/ERC20/ERC20Detailed.sol";\nimport { Math } from "openzeppelin-solidity/contracts/math/Math.sol";\nimport { SafeMath } from "openzeppelin-solidity/contracts/math/SafeMath.sol";\nimport { IOracle } from "set-protocol-oracles/contracts/meta-oracles/interfaces/IOracle.sol";\n\nimport { AddressArrayUtils } from "../../../lib/AddressArrayUtils.sol";\nimport { ICore } from "../../interfaces/ICore.sol";\nimport { IOracleWhiteList } from "../../interfaces/IOracleWhiteList.sol";\nimport { IRebalancingSetTokenV2 } from "../../interfaces/IRebalancingSetTokenV2.sol";\nimport { ISetToken } from "../../interfaces/ISetToken.sol";\nimport { SetMath } from "../../lib/SetMath.sol";\n\n\n/**\n * @title SetUSDValuation\n * @author Set Protocol\n *\n * Utility functions to derive the USD value of a Set and its components\n */\nlibrary SetUSDValuation {\n    using SafeMath for uint256;\n    using AddressArrayUtils for address[];\n\n    uint256 constant public SET_FULL_UNIT = 10 ** 18;\n\n    /* ============ SetToken Valuation Helpers ============ */\n\n\n    /**\n     * Calculates value of RebalancingSetToken.\n     *\n     * @return uint256        Streaming fee\n     */\n    function calculateRebalancingSetValue(\n        address _rebalancingSetTokenAddress,\n        IOracleWhiteList _oracleWhitelist\n    )\n        internal\n        view\n        returns (uint256)\n    {\n        IRebalancingSetTokenV2 rebalancingSetToken = IRebalancingSetTokenV2(_rebalancingSetTokenAddress);\n\n        uint256 unitShares = rebalancingSetToken.unitShares();\n        uint256 naturalUnit = rebalancingSetToken.naturalUnit();\n        ISetToken currentSet = rebalancingSetToken.currentSet();\n\n        // Calculate collateral value\n        uint256 collateralValue = calculateSetTokenDollarValue(\n            currentSet,\n            _oracleWhitelist\n        );\n\n        // Value of rebalancing set is collateralValue times unitShares divided by naturalUnit\n        return collateralValue.mul(unitShares).div(naturalUnit);\n    }\n\n    /*\n     * Calculates the USD Value of a full unit Set Token\n     *\n     * @param  _set                 Instance of SetToken\n     * @param  _oracleWhiteList     Instance of oracle whitelist\n     * @return uint256              The USD value of the Set (in cents)\n     */\n    function calculateSetTokenDollarValue(\n        ISetToken _set,\n        IOracleWhiteList _oracleWhitelist\n    )\n        internal\n        view\n        returns (uint256)\n    {\n        uint256 setDollarAmount = 0;\n\n        address[] memory components = _set.getComponents();\n        uint256[] memory units = _set.getUnits();\n        uint256 naturalUnit = _set.naturalUnit();\n\n        // Loop through assets\n        for (uint256 i = 0; i < components.length; i++) {\n            address currentComponent = components[i];\n\n            address oracle = _oracleWhitelist.getOracleAddressByToken(currentComponent);\n            uint256 price = IOracle(oracle).read();\n            uint256 decimals = ERC20Detailed(currentComponent).decimals();\n\n            // Calculate dollar value of single component in Set\n            uint256 tokenDollarValue = calculateTokenAllocationAmountUSD(\n                price,\n                naturalUnit,\n                units[i],\n                decimals\n            );\n\n            // Add value of single component to running component value tally\n            setDollarAmount = setDollarAmount.add(tokenDollarValue);\n        }\n\n        return setDollarAmount;\n    }\n\n    /*\n     * Get USD value of one component in a Set to 18 decimals\n     *\n     * @param  _tokenPrice          The 18 decimal value of one full token\n     * @param  _naturalUnit         The naturalUnit of the set being component belongs to\n     * @param  _unit                The unit of the component in the set\n     * @param  _tokenDecimal        The component token\'s decimal value\n     * @return uint256              The USD value of the component\'s allocation in the Set\n     */\n    function calculateTokenAllocationAmountUSD(\n        uint256 _tokenPrice,\n        uint256 _naturalUnit,\n        uint256 _unit,\n        uint256 _tokenDecimal\n    )\n        internal\n        pure\n        returns (uint256)\n    {\n        uint256 tokenFullUnit = 10 ** _tokenDecimal;\n\n        // Calculate the amount of component base units are in one full set token\n        uint256 componentUnitsInFullToken = SetMath.setToComponent(\n            SET_FULL_UNIT,\n            _unit,\n            _naturalUnit\n        );\n        \n        // Return value of component token in one full set token, to 18 decimals\n        uint256 allocationUSDValue = _tokenPrice\n            .mul(componentUnitsInFullToken)\n            .div(tokenFullUnit);\n\n        require(\n            allocationUSDValue > 0,\n            "SetUSDValuation.calculateTokenAllocationAmountUSD: Value must be > 0"\n        );\n\n        return allocationUSDValue;\n    }\n}',sourcePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/liquidators/impl/SetUSDValuation.sol",ast:{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/liquidators/impl/SetUSDValuation.sol",exportedSymbols:{SetUSDValuation:[8452]},id:8453,nodeType:"SourceUnit",nodes:[{id:8223,literals:["solidity","0.5",".7"],nodeType:"PragmaDirective",src:"597:22:51"},{id:8224,literals:["experimental","ABIEncoderV2"],nodeType:"PragmaDirective",src:"620:35:51"},{absolutePath:"openzeppelin-solidity/contracts/token/ERC20/ERC20Detailed.sol",file:"openzeppelin-solidity/contracts/token/ERC20/ERC20Detailed.sol",id:8226,nodeType:"ImportDirective",scope:8453,sourceUnit:30191,src:"657:94:51",symbolAliases:[{foreign:8225,local:null}],unitAlias:""},{absolutePath:"openzeppelin-solidity/contracts/math/Math.sol",file:"openzeppelin-solidity/contracts/math/Math.sol",id:8228,nodeType:"ImportDirective",scope:8453,sourceUnit:29513,src:"752:69:51",symbolAliases:[{foreign:8227,local:null}],unitAlias:""},{absolutePath:"openzeppelin-solidity/contracts/math/SafeMath.sol",file:"openzeppelin-solidity/contracts/math/SafeMath.sol",id:8230,nodeType:"ImportDirective",scope:8453,sourceUnit:29641,src:"822:77:51",symbolAliases:[{foreign:8229,local:null}],unitAlias:""},{absolutePath:"set-protocol-oracles/contracts/meta-oracles/interfaces/IOracle.sol",file:"set-protocol-oracles/contracts/meta-oracles/interfaces/IOracle.sol",id:8232,nodeType:"ImportDirective",scope:8453,sourceUnit:30299,src:"900:93:51",symbolAliases:[{foreign:8231,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/AddressArrayUtils.sol",file:"../../../lib/AddressArrayUtils.sol",id:8234,nodeType:"ImportDirective",scope:8453,sourceUnit:22511,src:"995:71:51",symbolAliases:[{foreign:8233,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ICore.sol",file:"../../interfaces/ICore.sol",id:8236,nodeType:"ImportDirective",scope:8453,sourceUnit:4747,src:"1067:51:51",symbolAliases:[{foreign:8235,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IOracleWhiteList.sol",file:"../../interfaces/IOracleWhiteList.sol",id:8238,nodeType:"ImportDirective",scope:8453,sourceUnit:5004,src:"1119:73:51",symbolAliases:[{foreign:8237,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IRebalancingSetTokenV2.sol",file:"../../interfaces/IRebalancingSetTokenV2.sol",id:8240,nodeType:"ImportDirective",scope:8453,sourceUnit:5401,src:"1193:85:51",symbolAliases:[{foreign:8239,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ISetToken.sol",file:"../../interfaces/ISetToken.sol",id:8242,nodeType:"ImportDirective",scope:8453,sourceUnit:5660,src:"1279:59:51",symbolAliases:[{foreign:8241,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/SetMath.sol",file:"../../lib/SetMath.sol",id:8244,nodeType:"ImportDirective",scope:8453,sourceUnit:6706,src:"1339:48:51",symbolAliases:[{foreign:8243,local:null}],unitAlias:""},{baseContracts:[],contractDependencies:[],contractKind:"library",documentation:"@title SetUSDValuation\n@author Set Protocol\n * Utility functions to derive the USD value of a Set and its components",fullyImplemented:true,id:8452,linearizedBaseContracts:[8452],name:"SetUSDValuation",nodeType:"ContractDefinition",nodes:[{id:8247,libraryName:{contractScope:null,id:8245,name:"SafeMath",nodeType:"UserDefinedTypeName",referencedDeclaration:29640,src:"1560:8:51",typeDescriptions:{typeIdentifier:"t_contract$_SafeMath_$29640",typeString:"library SafeMath"}},nodeType:"UsingForDirective",src:"1554:27:51",typeName:{id:8246,name:"uint256",nodeType:"ElementaryTypeName",src:"1573:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}},{id:8251,libraryName:{contractScope:null,id:8248,name:"AddressArrayUtils",nodeType:"UserDefinedTypeName",referencedDeclaration:22510,src:"1592:17:51",typeDescriptions:{typeIdentifier:"t_contract$_AddressArrayUtils_$22510",typeString:"library AddressArrayUtils"}},nodeType:"UsingForDirective",src:"1586:38:51",typeName:{baseType:{id:8249,name:"address",nodeType:"ElementaryTypeName",src:"1614:7:51",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},id:8250,length:null,nodeType:"ArrayTypeName",src:"1614:9:51",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_storage_ptr",typeString:"address[]"}}},{constant:true,id:8256,name:"SET_FULL_UNIT",nodeType:"VariableDeclaration",scope:8452,src:"1630:48:51",stateVariable:true,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8252,name:"uint256",nodeType:"ElementaryTypeName",src:"1630:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:{argumentTypes:null,commonType:{typeIdentifier:"t_rational_1000000000000000000_by_1",typeString:"int_const 1000000000000000000"},id:8255,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,leftExpression:{argumentTypes:null,hexValue:"3130",id:8253,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"1670:2:51",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_10_by_1",typeString:"int_const 10"},value:"10"},nodeType:"BinaryOperation",operator:"**",rightExpression:{argumentTypes:null,hexValue:"3138",id:8254,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"1676:2:51",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_18_by_1",typeString:"int_const 18"},value:"18"},src:"1670:8:51",typeDescriptions:{typeIdentifier:"t_rational_1000000000000000000_by_1",typeString:"int_const 1000000000000000000"}},visibility:"public"},{body:{id:8304,nodeType:"Block",src:"2057:635:51",statements:[{assignments:[8266],declarations:[{constant:false,id:8266,name:"rebalancingSetToken",nodeType:"VariableDeclaration",scope:8304,src:"2067:42:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetTokenV2_$5400",typeString:"contract IRebalancingSetTokenV2"},typeName:{contractScope:null,id:8265,name:"IRebalancingSetTokenV2",nodeType:"UserDefinedTypeName",referencedDeclaration:5400,src:"2067:22:51",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetTokenV2_$5400",typeString:"contract IRebalancingSetTokenV2"}},value:null,visibility:"internal"}],id:8270,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:8268,name:"_rebalancingSetTokenAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8258,src:"2135:27:51",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:8267,name:"IRebalancingSetTokenV2",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5400,src:"2112:22:51",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_IRebalancingSetTokenV2_$5400_$",typeString:"type(contract IRebalancingSetTokenV2)"}},id:8269,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2112:51:51",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetTokenV2_$5400",typeString:"contract IRebalancingSetTokenV2"}},nodeType:"VariableDeclarationStatement",src:"2067:96:51"},{assignments:[8272],declarations:[{constant:false,id:8272,name:"unitShares",nodeType:"VariableDeclaration",scope:8304,src:"2174:18:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8271,name:"uint256",nodeType:"ElementaryTypeName",src:"2174:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8276,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:8273,name:"rebalancingSetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8266,src:"2195:19:51",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetTokenV2_$5400",typeString:"contract IRebalancingSetTokenV2"}},id:8274,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"unitShares",nodeType:"MemberAccess",referencedDeclaration:5364,src:"2195:30:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:8275,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2195:32:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"2174:53:51"},{assignments:[8278],declarations:[{constant:false,id:8278,name:"naturalUnit",nodeType:"VariableDeclaration",scope:8304,src:"2237:19:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8277,name:"uint256",nodeType:"ElementaryTypeName",src:"2237:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8282,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:8279,name:"rebalancingSetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8266,src:"2259:19:51",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetTokenV2_$5400",typeString:"contract IRebalancingSetTokenV2"}},id:8280,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:5349,src:"2259:31:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:8281,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2259:33:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"2237:55:51"},{assignments:[8284],declarations:[{constant:false,id:8284,name:"currentSet",nodeType:"VariableDeclaration",scope:8304,src:"2302:20:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"},typeName:{contractScope:null,id:8283,name:"ISetToken",nodeType:"UserDefinedTypeName",referencedDeclaration:5659,src:"2302:9:51",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},value:null,visibility:"internal"}],id:8288,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:8285,name:"rebalancingSetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8266,src:"2325:19:51",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetTokenV2_$5400",typeString:"contract IRebalancingSetTokenV2"}},id:8286,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"currentSet",nodeType:"MemberAccess",referencedDeclaration:5354,src:"2325:30:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_contract$_ISetToken_$5659_$",typeString:"function () view external returns (contract ISetToken)"}},id:8287,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2325:32:51",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},nodeType:"VariableDeclarationStatement",src:"2302:55:51"},{assignments:[8290],declarations:[{constant:false,id:8290,name:"collateralValue",nodeType:"VariableDeclaration",scope:8304,src:"2406:23:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8289,name:"uint256",nodeType:"ElementaryTypeName",src:"2406:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8295,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:8292,name:"currentSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8284,src:"2474:10:51",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},{argumentTypes:null,id:8293,name:"_oracleWhitelist",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8260,src:"2498:16:51",typeDescriptions:{typeIdentifier:"t_contract$_IOracleWhiteList_$5003",typeString:"contract IOracleWhiteList"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"},{typeIdentifier:"t_contract$_IOracleWhiteList_$5003",typeString:"contract IOracleWhiteList"}],id:8291,name:"calculateSetTokenDollarValue",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8403,src:"2432:28:51",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_contract$_ISetToken_$5659_$_t_contract$_IOracleWhiteList_$5003_$returns$_t_uint256_$",typeString:"function (contract ISetToken,contract IOracleWhiteList) view returns (uint256)"}},id:8294,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2432:92:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"2406:118:51"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:8301,name:"naturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8278,src:"2673:11:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:8298,name:"unitShares",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8272,src:"2657:10:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:8296,name:"collateralValue",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8290,src:"2637:15:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:8297,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"2637:19:51",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:8299,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2637:31:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:8300,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"2637:35:51",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:8302,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2637:48:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:8264,id:8303,nodeType:"Return",src:"2630:55:51"}]},documentation:"Calculates value of RebalancingSetToken.\n     * @return uint256        Streaming fee",id:8305,implemented:true,kind:"function",modifiers:[],name:"calculateRebalancingSetValue",nodeType:"FunctionDefinition",parameters:{id:8261,nodeType:"ParameterList",parameters:[{constant:false,id:8258,name:"_rebalancingSetTokenAddress",nodeType:"VariableDeclaration",scope:8305,src:"1912:35:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:8257,name:"address",nodeType:"ElementaryTypeName",src:"1912:7:51",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:8260,name:"_oracleWhitelist",nodeType:"VariableDeclaration",scope:8305,src:"1957:33:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_contract$_IOracleWhiteList_$5003",typeString:"contract IOracleWhiteList"},typeName:{contractScope:null,id:8259,name:"IOracleWhiteList",nodeType:"UserDefinedTypeName",referencedDeclaration:5003,src:"1957:16:51",typeDescriptions:{typeIdentifier:"t_contract$_IOracleWhiteList_$5003",typeString:"contract IOracleWhiteList"}},value:null,visibility:"internal"}],src:"1902:94:51"},returnParameters:{id:8264,nodeType:"ParameterList",parameters:[{constant:false,id:8263,name:"",nodeType:"VariableDeclaration",scope:8305,src:"2044:7:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8262,name:"uint256",nodeType:"ElementaryTypeName",src:"2044:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"2043:9:51"},scope:8452,src:"1865:827:51",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:8402,nodeType:"Block",src:"3142:1015:51",statements:[{assignments:[8315],declarations:[{constant:false,id:8315,name:"setDollarAmount",nodeType:"VariableDeclaration",scope:8402,src:"3152:23:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8314,name:"uint256",nodeType:"ElementaryTypeName",src:"3152:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8317,initialValue:{argumentTypes:null,hexValue:"30",id:8316,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"3178:1:51",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},nodeType:"VariableDeclarationStatement",src:"3152:27:51"},{assignments:[8321],declarations:[{constant:false,id:8321,name:"components",nodeType:"VariableDeclaration",scope:8402,src:"3190:27:51",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_memory_ptr",typeString:"address[]"},typeName:{baseType:{id:8319,name:"address",nodeType:"ElementaryTypeName",src:"3190:7:51",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},id:8320,length:null,nodeType:"ArrayTypeName",src:"3190:9:51",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_storage_ptr",typeString:"address[]"}},value:null,visibility:"internal"}],id:8325,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:8322,name:"_set",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8307,src:"3220:4:51",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"
}},id:8323,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getComponents",nodeType:"MemberAccess",referencedDeclaration:5624,src:"3220:18:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_array$_t_address_$dyn_memory_ptr_$",typeString:"function () view external returns (address[] memory)"}},id:8324,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3220:20:51",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_memory_ptr",typeString:"address[] memory"}},nodeType:"VariableDeclarationStatement",src:"3190:50:51"},{assignments:[8329],declarations:[{constant:false,id:8329,name:"units",nodeType:"VariableDeclaration",scope:8402,src:"3250:22:51",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:8327,name:"uint256",nodeType:"ElementaryTypeName",src:"3250:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:8328,length:null,nodeType:"ArrayTypeName",src:"3250:9:51",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:8333,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:8330,name:"_set",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8307,src:"3275:4:51",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:8331,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getUnits",nodeType:"MemberAccess",referencedDeclaration:5630,src:"3275:13:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_array$_t_uint256_$dyn_memory_ptr_$",typeString:"function () view external returns (uint256[] memory)"}},id:8332,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3275:15:51",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"3250:40:51"},{assignments:[8335],declarations:[{constant:false,id:8335,name:"naturalUnit",nodeType:"VariableDeclaration",scope:8402,src:"3300:19:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8334,name:"uint256",nodeType:"ElementaryTypeName",src:"3300:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8339,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:8336,name:"_set",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8307,src:"3322:4:51",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:8337,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:5618,src:"3322:16:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:8338,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3322:18:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3300:40:51"},{body:{id:8398,nodeType:"Block",src:"3430:688:51",statements:[{assignments:[8352],declarations:[{constant:false,id:8352,name:"currentComponent",nodeType:"VariableDeclaration",scope:8398,src:"3444:24:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:8351,name:"address",nodeType:"ElementaryTypeName",src:"3444:7:51",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"}],id:8356,initialValue:{argumentTypes:null,baseExpression:{argumentTypes:null,id:8353,name:"components",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8321,src:"3471:10:51",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_memory_ptr",typeString:"address[] memory"}},id:8355,indexExpression:{argumentTypes:null,id:8354,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8341,src:"3482:1:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"3471:13:51",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},nodeType:"VariableDeclarationStatement",src:"3444:40:51"},{assignments:[8358],declarations:[{constant:false,id:8358,name:"oracle",nodeType:"VariableDeclaration",scope:8398,src:"3499:14:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:8357,name:"address",nodeType:"ElementaryTypeName",src:"3499:7:51",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"}],id:8363,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:8361,name:"currentComponent",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8352,src:"3557:16:51",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,id:8359,name:"_oracleWhitelist",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8309,src:"3516:16:51",typeDescriptions:{typeIdentifier:"t_contract$_IOracleWhiteList_$5003",typeString:"contract IOracleWhiteList"}},id:8360,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getOracleAddressByToken",nodeType:"MemberAccess",referencedDeclaration:5002,src:"3516:40:51",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$returns$_t_address_$",typeString:"function (address) view external returns (address)"}},id:8362,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3516:58:51",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},nodeType:"VariableDeclarationStatement",src:"3499:75:51"},{assignments:[8365],declarations:[{constant:false,id:8365,name:"price",nodeType:"VariableDeclaration",scope:8398,src:"3588:13:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8364,name:"uint256",nodeType:"ElementaryTypeName",src:"3588:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8371,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:8367,name:"oracle",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8358,src:"3612:6:51",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:8366,name:"IOracle",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30298,src:"3604:7:51",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_IOracle_$30298_$",typeString:"type(contract IOracle)"}},id:8368,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3604:15:51",typeDescriptions:{typeIdentifier:"t_contract$_IOracle_$30298",typeString:"contract IOracle"}},id:8369,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"read",nodeType:"MemberAccess",referencedDeclaration:30297,src:"3604:20:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:8370,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3604:22:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3588:38:51"},{assignments:[8373],declarations:[{constant:false,id:8373,name:"decimals",nodeType:"VariableDeclaration",scope:8398,src:"3640:16:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8372,name:"uint256",nodeType:"ElementaryTypeName",src:"3640:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8379,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:8375,name:"currentComponent",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8352,src:"3673:16:51",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:8374,name:"ERC20Detailed",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30190,src:"3659:13:51",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ERC20Detailed_$30190_$",typeString:"type(contract ERC20Detailed)"}},id:8376,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3659:31:51",typeDescriptions:{typeIdentifier:"t_contract$_ERC20Detailed_$30190",typeString:"contract ERC20Detailed"}},id:8377,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"decimals",nodeType:"MemberAccess",referencedDeclaration:30189,src:"3659:40:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint8_$",typeString:"function () view external returns (uint8)"}},id:8378,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3659:42:51",typeDescriptions:{typeIdentifier:"t_uint8",typeString:"uint8"}},nodeType:"VariableDeclarationStatement",src:"3640:61:51"},{assignments:[8381],declarations:[{constant:false,id:8381,name:"tokenDollarValue",nodeType:"VariableDeclaration",scope:8398,src:"3781:24:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8380,name:"uint256",nodeType:"ElementaryTypeName",src:"3781:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8390,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:8383,name:"price",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8365,src:"3859:5:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:8384,name:"naturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8335,src:"3882:11:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,baseExpression:{argumentTypes:null,id:8385,name:"units",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8329,src:"3911:5:51",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:8387,indexExpression:{argumentTypes:null,id:8386,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8341,src:"3917:1:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"3911:8:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:8388,name:"decimals",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8373,src:"3937:8:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"}],id:8382,name:"calculateTokenAllocationAmountUSD",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8451,src:"3808:33:51",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$",typeString:"function (uint256,uint256,uint256,uint256) pure returns (uint256)"}},id:8389,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3808:151:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3781:178:51"},{expression:{argumentTypes:null,id:8396,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:8391,name:"setDollarAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8315,src:"4052:15:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,id:8394,name:"tokenDollarValue",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8381,src:"4090:16:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:8392,name:"setDollarAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8315,src:"4070:15:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:8393,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"add",nodeType:"MemberAccess",referencedDeclaration:29619,src:"4070:19:51",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:8395,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4070:37:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"4052:55:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:8397,nodeType:"ExpressionStatement",src:"4052:55:51"}]},condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:8347,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:8344,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8341,src:"3402:1:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<",rightExpression:{argumentTypes:null,expression:{argumentTypes:null,id:8345,name:"components",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8321,src:"3406:10:51",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_memory_ptr",typeString:"address[] memory"}},id:8346,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"length",nodeType:"MemberAccess",referencedDeclaration:null,src:"3406:17:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"3402:21:51",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:8399,initializationExpression:{assignments:[8341],declarations:[{constant:false,id:8341,name:"i",nodeType:"VariableDeclaration",scope:8399,src:"3387:9:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8340,name:"uint256",nodeType:"ElementaryTypeName",src:"3387:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8343,initialValue:{argumentTypes:null,hexValue:"30",id:8342,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"3399:1:51",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},nodeType:"VariableDeclarationStatement",src:"3387:13:51"},loopExpression:{expression:{argumentTypes:null,id:8349,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"UnaryOperation",operator:"++",prefix:false,src:"3425:3:51",subExpression:{argumentTypes:null,id:8348,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8341,src:"3425:1:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:8350,nodeType:"ExpressionStatement",src:"3425:3:51"},nodeType:"ForStatement",src:"3382:736:51"},{expression:{argumentTypes:null,id:8400,name:"setDollarAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8315,src:"4135:15:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:8313,id:8401,nodeType:"Return",src:"4128:22:51"}]},documentation:null,id:8403,implemented:true,kind:"function",modifiers:[],name:"calculateSetTokenDollarValue",nodeType:"FunctionDefinition",parameters:{id:8310,nodeType:"ParameterList",parameters:[{constant:false,id:8307,name:"_set",nodeType:"VariableDeclaration",scope:8403,src:"3018:14:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"},typeName:{contractScope:null,id:8306,name:"ISetToken",nodeType:"UserDefinedTypeName",referencedDeclaration:5659,src:"3018:9:51",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},value:null,visibility:"internal"},{constant:false,id:8309,name:"_oracleWhitelist",nodeType:"VariableDeclaration",scope:8403,src:"3042:33:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_contract$_IOracleWhiteList_$5003",typeString:"contract IOracleWhiteList"},typeName:{contractScope:null,id:8308,name:"IOracleWhiteList",nodeType:"UserDefinedTypeName",referencedDeclaration:5003,src:"3042:16:51",typeDescriptions:{typeIdentifier:"t_contract$_IOracleWhiteList_$5003",typeString:"contract IOracleWhiteList"}},value:null,visibility:"internal"}],src:"3008:73:51"},returnParameters:{id:8313,nodeType:"ParameterList",parameters:[{constant:false,id:8312,name:"",nodeType:"VariableDeclaration",scope:8403,src:"3129:7:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8311,name:"uint256",nodeType:"ElementaryTypeName",src:"3129:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"3128:9:51"},scope:8452,src:"2971:1186:51",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:8450,nodeType:"Block",src:"4870:693:51",statements:[{assignments:[8417],declarations:[{constant:false,id:8417,name:"tokenFullUnit",nodeType:"VariableDeclaration",scope:8450,src:"4880:21:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8416,name:"uint256",nodeType:"ElementaryTypeName",src:"4880:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8421,initialValue:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:8420,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,hexValue:"3130",id:8418,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"4904:2:51",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_10_by_1",typeString:"int_const 10"},value:"10"},nodeType:"BinaryOperation",operator:"**",rightExpression:{argumentTypes:null,id:8419,name:"_tokenDecimal",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8411,src:"4910:13:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"4904:19:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4880:43:51"},{assignments:[8423],declarations:[{constant:false,id:8423,name:"componentUnitsInFullToken",nodeType:"VariableDeclaration",scope:8450,src:"5016:33:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8422,name:"uint256",nodeType:"ElementaryTypeName",src:"5016:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8430,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:8426,name:"SET_FULL_UNIT",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8256,src:"5088:13:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:8427,name:"_unit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8409,src:"5115:5:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:8428,name:"_naturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8407,src:"5134:12:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:8424,name:"SetMath",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6705,src:"5052:7:51",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_SetMath_$6705_$",typeString:"type(library SetMath)"}},id:8425,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"setToComponent",nodeType:"MemberAccess",referencedDeclaration:6684,src:"5052:22:51",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$",typeString:"function (uint256,uint256,uint256) pure returns (uint256)"}},id:8429,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5052:104:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"5016:140:51"},{assignments:[8432],declarations:[{constant:false,id:8432,name:"allocationUSDValue",nodeType:"VariableDeclaration",scope:8450,src:"5256:26:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8431,name:"uint256",nodeType:"ElementaryTypeName",src:"5256:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8440,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:8438,name:"tokenFullUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8417,src:"5358:13:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:8435,name:"componentUnitsInFullToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8423,src:"5314:25:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:8433,name:"_tokenPrice",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8405,src:"5285:11:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:8434,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"5285:28:51",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:8436,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5285:55:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:8437,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"5285:72:51",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:8439,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5285:87:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"5256:116:51"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:8444,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:8442,name:"allocationUSDValue",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8432,src:"5404:18:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:">",rightExpression:{argumentTypes:null,hexValue:"30",id:8443,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"5425:1:51",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"5404:22:51",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"53657455534456616c756174696f6e2e63616c63756c617465546f6b656e416c6c6f636174696f6e416d6f756e745553443a2056616c7565206d757374206265203e2030",id:8445,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"5440:70:51",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_5c8b8aecbedd5daaa76e92721612f5fe307e44dcf48ae327efd5c0557c862e28",typeString:'literal_string "SetUSDValuation.calculateTokenAllocationAmountUSD: Value must be > 0"'},value:"SetUSDValuation.calculateTokenAllocationAmountUSD: Value must be > 0"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_5c8b8aecbedd5daaa76e92721612f5fe307e44dcf48ae327efd5c0557c862e28",typeString:'literal_string "SetUSDValuation.calculateTokenAllocationAmountUSD: Value must be > 0"'}],id:8441,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"5383:7:51",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:8446,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5383:137:51",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:8447,nodeType:"ExpressionStatement",src:"5383:137:51"},{expression:{argumentTypes:null,id:8448,name:"allocationUSDValue",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8432,src:"5538:18:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:8415,id:8449,nodeType:"Return",src:"5531:25:51"}]},documentation:null,id:8451,implemented:true,kind:"function",modifiers:[],name:"calculateTokenAllocationAmountUSD",nodeType:"FunctionDefinition",parameters:{id:8412,nodeType:"ParameterList",parameters:[{constant:false,id:8405,name:"_tokenPrice",nodeType:"VariableDeclaration",scope:8451,src:"4700:19:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8404,name:"uint256",nodeType:"ElementaryTypeName",src:"4700:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:8407,name:"_naturalUnit",nodeType:"VariableDeclaration",scope:8451,src:"4729:20:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8406,name:"uint256",nodeType:"ElementaryTypeName",src:"4729:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:8409,name:"_unit",nodeType:"VariableDeclaration",scope:8451,src:"4759:13:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8408,name:"uint256",nodeType:"ElementaryTypeName",src:"4759:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:8411,name:"_tokenDecimal",nodeType:"VariableDeclaration",scope:8451,src:"4782:21:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8410,name:"uint256",nodeType:"ElementaryTypeName",src:"4782:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"4690:119:51"},returnParameters:{id:8415,nodeType:"ParameterList",parameters:[{constant:false,id:8414,name:"",nodeType:"VariableDeclaration",scope:8451,src:"4857:7:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8413,name:"uint256",nodeType:"ElementaryTypeName",src:"4857:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"4856:9:51"},scope:8452,src:"4648:915:51",stateMutability:"pure",superFunction:null,visibility:"internal"}],scope:8453,src:"1524:4041:51"}],src:"597:4968:51"},legacyAST:{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/liquidators/impl/SetUSDValuation.sol",exportedSymbols:{SetUSDValuation:[8452]},id:8453,nodeType:"SourceUnit",nodes:[{id:8223,literals:["solidity","0.5",".7"],nodeType:"PragmaDirective",src:"597:22:51"},{id:8224,literals:["experimental","ABIEncoderV2"],nodeType:"PragmaDirective",src:"620:35:51"},{absolutePath:"openzeppelin-solidity/contracts/token/ERC20/ERC20Detailed.sol",file:"openzeppelin-solidity/contracts/token/ERC20/ERC20Detailed.sol",id:8226,nodeType:"ImportDirective",scope:8453,sourceUnit:30191,src:"657:94:51",symbolAliases:[{foreign:8225,local:null}],unitAlias:""},{absolutePath:"openzeppelin-solidity/contracts/math/Math.sol",file:"openzeppelin-solidity/contracts/math/Math.sol",id:8228,nodeType:"ImportDirective",scope:8453,sourceUnit:29513,src:"752:69:51",symbolAliases:[{foreign:8227,local:null}],unitAlias:""},{absolutePath:"openzeppelin-solidity/contracts/math/SafeMath.sol",file:"openzeppelin-solidity/contracts/math/SafeMath.sol",id:8230,nodeType:"ImportDirective",scope:8453,sourceUnit:29641,src:"822:77:51",symbolAliases:[{foreign:8229,local:null}],unitAlias:""},{absolutePath:"set-protocol-oracles/contracts/meta-oracles/interfaces/IOracle.sol",file:"set-protocol-oracles/contracts/meta-oracles/interfaces/IOracle.sol",id:8232,nodeType:"ImportDirective",scope:8453,sourceUnit:30299,src:"900:93:51",symbolAliases:[{foreign:8231,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/AddressArrayUtils.sol",file:"../../../lib/AddressArrayUtils.sol",id:8234,nodeType:"ImportDirective",scope:8453,sourceUnit:22511,src:"995:71:51",symbolAliases:[{foreign:8233,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ICore.sol",file:"../../interfaces/ICore.sol",
id:8236,nodeType:"ImportDirective",scope:8453,sourceUnit:4747,src:"1067:51:51",symbolAliases:[{foreign:8235,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IOracleWhiteList.sol",file:"../../interfaces/IOracleWhiteList.sol",id:8238,nodeType:"ImportDirective",scope:8453,sourceUnit:5004,src:"1119:73:51",symbolAliases:[{foreign:8237,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IRebalancingSetTokenV2.sol",file:"../../interfaces/IRebalancingSetTokenV2.sol",id:8240,nodeType:"ImportDirective",scope:8453,sourceUnit:5401,src:"1193:85:51",symbolAliases:[{foreign:8239,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ISetToken.sol",file:"../../interfaces/ISetToken.sol",id:8242,nodeType:"ImportDirective",scope:8453,sourceUnit:5660,src:"1279:59:51",symbolAliases:[{foreign:8241,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/SetMath.sol",file:"../../lib/SetMath.sol",id:8244,nodeType:"ImportDirective",scope:8453,sourceUnit:6706,src:"1339:48:51",symbolAliases:[{foreign:8243,local:null}],unitAlias:""},{baseContracts:[],contractDependencies:[],contractKind:"library",documentation:"@title SetUSDValuation\n@author Set Protocol\n * Utility functions to derive the USD value of a Set and its components",fullyImplemented:true,id:8452,linearizedBaseContracts:[8452],name:"SetUSDValuation",nodeType:"ContractDefinition",nodes:[{id:8247,libraryName:{contractScope:null,id:8245,name:"SafeMath",nodeType:"UserDefinedTypeName",referencedDeclaration:29640,src:"1560:8:51",typeDescriptions:{typeIdentifier:"t_contract$_SafeMath_$29640",typeString:"library SafeMath"}},nodeType:"UsingForDirective",src:"1554:27:51",typeName:{id:8246,name:"uint256",nodeType:"ElementaryTypeName",src:"1573:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}},{id:8251,libraryName:{contractScope:null,id:8248,name:"AddressArrayUtils",nodeType:"UserDefinedTypeName",referencedDeclaration:22510,src:"1592:17:51",typeDescriptions:{typeIdentifier:"t_contract$_AddressArrayUtils_$22510",typeString:"library AddressArrayUtils"}},nodeType:"UsingForDirective",src:"1586:38:51",typeName:{baseType:{id:8249,name:"address",nodeType:"ElementaryTypeName",src:"1614:7:51",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},id:8250,length:null,nodeType:"ArrayTypeName",src:"1614:9:51",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_storage_ptr",typeString:"address[]"}}},{constant:true,id:8256,name:"SET_FULL_UNIT",nodeType:"VariableDeclaration",scope:8452,src:"1630:48:51",stateVariable:true,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8252,name:"uint256",nodeType:"ElementaryTypeName",src:"1630:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:{argumentTypes:null,commonType:{typeIdentifier:"t_rational_1000000000000000000_by_1",typeString:"int_const 1000000000000000000"},id:8255,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,leftExpression:{argumentTypes:null,hexValue:"3130",id:8253,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"1670:2:51",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_10_by_1",typeString:"int_const 10"},value:"10"},nodeType:"BinaryOperation",operator:"**",rightExpression:{argumentTypes:null,hexValue:"3138",id:8254,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"1676:2:51",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_18_by_1",typeString:"int_const 18"},value:"18"},src:"1670:8:51",typeDescriptions:{typeIdentifier:"t_rational_1000000000000000000_by_1",typeString:"int_const 1000000000000000000"}},visibility:"public"},{body:{id:8304,nodeType:"Block",src:"2057:635:51",statements:[{assignments:[8266],declarations:[{constant:false,id:8266,name:"rebalancingSetToken",nodeType:"VariableDeclaration",scope:8304,src:"2067:42:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetTokenV2_$5400",typeString:"contract IRebalancingSetTokenV2"},typeName:{contractScope:null,id:8265,name:"IRebalancingSetTokenV2",nodeType:"UserDefinedTypeName",referencedDeclaration:5400,src:"2067:22:51",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetTokenV2_$5400",typeString:"contract IRebalancingSetTokenV2"}},value:null,visibility:"internal"}],id:8270,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:8268,name:"_rebalancingSetTokenAddress",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8258,src:"2135:27:51",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:8267,name:"IRebalancingSetTokenV2",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5400,src:"2112:22:51",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_IRebalancingSetTokenV2_$5400_$",typeString:"type(contract IRebalancingSetTokenV2)"}},id:8269,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2112:51:51",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetTokenV2_$5400",typeString:"contract IRebalancingSetTokenV2"}},nodeType:"VariableDeclarationStatement",src:"2067:96:51"},{assignments:[8272],declarations:[{constant:false,id:8272,name:"unitShares",nodeType:"VariableDeclaration",scope:8304,src:"2174:18:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8271,name:"uint256",nodeType:"ElementaryTypeName",src:"2174:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8276,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:8273,name:"rebalancingSetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8266,src:"2195:19:51",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetTokenV2_$5400",typeString:"contract IRebalancingSetTokenV2"}},id:8274,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"unitShares",nodeType:"MemberAccess",referencedDeclaration:5364,src:"2195:30:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:8275,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2195:32:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"2174:53:51"},{assignments:[8278],declarations:[{constant:false,id:8278,name:"naturalUnit",nodeType:"VariableDeclaration",scope:8304,src:"2237:19:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8277,name:"uint256",nodeType:"ElementaryTypeName",src:"2237:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8282,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:8279,name:"rebalancingSetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8266,src:"2259:19:51",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetTokenV2_$5400",typeString:"contract IRebalancingSetTokenV2"}},id:8280,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:5349,src:"2259:31:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:8281,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2259:33:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"2237:55:51"},{assignments:[8284],declarations:[{constant:false,id:8284,name:"currentSet",nodeType:"VariableDeclaration",scope:8304,src:"2302:20:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"},typeName:{contractScope:null,id:8283,name:"ISetToken",nodeType:"UserDefinedTypeName",referencedDeclaration:5659,src:"2302:9:51",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},value:null,visibility:"internal"}],id:8288,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:8285,name:"rebalancingSetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8266,src:"2325:19:51",typeDescriptions:{typeIdentifier:"t_contract$_IRebalancingSetTokenV2_$5400",typeString:"contract IRebalancingSetTokenV2"}},id:8286,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"currentSet",nodeType:"MemberAccess",referencedDeclaration:5354,src:"2325:30:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_contract$_ISetToken_$5659_$",typeString:"function () view external returns (contract ISetToken)"}},id:8287,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2325:32:51",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},nodeType:"VariableDeclarationStatement",src:"2302:55:51"},{assignments:[8290],declarations:[{constant:false,id:8290,name:"collateralValue",nodeType:"VariableDeclaration",scope:8304,src:"2406:23:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8289,name:"uint256",nodeType:"ElementaryTypeName",src:"2406:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8295,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:8292,name:"currentSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8284,src:"2474:10:51",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},{argumentTypes:null,id:8293,name:"_oracleWhitelist",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8260,src:"2498:16:51",typeDescriptions:{typeIdentifier:"t_contract$_IOracleWhiteList_$5003",typeString:"contract IOracleWhiteList"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"},{typeIdentifier:"t_contract$_IOracleWhiteList_$5003",typeString:"contract IOracleWhiteList"}],id:8291,name:"calculateSetTokenDollarValue",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8403,src:"2432:28:51",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_contract$_ISetToken_$5659_$_t_contract$_IOracleWhiteList_$5003_$returns$_t_uint256_$",typeString:"function (contract ISetToken,contract IOracleWhiteList) view returns (uint256)"}},id:8294,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2432:92:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"2406:118:51"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:8301,name:"naturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8278,src:"2673:11:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:8298,name:"unitShares",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8272,src:"2657:10:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:8296,name:"collateralValue",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8290,src:"2637:15:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:8297,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"2637:19:51",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:8299,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2637:31:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:8300,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"2637:35:51",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:8302,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2637:48:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:8264,id:8303,nodeType:"Return",src:"2630:55:51"}]},documentation:"Calculates value of RebalancingSetToken.\n     * @return uint256        Streaming fee",id:8305,implemented:true,kind:"function",modifiers:[],name:"calculateRebalancingSetValue",nodeType:"FunctionDefinition",parameters:{id:8261,nodeType:"ParameterList",parameters:[{constant:false,id:8258,name:"_rebalancingSetTokenAddress",nodeType:"VariableDeclaration",scope:8305,src:"1912:35:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:8257,name:"address",nodeType:"ElementaryTypeName",src:"1912:7:51",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:8260,name:"_oracleWhitelist",nodeType:"VariableDeclaration",scope:8305,src:"1957:33:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_contract$_IOracleWhiteList_$5003",typeString:"contract IOracleWhiteList"},typeName:{contractScope:null,id:8259,name:"IOracleWhiteList",nodeType:"UserDefinedTypeName",referencedDeclaration:5003,src:"1957:16:51",typeDescriptions:{typeIdentifier:"t_contract$_IOracleWhiteList_$5003",typeString:"contract IOracleWhiteList"}},value:null,visibility:"internal"}],src:"1902:94:51"},returnParameters:{id:8264,nodeType:"ParameterList",parameters:[{constant:false,id:8263,name:"",nodeType:"VariableDeclaration",scope:8305,src:"2044:7:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8262,name:"uint256",nodeType:"ElementaryTypeName",src:"2044:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"2043:9:51"},scope:8452,src:"1865:827:51",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:8402,nodeType:"Block",src:"3142:1015:51",statements:[{assignments:[8315],declarations:[{constant:false,id:8315,name:"setDollarAmount",nodeType:"VariableDeclaration",scope:8402,src:"3152:23:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8314,name:"uint256",nodeType:"ElementaryTypeName",src:"3152:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8317,initialValue:{argumentTypes:null,hexValue:"30",id:8316,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"3178:1:51",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},nodeType:"VariableDeclarationStatement",src:"3152:27:51"},{assignments:[8321],declarations:[{constant:false,id:8321,name:"components",nodeType:"VariableDeclaration",scope:8402,src:"3190:27:51",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_memory_ptr",typeString:"address[]"},typeName:{baseType:{id:8319,name:"address",nodeType:"ElementaryTypeName",src:"3190:7:51",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},id:8320,length:null,nodeType:"ArrayTypeName",src:"3190:9:51",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_storage_ptr",typeString:"address[]"}},value:null,visibility:"internal"}],id:8325,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:8322,name:"_set",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8307,src:"3220:4:51",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:8323,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getComponents",nodeType:"MemberAccess",referencedDeclaration:5624,src:"3220:18:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_array$_t_address_$dyn_memory_ptr_$",typeString:"function () view external returns (address[] memory)"}},id:8324,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3220:20:51",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_memory_ptr",typeString:"address[] memory"}},nodeType:"VariableDeclarationStatement",src:"3190:50:51"},{assignments:[8329],declarations:[{constant:false,id:8329,name:"units",nodeType:"VariableDeclaration",scope:8402,src:"3250:22:51",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:8327,name:"uint256",nodeType:"ElementaryTypeName",src:"3250:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:8328,length:null,nodeType:"ArrayTypeName",src:"3250:9:51",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:8333,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:8330,name:"_set",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8307,src:"3275:4:51",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:8331,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getUnits",nodeType:"MemberAccess",referencedDeclaration:5630,src:"3275:13:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_array$_t_uint256_$dyn_memory_ptr_$",typeString:"function () view external returns (uint256[] memory)"}},id:8332,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3275:15:51",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"3250:40:51"},{assignments:[8335],declarations:[{constant:false,id:8335,name:"naturalUnit",nodeType:"VariableDeclaration",scope:8402,src:"3300:19:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8334,name:"uint256",nodeType:"ElementaryTypeName",src:"3300:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8339,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:8336,name:"_set",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8307,src:"3322:4:51",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:8337,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:5618,src:"3322:16:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:8338,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3322:18:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3300:40:51"},{body:{id:8398,nodeType:"Block",src:"3430:688:51",statements:[{assignments:[8352],declarations:[{constant:false,id:8352,name:"currentComponent",nodeType:"VariableDeclaration",scope:8398,src:"3444:24:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:8351,name:"address",nodeType:"ElementaryTypeName",src:"3444:7:51",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"}],id:8356,initialValue:{argumentTypes:null,baseExpression:{argumentTypes:null,id:8353,name:"components",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8321,src:"3471:10:51",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_memory_ptr",typeString:"address[] memory"}},id:8355,indexExpression:{argumentTypes:null,id:8354,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8341,src:"3482:1:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"3471:13:51",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},nodeType:"VariableDeclarationStatement",src:"3444:40:51"},{assignments:[8358],declarations:[{constant:false,id:8358,name:"oracle",nodeType:"VariableDeclaration",scope:8398,src:"3499:14:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:8357,name:"address",nodeType:"ElementaryTypeName",src:"3499:7:51",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"}],id:8363,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:8361,name:"currentComponent",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8352,src:"3557:16:51",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,id:8359,name:"_oracleWhitelist",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8309,src:"3516:16:51",typeDescriptions:{typeIdentifier:"t_contract$_IOracleWhiteList_$5003",typeString:"contract IOracleWhiteList"}},id:8360,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getOracleAddressByToken",nodeType:"MemberAccess",referencedDeclaration:5002,src:"3516:40:51",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$returns$_t_address_$",typeString:"function (address) view external returns (address)"}},id:8362,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3516:58:51",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},nodeType:"VariableDeclarationStatement",src:"3499:75:51"},{assignments:[8365],declarations:[{constant:false,id:8365,name:"price",nodeType:"VariableDeclaration",scope:8398,src:"3588:13:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8364,name:"uint256",nodeType:"ElementaryTypeName",src:"3588:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8371,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:8367,name:"oracle",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8358,src:"3612:6:51",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:8366,name:"IOracle",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30298,src:"3604:7:51",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_IOracle_$30298_$",typeString:"type(contract IOracle)"}},id:8368,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3604:15:51",typeDescriptions:{typeIdentifier:"t_contract$_IOracle_$30298",typeString:"contract IOracle"}},id:8369,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"read",nodeType:"MemberAccess",referencedDeclaration:30297,src:"3604:20:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:8370,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3604:22:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3588:38:51"},{assignments:[8373],declarations:[{constant:false,id:8373,name:"decimals",nodeType:"VariableDeclaration",scope:8398,src:"3640:16:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8372,name:"uint256",nodeType:"ElementaryTypeName",src:"3640:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8379,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:8375,name:"currentComponent",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8352,src:"3673:16:51",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:8374,name:"ERC20Detailed",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30190,src:"3659:13:51",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ERC20Detailed_$30190_$",typeString:"type(contract ERC20Detailed)"}},id:8376,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3659:31:51",typeDescriptions:{typeIdentifier:"t_contract$_ERC20Detailed_$30190",typeString:"contract ERC20Detailed"}},id:8377,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"decimals",nodeType:"MemberAccess",referencedDeclaration:30189,src:"3659:40:51",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint8_$",typeString:"function () view external returns (uint8)"}},id:8378,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3659:42:51",typeDescriptions:{typeIdentifier:"t_uint8",typeString:"uint8"}},nodeType:"VariableDeclarationStatement",src:"3640:61:51"},{assignments:[8381],declarations:[{constant:false,id:8381,name:"tokenDollarValue",nodeType:"VariableDeclaration",scope:8398,src:"3781:24:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8380,name:"uint256",nodeType:"ElementaryTypeName",src:"3781:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8390,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:8383,name:"price",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8365,src:"3859:5:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:8384,name:"naturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8335,src:"3882:11:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,baseExpression:{argumentTypes:null,id:8385,name:"units",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8329,src:"3911:5:51",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:8387,indexExpression:{argumentTypes:null,id:8386,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8341,src:"3917:1:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"3911:8:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:8388,name:"decimals",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8373,src:"3937:8:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"}],id:8382,name:"calculateTokenAllocationAmountUSD",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8451,src:"3808:33:51",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$",typeString:"function (uint256,uint256,uint256,uint256) pure returns (uint256)"}},id:8389,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3808:151:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3781:178:51"},{expression:{argumentTypes:null,id:8396,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:8391,name:"setDollarAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8315,src:"4052:15:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,id:8394,name:"tokenDollarValue",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8381,src:"4090:16:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:8392,name:"setDollarAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8315,src:"4070:15:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:8393,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"add",nodeType:"MemberAccess",referencedDeclaration:29619,src:"4070:19:51",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:8395,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4070:37:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"4052:55:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"
}},id:8397,nodeType:"ExpressionStatement",src:"4052:55:51"}]},condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:8347,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:8344,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8341,src:"3402:1:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<",rightExpression:{argumentTypes:null,expression:{argumentTypes:null,id:8345,name:"components",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8321,src:"3406:10:51",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_memory_ptr",typeString:"address[] memory"}},id:8346,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"length",nodeType:"MemberAccess",referencedDeclaration:null,src:"3406:17:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"3402:21:51",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:8399,initializationExpression:{assignments:[8341],declarations:[{constant:false,id:8341,name:"i",nodeType:"VariableDeclaration",scope:8399,src:"3387:9:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8340,name:"uint256",nodeType:"ElementaryTypeName",src:"3387:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8343,initialValue:{argumentTypes:null,hexValue:"30",id:8342,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"3399:1:51",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},nodeType:"VariableDeclarationStatement",src:"3387:13:51"},loopExpression:{expression:{argumentTypes:null,id:8349,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"UnaryOperation",operator:"++",prefix:false,src:"3425:3:51",subExpression:{argumentTypes:null,id:8348,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8341,src:"3425:1:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:8350,nodeType:"ExpressionStatement",src:"3425:3:51"},nodeType:"ForStatement",src:"3382:736:51"},{expression:{argumentTypes:null,id:8400,name:"setDollarAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8315,src:"4135:15:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:8313,id:8401,nodeType:"Return",src:"4128:22:51"}]},documentation:null,id:8403,implemented:true,kind:"function",modifiers:[],name:"calculateSetTokenDollarValue",nodeType:"FunctionDefinition",parameters:{id:8310,nodeType:"ParameterList",parameters:[{constant:false,id:8307,name:"_set",nodeType:"VariableDeclaration",scope:8403,src:"3018:14:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"},typeName:{contractScope:null,id:8306,name:"ISetToken",nodeType:"UserDefinedTypeName",referencedDeclaration:5659,src:"3018:9:51",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},value:null,visibility:"internal"},{constant:false,id:8309,name:"_oracleWhitelist",nodeType:"VariableDeclaration",scope:8403,src:"3042:33:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_contract$_IOracleWhiteList_$5003",typeString:"contract IOracleWhiteList"},typeName:{contractScope:null,id:8308,name:"IOracleWhiteList",nodeType:"UserDefinedTypeName",referencedDeclaration:5003,src:"3042:16:51",typeDescriptions:{typeIdentifier:"t_contract$_IOracleWhiteList_$5003",typeString:"contract IOracleWhiteList"}},value:null,visibility:"internal"}],src:"3008:73:51"},returnParameters:{id:8313,nodeType:"ParameterList",parameters:[{constant:false,id:8312,name:"",nodeType:"VariableDeclaration",scope:8403,src:"3129:7:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8311,name:"uint256",nodeType:"ElementaryTypeName",src:"3129:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"3128:9:51"},scope:8452,src:"2971:1186:51",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:8450,nodeType:"Block",src:"4870:693:51",statements:[{assignments:[8417],declarations:[{constant:false,id:8417,name:"tokenFullUnit",nodeType:"VariableDeclaration",scope:8450,src:"4880:21:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8416,name:"uint256",nodeType:"ElementaryTypeName",src:"4880:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8421,initialValue:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:8420,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,hexValue:"3130",id:8418,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"4904:2:51",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_10_by_1",typeString:"int_const 10"},value:"10"},nodeType:"BinaryOperation",operator:"**",rightExpression:{argumentTypes:null,id:8419,name:"_tokenDecimal",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8411,src:"4910:13:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"4904:19:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4880:43:51"},{assignments:[8423],declarations:[{constant:false,id:8423,name:"componentUnitsInFullToken",nodeType:"VariableDeclaration",scope:8450,src:"5016:33:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8422,name:"uint256",nodeType:"ElementaryTypeName",src:"5016:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8430,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:8426,name:"SET_FULL_UNIT",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8256,src:"5088:13:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:8427,name:"_unit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8409,src:"5115:5:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:8428,name:"_naturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8407,src:"5134:12:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:8424,name:"SetMath",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6705,src:"5052:7:51",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_SetMath_$6705_$",typeString:"type(library SetMath)"}},id:8425,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"setToComponent",nodeType:"MemberAccess",referencedDeclaration:6684,src:"5052:22:51",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$",typeString:"function (uint256,uint256,uint256) pure returns (uint256)"}},id:8429,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5052:104:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"5016:140:51"},{assignments:[8432],declarations:[{constant:false,id:8432,name:"allocationUSDValue",nodeType:"VariableDeclaration",scope:8450,src:"5256:26:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8431,name:"uint256",nodeType:"ElementaryTypeName",src:"5256:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:8440,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:8438,name:"tokenFullUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8417,src:"5358:13:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:8435,name:"componentUnitsInFullToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8423,src:"5314:25:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:8433,name:"_tokenPrice",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8405,src:"5285:11:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:8434,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"5285:28:51",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:8436,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5285:55:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:8437,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"5285:72:51",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:8439,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5285:87:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"5256:116:51"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:8444,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:8442,name:"allocationUSDValue",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8432,src:"5404:18:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:">",rightExpression:{argumentTypes:null,hexValue:"30",id:8443,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"5425:1:51",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"5404:22:51",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"53657455534456616c756174696f6e2e63616c63756c617465546f6b656e416c6c6f636174696f6e416d6f756e745553443a2056616c7565206d757374206265203e2030",id:8445,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"5440:70:51",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_5c8b8aecbedd5daaa76e92721612f5fe307e44dcf48ae327efd5c0557c862e28",typeString:'literal_string "SetUSDValuation.calculateTokenAllocationAmountUSD: Value must be > 0"'},value:"SetUSDValuation.calculateTokenAllocationAmountUSD: Value must be > 0"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_5c8b8aecbedd5daaa76e92721612f5fe307e44dcf48ae327efd5c0557c862e28",typeString:'literal_string "SetUSDValuation.calculateTokenAllocationAmountUSD: Value must be > 0"'}],id:8441,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"5383:7:51",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:8446,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5383:137:51",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:8447,nodeType:"ExpressionStatement",src:"5383:137:51"},{expression:{argumentTypes:null,id:8448,name:"allocationUSDValue",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:8432,src:"5538:18:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:8415,id:8449,nodeType:"Return",src:"5531:25:51"}]},documentation:null,id:8451,implemented:true,kind:"function",modifiers:[],name:"calculateTokenAllocationAmountUSD",nodeType:"FunctionDefinition",parameters:{id:8412,nodeType:"ParameterList",parameters:[{constant:false,id:8405,name:"_tokenPrice",nodeType:"VariableDeclaration",scope:8451,src:"4700:19:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8404,name:"uint256",nodeType:"ElementaryTypeName",src:"4700:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:8407,name:"_naturalUnit",nodeType:"VariableDeclaration",scope:8451,src:"4729:20:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8406,name:"uint256",nodeType:"ElementaryTypeName",src:"4729:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:8409,name:"_unit",nodeType:"VariableDeclaration",scope:8451,src:"4759:13:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8408,name:"uint256",nodeType:"ElementaryTypeName",src:"4759:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:8411,name:"_tokenDecimal",nodeType:"VariableDeclaration",scope:8451,src:"4782:21:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8410,name:"uint256",nodeType:"ElementaryTypeName",src:"4782:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"4690:119:51"},returnParameters:{id:8415,nodeType:"ParameterList",parameters:[{constant:false,id:8414,name:"",nodeType:"VariableDeclaration",scope:8451,src:"4857:7:51",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:8413,name:"uint256",nodeType:"ElementaryTypeName",src:"4857:7:51",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"4856:9:51"},scope:8452,src:"4648:915:51",stateMutability:"pure",superFunction:null,visibility:"internal"}],scope:8453,src:"1524:4041:51"}],src:"597:4968:51"},compiler:{name:"solc",version:"0.5.7+commit.6da8b019.Linux.g++"},networks:{},schemaVersion:"3.0.23",updatedAt:"2020-04-07T04:29:24.506Z",devdoc:{author:"Set Protocol * Utility functions to derive the USD value of a Set and its components",methods:{},title:"SetUSDValuation"},userdoc:{methods:{}}};