"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CoreIssuanceLibrary={contractName:"CoreIssuanceLibrary",abi:[{constant:true,inputs:[{name:"_components",type:"address[]"},{name:"_componentQuantities",type:"uint256[]"},{name:"_owner",type:"address"},{name:"_vault",type:"address"}],name:"calculateDepositAndDecrementQuantities",outputs:[{name:"",type:"uint256[]"},{name:"",type:"uint256[]"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[{name:"_componentQuantities",type:"uint256[]"},{name:"_toExclude",type:"uint256"}],name:"calculateWithdrawAndIncrementQuantities",outputs:[{name:"",type:"uint256[]"},{name:"",type:"uint256[]"}],payable:false,stateMutability:"pure",type:"function"},{constant:true,inputs:[{name:"_componentUnits",type:"uint256[]"},{name:"_naturalUnit",type:"uint256"},{name:"_quantity",type:"uint256"}],name:"calculateRequiredComponentQuantities",outputs:[{name:"",type:"uint256[]"}],payable:false,stateMutability:"pure",type:"function"}],metadata:'{"compiler":{"version":"0.5.7+commit.6da8b019"},"language":"Solidity","output":{"abi":[{"constant":true,"inputs":[{"name":"_componentQuantities","type":"uint256[]"},{"name":"_toExclude","type":"uint256"}],"name":"calculateWithdrawAndIncrementQuantities","outputs":[{"name":"","type":"uint256[]"},{"name":"","type":"uint256[]"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[{"name":"_componentUnits","type":"uint256[]"},{"name":"_naturalUnit","type":"uint256"},{"name":"_quantity","type":"uint256"}],"name":"calculateRequiredComponentQuantities","outputs":[{"name":"","type":"uint256[]"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[{"name":"_components","type":"address[]"},{"name":"_componentQuantities","type":"uint256[]"},{"name":"_owner","type":"address"},{"name":"_vault","type":"address"}],"name":"calculateDepositAndDecrementQuantities","outputs":[{"name":"","type":"uint256[]"},{"name":"","type":"uint256[]"}],"payable":false,"stateMutability":"view","type":"function"}],"devdoc":{"author":"Set Protocol * This library contains functions for calculating deposit, withdrawal,and transfer quantities","methods":{"calculateDepositAndDecrementQuantities(address[],uint256[],address,address)":{"params":{"_componentQuantities":"Component quantities to increment and withdraw","_components":"Addresses of components","_owner":"Address to deposit and decrement quantities from","_vault":"Address to vault"},"return":"uint256[] decrementQuantities        Quantities to decrement from vaultuint256[] depositQuantities          Quantities to deposit into the vault"},"calculateRequiredComponentQuantities(uint256[],uint256,uint256)":{"params":{"_componentUnits":"The units of the component token","_naturalUnit":"The natural unit of the Set token","_quantity":"The number of tokens being redeem"},"return":"uint256[]        Required quantities in base units of components"},"calculateWithdrawAndIncrementQuantities(uint256[],uint256)":{"params":{"_componentQuantities":"Component quantities to increment and withdraw","_toExclude":"Mask of indexes of tokens to exclude from withdrawing"},"return":"uint256[] incrementQuantities        Quantities to increment in vaultuint256[] withdrawQuantities         Quantities to withdraw from vault"}},"title":"CoreIssuanceLibrary"},"userdoc":{"methods":{"calculateDepositAndDecrementQuantities(address[],uint256[],address,address)":{"notice":"Calculate the quantities required to deposit and decrement during issuance. Takes into account the tokens an owner already has in the vault."},"calculateRequiredComponentQuantities(uint256[],uint256,uint256)":{"notice":"Calculate the required component quantities required for issuance or rdemption for a given  quantity of Set Tokens"},"calculateWithdrawAndIncrementQuantities(uint256[],uint256)":{"notice":"Calculate the quantities required to withdraw and increment during redeem and withdraw. Takes into account a bitmask exclusion parameter."}}}},"settings":{"compilationTarget":{"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/CoreIssuanceLibrary.sol":"CoreIssuanceLibrary"},"evmVersion":"byzantium","libraries":{},"optimizer":{"enabled":true,"runs":200},"remappings":[]},"sources":{"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IVault.sol":{"keccak256":"0xf8a6d376173be39f5744492866db5dd3f91453a124d23679ff164ff3817f2f4f","urls":["bzzr://896c0a8329175c1620e1a22467778b835defe0e61847e5a8427a306f42391e64"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/CoreIssuanceLibrary.sol":{"keccak256":"0xd35ffbd6f4fe1f4467da9ece4eab540648735509349f2dc22fcdd76e48848e68","urls":["bzzr://5d9f7322508eb98d103a06b19fda3eb4180f5cf65b0ed07de5071d5af6d8dcf0"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/CommonMath.sol":{"keccak256":"0x3d1d08c6efc2a973fe2c02ddcb02fd99a8c8eb75f74dcbd93e8e15864eee2b6b","urls":["bzzr://580815dd1cf648a4521d923e59087de21143d9c48115ab71579a1f5a8f3d36af"]},"openzeppelin-solidity/contracts/math/SafeMath.sol":{"keccak256":"0xc2a200a877c4a9b2475c246c54ffecc69ffde3e11af83319c63c2dc5458bac80","urls":["bzzr://c8876e2c39b60f155d748d71d715c8f3903fae5a405ac599adcb6ad2f9a583f9"]}},"version":1}',bytecode:"0x61090a610026600b82828239805160001a60731461001957fe5b30600052607381538281f3fe7300000000000000000000000000000000000000003014608060405260043610610067577c010000000000000000000000000000000000000000000000000000000060003504635720a5d9811461006c5780636cc34bcc146100965780639b9f5c93146100b6575b600080fd5b61007f61007a366004610677565b6100c9565b60405161008d929190610867565b60405180910390f35b6100a96100a43660046106cc565b6101c2565b60405161008d9190610856565b61007f6100c43660046105df565b6102ac565b6040805183815260208085028201019091526060908190849082908280156100fb578160200160208202803883390190505b50905060608260405190808252806020026020018201604052801561012a578160200160208202803883390190505b50905060005b838110156101b45760006101456002836104af565b90508781161561017f5789898381811061015b57fe5b9050602002013584838151811061016e57fe5b6020026020010181815250506101ab565b89898381811061018b57fe5b9050602002013583838151811061019e57fe5b6020026020010181815250505b50600101610130565b509097909650945050505050565b60606101d4828463ffffffff6104f016565b15610214576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161020b9061088c565b60405180910390fd5b604080518581526020808702820101909152606090858015610240578160200160208202803883390190505b50905060005b858110156102a25761028387878381811061025d57fe5b90506020020135610277878761050d90919063ffffffff16565b9063ffffffff61052f16565b82828151811061028f57fe5b6020908102919091010152600101610246565b5095945050505050565b6040805186815260208088028201019091526060908190879082908280156102de578160200160208202803883390190505b50905060608260405190808252806020026020018201604052801561030d578160200160208202803883390190505b50905060005b8381101561049e5760008773ffffffffffffffffffffffffffffffffffffffff16631f98ade38e8e8581811061034557fe5b9050602002013573ffffffffffffffffffffffffffffffffffffffff168b6040518363ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040161039c92919061083b565b60206040518083038186803b1580156103b457600080fd5b505afa1580156103c8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506103ec9190810190610735565b90508a8a838181106103fa57fe5b905060200201358110610437578a8a8381811061041357fe5b9050602002013584838151811061042657fe5b602002602001018181525050610495565b8015610457578084838151811061044a57fe5b6020026020010181815250505b61047c818c8c8581811061046757fe5b9050602002013561055d90919063ffffffff16565b83838151811061048857fe5b6020026020010181815250505b50600101610313565b50909a909950975050505050505050565b60008083116104bd57600080fd5b600160005b838110156104e657816104db818763ffffffff61052f16565b9250506001016104c2565b5090505b92915050565b6000816104fc57600080fd5b81838161050557fe5b069392505050565b600080821161051b57600080fd5b600082848161052657fe5b04949350505050565b60008261053e575060006104ea565b8282028284828161054b57fe5b041461055657600080fd5b9392505050565b60008282111561056c57600080fd5b50900390565b600061055682356108af565b60008083601f84011261059057600080fd5b50813567ffffffffffffffff8111156105a857600080fd5b6020830191508360208202830111156105c057600080fd5b9250929050565b600061055682356108cd565b600061055682516108cd565b600080600080600080608087890312156105f857600080fd5b863567ffffffffffffffff81111561060f57600080fd5b61061b89828a0161057e565b9650965050602087013567ffffffffffffffff81111561063a57600080fd5b61064689828a0161057e565b9450945050604061065989828a01610572565b925050606061066a89828a01610572565b9150509295509295509295565b60008060006040848603121561068c57600080fd5b833567ffffffffffffffff8111156106a357600080fd5b6106af8682870161057e565b935093505060206106c2868287016105c7565b9150509250925092565b600080600080606085870312156106e257600080fd5b843567ffffffffffffffff8111156106f957600080fd5b6107058782880161057e565b94509450506020610718878288016105c7565b9250506040610729878288016105c7565b91505092959194509250565b60006020828403121561074757600080fd5b600061075384846105d3565b949350505050565b60006107678383610832565b505060200190565b610778816108af565b82525050565b6000610789826108a2565b61079381856108a6565b935061079e8361089c565b60005b828110156107c9576107b486835161075b565b95506107bf8261089c565b91506001016107a1565b5093949350505050565b60006107e0603c836108a6565b7f436f726549737375616e63654c6962726172793a205175616e74697479206d7581527f73742062652061206d756c7469706c65206f66206e617420756e697400000000602082015260400192915050565b610778816108cd565b60408101610849828561076f565b610556602083018461076f565b60208082528101610556818461077e565b60408082528101610878818561077e565b90508181036020830152610753818461077e565b602080825281016104ea816107d3565b60200190565b5190565b90815260200190565b600073ffffffffffffffffffffffffffffffffffffffff82166104ea565b9056fea265627a7a723058203301b73409dac83d98f8e09e98fddac22431a6fa75c84b3882d10d682a6595a16c6578706572696d656e74616cf50037",deployedBytecode:"0x7300000000000000000000000000000000000000003014608060405260043610610067577c010000000000000000000000000000000000000000000000000000000060003504635720a5d9811461006c5780636cc34bcc146100965780639b9f5c93146100b6575b600080fd5b61007f61007a366004610677565b6100c9565b60405161008d929190610867565b60405180910390f35b6100a96100a43660046106cc565b6101c2565b60405161008d9190610856565b61007f6100c43660046105df565b6102ac565b6040805183815260208085028201019091526060908190849082908280156100fb578160200160208202803883390190505b50905060608260405190808252806020026020018201604052801561012a578160200160208202803883390190505b50905060005b838110156101b45760006101456002836104af565b90508781161561017f5789898381811061015b57fe5b9050602002013584838151811061016e57fe5b6020026020010181815250506101ab565b89898381811061018b57fe5b9050602002013583838151811061019e57fe5b6020026020010181815250505b50600101610130565b509097909650945050505050565b60606101d4828463ffffffff6104f016565b15610214576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161020b9061088c565b60405180910390fd5b604080518581526020808702820101909152606090858015610240578160200160208202803883390190505b50905060005b858110156102a25761028387878381811061025d57fe5b90506020020135610277878761050d90919063ffffffff16565b9063ffffffff61052f16565b82828151811061028f57fe5b6020908102919091010152600101610246565b5095945050505050565b6040805186815260208088028201019091526060908190879082908280156102de578160200160208202803883390190505b50905060608260405190808252806020026020018201604052801561030d578160200160208202803883390190505b50905060005b8381101561049e5760008773ffffffffffffffffffffffffffffffffffffffff16631f98ade38e8e8581811061034557fe5b9050602002013573ffffffffffffffffffffffffffffffffffffffff168b6040518363ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040161039c92919061083b565b60206040518083038186803b1580156103b457600080fd5b505afa1580156103c8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506103ec9190810190610735565b90508a8a838181106103fa57fe5b905060200201358110610437578a8a8381811061041357fe5b9050602002013584838151811061042657fe5b602002602001018181525050610495565b8015610457578084838151811061044a57fe5b6020026020010181815250505b61047c818c8c8581811061046757fe5b9050602002013561055d90919063ffffffff16565b83838151811061048857fe5b6020026020010181815250505b50600101610313565b50909a909950975050505050505050565b60008083116104bd57600080fd5b600160005b838110156104e657816104db818763ffffffff61052f16565b9250506001016104c2565b5090505b92915050565b6000816104fc57600080fd5b81838161050557fe5b069392505050565b600080821161051b57600080fd5b600082848161052657fe5b04949350505050565b60008261053e575060006104ea565b8282028284828161054b57fe5b041461055657600080fd5b9392505050565b60008282111561056c57600080fd5b50900390565b600061055682356108af565b60008083601f84011261059057600080fd5b50813567ffffffffffffffff8111156105a857600080fd5b6020830191508360208202830111156105c057600080fd5b9250929050565b600061055682356108cd565b600061055682516108cd565b600080600080600080608087890312156105f857600080fd5b863567ffffffffffffffff81111561060f57600080fd5b61061b89828a0161057e565b9650965050602087013567ffffffffffffffff81111561063a57600080fd5b61064689828a0161057e565b9450945050604061065989828a01610572565b925050606061066a89828a01610572565b9150509295509295509295565b60008060006040848603121561068c57600080fd5b833567ffffffffffffffff8111156106a357600080fd5b6106af8682870161057e565b935093505060206106c2868287016105c7565b9150509250925092565b600080600080606085870312156106e257600080fd5b843567ffffffffffffffff8111156106f957600080fd5b6107058782880161057e565b94509450506020610718878288016105c7565b9250506040610729878288016105c7565b91505092959194509250565b60006020828403121561074757600080fd5b600061075384846105d3565b949350505050565b60006107678383610832565b505060200190565b610778816108af565b82525050565b6000610789826108a2565b61079381856108a6565b935061079e8361089c565b60005b828110156107c9576107b486835161075b565b95506107bf8261089c565b91506001016107a1565b5093949350505050565b60006107e0603c836108a6565b7f436f726549737375616e63654c6962726172793a205175616e74697479206d7581527f73742062652061206d756c7469706c65206f66206e617420756e697400000000602082015260400192915050565b610778816108cd565b60408101610849828561076f565b610556602083018461076f565b60208082528101610556818461077e565b60408082528101610878818561077e565b90508181036020830152610753818461077e565b602080825281016104ea816107d3565b60200190565b5190565b90815260200190565b600073ffffffffffffffffffffffffffffffffffffffff82166104ea565b9056fea265627a7a723058203301b73409dac83d98f8e09e98fddac22431a6fa75c84b3882d10d682a6595a16c6578706572696d656e74616cf50037",sourceMap:"1004:5176:37:-;;132:2:-1;166:7;155:9;146:7;137:37;255:7;249:14;246:1;241:23;235:4;232:33;222:2;;269:9;222:2;293:9;290:1;283:20;323:4;314:7;306:22;347:7;338;331:24",deployedSourceMap:"1004:5176:37:-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3803:1219;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;5457:720;;;;;;;;;:::i;:::-;;;;;;;;1771:1475;;;;;;;;;:::i;3803:1219::-;4224:29;;;;;;;;;;;;;;;;3995:16;;;;4142:20;;3995:16;;4142:20;4224:29;;;;;;;29:2:-1;21:6;17:15;117:4;105:10;97:6;88:34;136:17;;-1:-1;4224:29:37;;4179:74;;4263:33;4313:14;4299:29;;;;;;;;;;;;;;;;;;;;;;29:2:-1;21:6;17:15;117:4;105:10;97:6;88:34;136:17;;-1:-1;4299:29:37;-1:-1:-1;4263:65:37;-1:-1:-1;4435:9:37;4430:489;4454:14;4450:1;:18;4430:489;;;4545:25;4573:26;4594:1;4597;4573:20;:26::i;:::-;4545:54;-1:-1:-1;4700:30:37;;;4699:37;4695:214;;4787:20;;4808:1;4787:23;;;;;;;;;;;;;4756:25;4782:1;4756:28;;;;;;;;;;;;;:54;;;;;4695:214;;;4871:20;;4892:1;4871:23;;;;;;;;;;;;;4849:16;4866:1;4849:19;;;;;;;;;;;;;:45;;;;;4695:214;-1:-1:-1;4470:3:37;;4430:489;;;-1:-1:-1;4950:25:37;;;;-1:-1:-1;3803:1219:37;-1:-1:-1;;;;;3803:1219:37:o;5457:720::-;5657:16;5710:27;:9;5724:12;5710:27;:13;:27;:::i;:::-;:32;5689:139;;;;;;;;;;;;;;;;;;;;;;5870:37;;;;;;;;;;;;;;;;5839:28;;5884:15;5870:37;;;;;;;29:2:-1;21:6;17:15;117:4;105:10;97:6;88:34;136:17;;-1:-1;5870:37:37;-1:-1:-1;5839:68:37;-1:-1:-1;6001:9:37;5996:146;6016:26;;;5996:146;;;6080:51;6112:15;;6128:1;6112:18;;;;;;;;;;;;;6080:27;6094:12;6080:9;:13;;:27;;;;:::i;:::-;:31;:51;:31;:51;:::i;:::-;6063:11;6075:1;6063:14;;;;;;;;;;;;;;;;;:68;6044:3;;5996:146;;;-1:-1:-1;6159:11:37;5457:720;-1:-1:-1;;;;;5457:720:37:o;1771:1475::-;2241:29;;;;;;;;;;;;;;;;2022:16;;;;2168:11;;2022:16;;2168:11;2241:29;;;;;;;29:2:-1;21:6;17:15;117:4;105:10;97:6;88:34;136:17;;-1:-1;2241:29:37;;2196:74;;2280:34;2331:14;2317:29;;;;;;;;;;;;;;;;;;;;;;29:2:-1;21:6;17:15;117:4;105:10;97:6;88:34;136:17;;-1:-1;2317:29:37;-1:-1:-1;2280:66:37;-1:-1:-1;2362:9:37;2357:785;2381:14;2377:1;:18;2357:785;;;2465:20;2495:6;2488:30;;;2536:11;;2548:1;2536:14;;;;;;;;;;;;;;;2568:6;2488:100;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;2488:100:37;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;2488:100:37;;;;;;;101:4:-1;97:9;90:4;84;80:15;76:31;69:5;65:43;126:6;120:4;113:20;0:138;2488:100:37;;;;;;;;;2465:123;;2702:20;;2723:1;2702:23;;;;;;;;;;;;;2686:12;:39;2682:450;;2776:20;;2797:1;2776:23;;;;;;;;;;;;;2745:25;2771:1;2745:28;;;;;;;;;;;;;:54;;;;;2682:450;;;2933:16;;2929:106;;3004:12;2973:25;2999:1;2973:28;;;;;;;;;;;;;:43;;;;;2929:106;3076:41;3104:12;3076:20;;3097:1;3076:23;;;;;;;;;;;;;:27;;:41;;;;:::i;:::-;3053:17;3071:1;3053:20;;;;;;;;;;;;;:64;;;;;2682:450;-1:-1:-1;2397:3:37;;2357:785;;;-1:-1:-1;3173:25:37;;;;-1:-1:-1;1771:1475:37;-1:-1:-1;;;;;;;;1771:1475:37:o;1995:416:115:-;2107:7;2142:1;2138;:5;2130:14;;;;;;2172:1;2155:14;2183:198;2207:3;2203:1;:7;2183:198;;;2255:6;2349:21;2255:6;2368:1;2349:21;:18;:21;:::i;:::-;2340:30;-1:-1:-1;;2212:3:115;;2183:198;;;-1:-1:-1;2398:6:115;-1:-1:-1;1995:416:115;;;;;:::o;1739:121:174:-;1797:7;1824:6;1816:15;;;;;;1852:1;1848;:5;;;;;;;1739:121;-1:-1:-1;;;1739:121:174:o;782:296::-;840:7;937:1;933;:5;925:14;;;;;;949:9;965:1;961;:5;;;;;;;782:296;-1:-1:-1;;;;782:296:174:o;231:421::-;289:7;529:6;525:45;;-1:-1:-1;558:1:174;551:8;;525:45;592:5;;;596:1;592;:5;:1;615:5;;;;;:10;607:19;;;;;;644:1;231:421;-1:-1:-1;;;231:421:174:o;1211:145::-;1269:7;1301:1;1296;:6;;1288:15;;;;;;-1:-1:-1;1325:5:174;;;1211:145::o;5:118:-1:-;;72:46;110:6;97:20;72:46;;148:352;;;278:3;271:4;263:6;259:17;255:27;245:2;;296:1;293;286:12;245:2;-1:-1;316:20;;356:18;345:30;;342:2;;;388:1;385;378:12;342:2;422:4;414:6;410:17;398:29;;473:3;465:4;457:6;453:17;443:8;439:32;436:41;433:2;;;490:1;487;480:12;433:2;238:262;;;;;;886:118;;953:46;991:6;978:20;953:46;;1011:122;;1089:39;1120:6;1114:13;1089:39;;1140:929;;;;;;;1365:3;1353:9;1344:7;1340:23;1336:33;1333:2;;;1382:1;1379;1372:12;1333:2;1417:31;;1468:18;1457:30;;1454:2;;;1500:1;1497;1490:12;1454:2;1528:80;1600:7;1591:6;1580:9;1576:22;1528:80;;;1518:90;;;;1396:218;1673:2;1662:9;1658:18;1645:32;1697:18;1689:6;1686:30;1683:2;;;1729:1;1726;1719:12;1683:2;1757:80;1829:7;1820:6;1809:9;1805:22;1757:80;;;1747:90;;;;1624:219;1874:2;1892:53;1937:7;1928:6;1917:9;1913:22;1892:53;;;1882:63;;1853:98;1982:2;2000:53;2045:7;2036:6;2025:9;2021:22;2000:53;;;1990:63;;1961:98;1327:742;;;;;;;;;2076:522;;;;2232:2;2220:9;2211:7;2207:23;2203:32;2200:2;;;2248:1;2245;2238:12;2200:2;2283:31;;2334:18;2323:30;;2320:2;;;2366:1;2363;2356:12;2320:2;2394:80;2466:7;2457:6;2446:9;2442:22;2394:80;;;2384:90;;;;2262:218;2511:2;2529:53;2574:7;2565:6;2554:9;2550:22;2529:53;;;2519:63;;2490:98;2194:404;;;;;;2605:647;;;;;2778:2;2766:9;2757:7;2753:23;2749:32;2746:2;;;2794:1;2791;2784:12;2746:2;2829:31;;2880:18;2869:30;;2866:2;;;2912:1;2909;2902:12;2866:2;2940:80;3012:7;3003:6;2992:9;2988:22;2940:80;;;2930:90;;;;2808:218;3057:2;3075:53;3120:7;3111:6;3100:9;3096:22;3075:53;;;3065:63;;3036:98;3165:2;3183:53;3228:7;3219:6;3208:9;3204:22;3183:53;;;3173:63;;3144:98;2740:512;;;;;;;;3259:263;;3374:2;3362:9;3353:7;3349:23;3345:32;3342:2;;;3390:1;3387;3380:12;3342:2;3425:1;3442:64;3498:7;3478:9;3442:64;;;3432:74;3336:186;-1:-1;;;;3336:186;3530:189;;3625:54;3675:3;3667:6;3625:54;;;-1:-1;;3708:4;3699:14;;3618:101;3727:120;3810:31;3835:5;3810:31;;;3805:3;3798:44;3792:55;;;3885:645;;4038:54;4086:5;4038:54;;;4105:94;4192:6;4187:3;4105:94;;;4098:101;;4219:56;4269:5;4219:56;;;4296:1;4281:227;4306:6;4303:1;4300:13;4281:227;;;4353:71;4420:3;4411:6;4405:13;4353:71;;;4346:78;;4441:60;4494:6;4441:60;;;4431:70;-1:-1;4328:1;4321:9;4281:227;;;-1:-1;4521:3;;4017:513;-1:-1;;;;4017:513;4539:465;;4699:67;4763:2;4758:3;4699:67;;;4799:66;4779:87;;4900:66;4895:2;4886:12;;4879:88;4995:2;4986:12;;4685:319;-1:-1;;4685:319;5012:118;5093:31;5118:5;5093:31;;5137:324;5283:2;5268:18;;5297:71;5272:9;5341:6;5297:71;;;5379:72;5447:2;5436:9;5432:18;5423:6;5379:72;;5468:377;5644:2;5658:47;;;5629:18;;5719:116;5629:18;5821:6;5719:116;;5852:644;6106:2;6120:47;;;6091:18;;6181:116;6091:18;6283:6;6181:116;;;6173:124;;6345:9;6339:4;6335:20;6330:2;6319:9;6315:18;6308:48;6370:116;6481:4;6472:6;6370:116;;6503:407;6694:2;6708:47;;;6679:18;;6769:131;6679:18;6769:131;;6919:121;7028:4;7016:17;;6997:43;7049:107;7139:12;;7123:33;7295:186;7421:19;;;7470:4;7461:14;;7414:67;7661:105;;7853:42;7842:54;;7730:31;7825:76;7908:79;7977:5;7960:27",source:'/*\n    Copyright 2018 Set Labs Inc.\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\npragma solidity 0.5.7;\npragma experimental "ABIEncoderV2";\n\nimport { SafeMath } from "openzeppelin-solidity/contracts/math/SafeMath.sol";\n\nimport { IVault } from "../interfaces/IVault.sol";\nimport { CommonMath } from "../../lib/CommonMath.sol";\n\n\n/**\n * @title CoreIssuanceLibrary\n * @author Set Protocol\n *\n * This library contains functions for calculating deposit, withdrawal,and transfer quantities\n */\nlibrary CoreIssuanceLibrary {\n\n    using SafeMath for uint256;\n\n    /**\n     * Calculate the quantities required to deposit and decrement during issuance. Takes into account\n     * the tokens an owner already has in the vault.\n     *\n     * @param _components                           Addresses of components\n     * @param _componentQuantities                  Component quantities to increment and withdraw\n     * @param _owner                                Address to deposit and decrement quantities from\n     * @param _vault                                Address to vault\n     * @return uint256[] decrementQuantities        Quantities to decrement from vault\n     * @return uint256[] depositQuantities          Quantities to deposit into the vault\n     */\n    function calculateDepositAndDecrementQuantities(\n        address[] calldata _components,\n        uint256[] calldata _componentQuantities,\n        address _owner,\n        address _vault\n    )\n        external\n        view\n        returns (\n            uint256[] memory /* decrementQuantities */,\n            uint256[] memory /* depositQuantities */\n        )\n    {\n        uint256 componentCount = _components.length;\n        uint256[] memory decrementTokenOwnerValues = new uint256[](componentCount);\n        uint256[] memory depositQuantities = new uint256[](componentCount);\n\n        for (uint256 i = 0; i < componentCount; i++) {\n            // Fetch component quantity in vault\n            uint256 vaultBalance = IVault(_vault).getOwnerBalance(\n                _components[i],\n                _owner\n            );\n\n            // If the vault holds enough components, decrement the full amount\n            if (vaultBalance >= _componentQuantities[i]) {\n                decrementTokenOwnerValues[i] = _componentQuantities[i];\n            } else {\n                // User has less than required amount, decrement the vault by full balance\n                if (vaultBalance > 0) {\n                    decrementTokenOwnerValues[i] = vaultBalance;\n                }\n\n                depositQuantities[i] = _componentQuantities[i].sub(vaultBalance);\n            }\n        }\n\n        return (\n            decrementTokenOwnerValues,\n            depositQuantities\n        );\n    }\n\n    /**\n     * Calculate the quantities required to withdraw and increment during redeem and withdraw. Takes into\n     * account a bitmask exclusion parameter.\n     *\n     * @param _componentQuantities                  Component quantities to increment and withdraw\n     * @param _toExclude                            Mask of indexes of tokens to exclude from withdrawing\n     * @return uint256[] incrementQuantities        Quantities to increment in vault\n     * @return uint256[] withdrawQuantities         Quantities to withdraw from vault\n     */\n    function calculateWithdrawAndIncrementQuantities(\n        uint256[] calldata _componentQuantities,\n        uint256 _toExclude\n    )\n        external\n        pure\n        returns (\n            uint256[] memory /* incrementQuantities */,\n            uint256[] memory /* withdrawQuantities */\n        )\n    {\n        uint256 componentCount = _componentQuantities.length;\n        uint256[] memory incrementTokenOwnerValues = new uint256[](componentCount);\n        uint256[] memory withdrawToValues = new uint256[](componentCount);\n\n        // Loop through and decrement vault balances for the set, withdrawing if requested\n        for (uint256 i = 0; i < componentCount; i++) {\n            // Calculate bit index of current component\n            uint256 componentBitIndex = CommonMath.safePower(2, i);\n\n            // Transfer to user unless component index is included in _toExclude\n            if ((_toExclude & componentBitIndex) != 0) {\n                incrementTokenOwnerValues[i] = _componentQuantities[i];\n            } else {\n                withdrawToValues[i] = _componentQuantities[i];\n            }\n        }\n\n        return (\n            incrementTokenOwnerValues,\n            withdrawToValues\n        );\n    }\n\n    /**\n     * Calculate the required component quantities required for issuance or rdemption for a given \n     * quantity of Set Tokens\n     *\n     * @param _componentUnits   The units of the component token\n     * @param _naturalUnit      The natural unit of the Set token\n     * @param _quantity         The number of tokens being redeem\n     * @return uint256[]        Required quantities in base units of components\n     */\n    function calculateRequiredComponentQuantities(\n        uint256[] calldata _componentUnits,\n        uint256 _naturalUnit,\n        uint256 _quantity\n    )\n        external\n        pure\n        returns (uint256[] memory)\n    {\n        require(\n            _quantity.mod(_naturalUnit) == 0,\n            "CoreIssuanceLibrary: Quantity must be a multiple of nat unit"\n        );\n\n        uint256[] memory tokenValues = new uint256[](_componentUnits.length);\n\n        // Transfer the underlying tokens to the corresponding token balances\n        for (uint256 i = 0; i < _componentUnits.length; i++) {\n            tokenValues[i] = _quantity.div(_naturalUnit).mul(_componentUnits[i]);\n        }\n\n        return tokenValues;\n    }\n\n}\n',sourcePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/CoreIssuanceLibrary.sol",ast:{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/CoreIssuanceLibrary.sol",exportedSymbols:{CoreIssuanceLibrary:[6077]},id:6078,nodeType:"SourceUnit",nodes:[{id:5802,literals:["solidity","0.5",".7"],nodeType:"PragmaDirective",src:"597:22:37"},{id:5803,literals:["experimental","ABIEncoderV2"],nodeType:"PragmaDirective",src:"620:35:37"},{absolutePath:"openzeppelin-solidity/contracts/math/SafeMath.sol",file:"openzeppelin-solidity/contracts/math/SafeMath.sol",id:5805,nodeType:"ImportDirective",scope:6078,sourceUnit:29641,src:"657:77:37",symbolAliases:[{foreign:5804,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IVault.sol",file:"../interfaces/IVault.sol",id:5807,nodeType:"ImportDirective",scope:6078,sourceUnit:5783,src:"736:50:37",symbolAliases:[{foreign:5806,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/CommonMath.sol",file:"../../lib/CommonMath.sol",id:5809,nodeType:"ImportDirective",scope:6078,sourceUnit:23437,src:"787:54:37",symbolAliases:[{foreign:5808,local:null}],unitAlias:""},{baseContracts:[],contractDependencies:[],contractKind:"library",documentation:"@title CoreIssuanceLibrary\n@author Set Protocol\n * This library contains functions for calculating deposit, withdrawal,and transfer quantities",fullyImplemented:true,id:6077,linearizedBaseContracts:[6077],name:"CoreIssuanceLibrary",nodeType:"ContractDefinition",nodes:[{id:5812,libraryName:{contractScope:null,id:5810,name:"SafeMath",nodeType:"UserDefinedTypeName",referencedDeclaration:29640,src:"1045:8:37",typeDescriptions:{typeIdentifier:"t_contract$_SafeMath_$29640",typeString:"library SafeMath"}},nodeType:"UsingForDirective",src:"1039:27:37",typeName:{id:5811,name:"uint256",nodeType:"ElementaryTypeName",src:"1058:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}},{body:{id:5922,nodeType:"Block",src:"2133:1113:37",statements:[{assignments:[5832],declarations:[{constant:false,id:5832,name:"componentCount",nodeType:"VariableDeclaration",scope:5922,src:"2143:22:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:5831,name:"uint256",nodeType:"ElementaryTypeName",src:"2143:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:5835,initialValue:{argumentTypes:null,expression:{argumentTypes:null,id:5833,name:"_components",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5815,src:"2168:11:37",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_calldata_ptr",typeString:"address[] calldata"}},id:5834,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"length",nodeType:"MemberAccess",referencedDeclaration:null,src:"2168:18:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"2143:43:37"},{assignments:[5839],declarations:[{constant:false,id:5839,name:"decrementTokenOwnerValues",nodeType:"VariableDeclaration",scope:5922,src:"2196:42:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5837,name:"uint256",nodeType:"ElementaryTypeName",src:"2196:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5838,length:null,nodeType:"ArrayTypeName",src:"2196:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:5845,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:5843,name:"componentCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5832,src:"2255:14:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:5842,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"NewExpression",src:"2241:13:37",typeDescriptions:{typeIdentifier:"t_function_objectcreation_pure$_t_uint256_$returns$_t_array$_t_uint256_$dyn_memory_$",typeString:"function (uint256) pure returns (uint256[] memory)"},typeName:{baseType:{id:5840,name:"uint256",nodeType:"ElementaryTypeName",src:"2245:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5841,
length:null,nodeType:"ArrayTypeName",src:"2245:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}}},id:5844,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2241:29:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"2196:74:37"},{assignments:[5849],declarations:[{constant:false,id:5849,name:"depositQuantities",nodeType:"VariableDeclaration",scope:5922,src:"2280:34:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5847,name:"uint256",nodeType:"ElementaryTypeName",src:"2280:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5848,length:null,nodeType:"ArrayTypeName",src:"2280:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:5855,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:5853,name:"componentCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5832,src:"2331:14:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:5852,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"NewExpression",src:"2317:13:37",typeDescriptions:{typeIdentifier:"t_function_objectcreation_pure$_t_uint256_$returns$_t_array$_t_uint256_$dyn_memory_$",typeString:"function (uint256) pure returns (uint256[] memory)"},typeName:{baseType:{id:5850,name:"uint256",nodeType:"ElementaryTypeName",src:"2321:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5851,length:null,nodeType:"ArrayTypeName",src:"2321:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}}},id:5854,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2317:29:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"2280:66:37"},{body:{id:5916,nodeType:"Block",src:"2402:740:37",statements:[{assignments:[5867],declarations:[{constant:false,id:5867,name:"vaultBalance",nodeType:"VariableDeclaration",scope:5916,src:"2465:20:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:5866,name:"uint256",nodeType:"ElementaryTypeName",src:"2465:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:5877,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,baseExpression:{argumentTypes:null,id:5872,name:"_components",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5815,src:"2536:11:37",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_calldata_ptr",typeString:"address[] calldata"}},id:5874,indexExpression:{argumentTypes:null,id:5873,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"2548:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"2536:14:37",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:5875,name:"_owner",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5820,src:"2568:6:37",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:5869,name:"_vault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5822,src:"2495:6:37",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:5868,name:"IVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5782,src:"2488:6:37",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_IVault_$5782_$",typeString:"type(contract IVault)"}},id:5870,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2488:14:37",typeDescriptions:{typeIdentifier:"t_contract$_IVault_$5782",typeString:"contract IVault"}},id:5871,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getOwnerBalance",nodeType:"MemberAccess",referencedDeclaration:5781,src:"2488:30:37",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$_t_address_$returns$_t_uint256_$",typeString:"function (address,address) view external returns (uint256)"}},id:5876,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2488:100:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"2465:123:37"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:5882,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:5878,name:"vaultBalance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5867,src:"2686:12:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:">=",rightExpression:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5879,name:"_componentQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5818,src:"2702:20:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:5881,indexExpression:{argumentTypes:null,id:5880,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"2723:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"2702:23:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2686:39:37",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:{id:5914,nodeType:"Block",src:"2820:312:37",statements:[{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:5894,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:5892,name:"vaultBalance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5867,src:"2933:12:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:">",rightExpression:{argumentTypes:null,hexValue:"30",id:5893,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"2948:1:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"2933:16:37",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:null,id:5902,nodeType:"IfStatement",src:"2929:106:37",trueBody:{id:5901,nodeType:"Block",src:"2951:84:37",statements:[{expression:{argumentTypes:null,id:5899,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5895,name:"decrementTokenOwnerValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5839,src:"2973:25:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:5897,indexExpression:{argumentTypes:null,id:5896,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"2999:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"2973:28:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,id:5898,name:"vaultBalance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5867,src:"3004:12:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2973:43:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5900,nodeType:"ExpressionStatement",src:"2973:43:37"}]}},{expression:{argumentTypes:null,id:5912,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5903,name:"depositQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5849,src:"3053:17:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:5905,indexExpression:{argumentTypes:null,id:5904,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"3071:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"3053:20:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,id:5910,name:"vaultBalance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5867,src:"3104:12:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5906,name:"_componentQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5818,src:"3076:20:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:5908,indexExpression:{argumentTypes:null,id:5907,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"3097:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"3076:23:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5909,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sub",nodeType:"MemberAccess",referencedDeclaration:29595,src:"3076:27:37",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:5911,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3076:41:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"3053:64:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5913,nodeType:"ExpressionStatement",src:"3053:64:37"}]},id:5915,nodeType:"IfStatement",src:"2682:450:37",trueBody:{id:5891,nodeType:"Block",src:"2727:87:37",statements:[{expression:{argumentTypes:null,id:5889,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5883,name:"decrementTokenOwnerValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5839,src:"2745:25:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:5885,indexExpression:{argumentTypes:null,id:5884,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"2771:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"2745:28:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5886,name:"_componentQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5818,src:"2776:20:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:5888,indexExpression:{argumentTypes:null,id:5887,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"2797:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"2776:23:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2745:54:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5890,nodeType:"ExpressionStatement",src:"2745:54:37"}]}}]},condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:5862,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:5860,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"2377:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<",rightExpression:{argumentTypes:null,id:5861,name:"componentCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5832,src:"2381:14:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2377:18:37",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:5917,initializationExpression:{assignments:[5857],declarations:[{constant:false,id:5857,name:"i",nodeType:"VariableDeclaration",scope:5917,src:"2362:9:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:5856,name:"uint256",nodeType:"ElementaryTypeName",src:"2362:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:5859,initialValue:{argumentTypes:null,hexValue:"30",id:5858,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"2374:1:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},nodeType:"VariableDeclarationStatement",src:"2362:13:37"},loopExpression:{expression:{argumentTypes:null,id:5864,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"UnaryOperation",operator:"++",prefix:false,src:"2397:3:37",subExpression:{argumentTypes:null,id:5863,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"2397:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5865,nodeType:"ExpressionStatement",src:"2397:3:37"},nodeType:"ForStatement",src:"2357:785:37"},{expression:{argumentTypes:null,components:[{argumentTypes:null,id:5918,name:"decrementTokenOwnerValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5839,src:"3173:25:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},{argumentTypes:null,id:5919,name:"depositQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5849,src:"3212:17:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}}],id:5920,isConstant:false,isInlineArray:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"TupleExpression",src:"3159:80:37",typeDescriptions:{typeIdentifier:"t_tuple$_t_array$_t_uint256_$dyn_memory_ptr_$_t_array$_t_uint256_$dyn_memory_ptr_$",typeString:"tuple(uint256[] memory,uint256[] memory)"}},functionReturnParameters:5830,id:5921,nodeType:"Return",src:"3152:87:37"}]},documentation:"Calculate the quantities required to deposit and decrement during issuance. Takes into account\nthe tokens an owner already has in the vault.\n     * @param _components                           Addresses of components\n@param _componentQuantities                  Component quantities to increment and withdraw\n@param _owner                                Address to deposit and decrement quantities from\n@param _vault                                Address to vault\n@return uint256[] decrementQuantities        Quantities to decrement from vault\n@return uint256[] depositQuantities          Quantities to deposit into the vault",id:5923,implemented:true,kind:"function",modifiers:[],name:"calculateDepositAndDecrementQuantities",nodeType:"FunctionDefinition",parameters:{id:5823,nodeType:"ParameterList",parameters:[{constant:false,id:5815,name:"_components",nodeType:"VariableDeclaration",scope:5923,src:"1828:30:37",stateVariable:false,storageLocation:"calldata",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_calldata_ptr",typeString:"address[]"},typeName:{baseType:{id:5813,name:"address",nodeType:"ElementaryTypeName",src:"1828:7:37",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},id:5814,length:null,nodeType:"ArrayTypeName",src:"1828:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_storage_ptr",typeString:"address[]"}},value:null,visibility:"internal"},{constant:false,id:5818,name:"_componentQuantities",nodeType:"VariableDeclaration",scope:5923,src:"1868:39:37",stateVariable:false,storageLocation:"calldata",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5816,name:"uint256",nodeType:"ElementaryTypeName",src:"1868:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5817,length:null,nodeType:"ArrayTypeName",src:"1868:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"},{constant:false,id:5820,name:"_owner",nodeType:"VariableDeclaration",scope:5923,src:"1917:14:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:5819,name:"address",nodeType:"ElementaryTypeName",src:"1917:7:37",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:5822,name:"_vault",nodeType:"VariableDeclaration",scope:5923,src:"1941:14:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:5821,name:"address",nodeType:"ElementaryTypeName",src:"1941:7:37",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"}],src:"1818:143:37"},returnParameters:{id:5830,nodeType:"ParameterList",parameters:[{constant:false,id:5826,name:"",nodeType:"VariableDeclaration",scope:5923,src:"2022:16:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5824,name:"uint256",nodeType:"ElementaryTypeName",src:"2022:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5825,length:null,nodeType:"ArrayTypeName",src:"2022:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"},{constant:false,id:5829,name:"",nodeType:"VariableDeclaration",scope:5923,src:"2078:16:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5827,name:"uint256",nodeType:"ElementaryTypeName",src:"2078:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5828,length:null,nodeType:"ArrayTypeName",src:"2078:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],src:"2008:120:37"},scope:6077,src:"1771:1475:37",stateMutability:"view",superFunction:null,visibility:"external"},{body:{id:6011,nodeType:"Block",src:"4107:915:37",statements:[{assignments:[5938],declarations:[{constant:false,id:5938,name:"componentCount",nodeType:"VariableDeclaration",scope:6011,src:"4117:22:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:5937,name:"uint256",nodeType:"ElementaryTypeName",src:"4117:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:5941,initialValue:{argumentTypes:null,expression:{argumentTypes:null,id:5939,name:"_componentQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5926,src:"4142:20:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:5940,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"length",nodeType:"MemberAccess",referencedDeclaration:null,src:"4142:27:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4117:52:37"},{assignments:[5945],declarations:[{constant:false,id:5945,name:"incrementTokenOwnerValues",nodeType:"VariableDeclaration",scope:6011,src:"4179:42:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5943,name:"uint256",nodeType:"ElementaryTypeName",src:"4179:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5944,length:null,nodeType:"ArrayTypeName",src:"4179:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:5951,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:5949,name:"componentCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5938,src:"4238:14:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:5948,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"NewExpression",src:"4224:13:37",typeDescriptions:{typeIdentifier:"t_function_objectcreation_pure$_t_uint256_$returns$_t_array$_t_uint256_$dyn_memory_$",typeString:"function (uint256) pure returns (uint256[] memory)"},typeName:{baseType:{id:5946,name:"uint256",nodeType:"ElementaryTypeName",src:"4228:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5947,length:null,nodeType:"ArrayTypeName",src:"4228:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}}},id:5950,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4224:29:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"4179:74:37"},{assignments:[5955],declarations:[{constant:false,id:5955,name:"withdrawToValues",nodeType:"VariableDeclaration",scope:6011,src:"4263:33:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5953,name:"uint256",nodeType:"ElementaryTypeName",src:"4263:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5954,length:null,nodeType:"ArrayTypeName",src:"4263:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:5961,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:5959,name:"componentCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5938,src:"4313:14:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:5958,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"NewExpression",src:"4299:13:37",typeDescriptions:{typeIdentifier:"t_function_objectcreation_pure$_t_uint256_$returns$_t_array$_t_uint256_$dyn_memory_$",typeString:"function (uint256) pure returns (uint256[] memory)"},typeName:{baseType:{id:5956,name:"uint256",nodeType:"ElementaryTypeName",src:"4303:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5957,length:null,nodeType:"ArrayTypeName",src:"4303:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}}},id:5960,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4299:29:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"4263:65:37"},{body:{id:6005,nodeType:"Block",src:"4475:444:37",statements:[{assignments:[5973],declarations:[{constant:false,id:5973,name:"componentBitIndex",nodeType:"VariableDeclaration",scope:6005,src:"4545:25:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:5972,name:"uint256",nodeType:"ElementaryTypeName",src:"4545:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:5979,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,hexValue:"32",id:5976,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"4594:1:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_2_by_1",typeString:"int_const 2"},value:"2"},{argumentTypes:null,id:5977,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5963,src:"4597:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_rational_2_by_1",typeString:"int_const 2"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:5974,name:"CommonMath",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:23436,src:"4573:10:37",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_CommonMath_$23436_$",typeString:"type(library CommonMath)"}},id:5975,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"safePower",nodeType:"MemberAccess",referencedDeclaration:23203,src:"4573:20:37",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:5978,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4573:26:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4545:54:37"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:5985,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,components:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:5982,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:5980,name:"_toExclude",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5928,src:"4700:10:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"&",rightExpression:{argumentTypes:null,id:5981,name:"componentBitIndex",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5973,src:"4713:17:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"4700:30:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],id:5983,isConstant:false,isInlineArray:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"TupleExpression",src:"4699:32:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"!=",rightExpression:{argumentTypes:null,hexValue:"30",id:5984,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"4735:1:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"4699:37:37",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:{id:6003,nodeType:"Block",src:"4831:78:37",statements:[{expression:{argumentTypes:null,id:6001,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5995,name:"withdrawToValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5955,src:"4849:16:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:5997,indexExpression:{argumentTypes:null,id:5996,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5963,src:"4866:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"4849:19:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5998,name:"_componentQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5926,src:"4871:20:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:6e3,indexExpression:{argumentTypes:null,id:5999,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5963,src:"4892:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"4871:23:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"4849:45:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6002,nodeType:"ExpressionStatement",src:"4849:45:37"}]},id:6004,nodeType:"IfStatement",src:"4695:214:37",trueBody:{id:5994,nodeType:"Block",src:"4738:87:37",statements:[{expression:{argumentTypes:null,id:5992,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5986,name:"incrementTokenOwnerValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5945,src:"4756:25:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:5988,indexExpression:{argumentTypes:null,id:5987,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5963,src:"4782:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"4756:28:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5989,name:"_componentQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5926,src:"4787:20:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:5991,indexExpression:{argumentTypes:null,id:5990,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5963,src:"4808:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"
}},isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"4787:23:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"4756:54:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5993,nodeType:"ExpressionStatement",src:"4756:54:37"}]}}]},condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:5968,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:5966,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5963,src:"4450:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<",rightExpression:{argumentTypes:null,id:5967,name:"componentCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5938,src:"4454:14:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"4450:18:37",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:6006,initializationExpression:{assignments:[5963],declarations:[{constant:false,id:5963,name:"i",nodeType:"VariableDeclaration",scope:6006,src:"4435:9:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:5962,name:"uint256",nodeType:"ElementaryTypeName",src:"4435:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:5965,initialValue:{argumentTypes:null,hexValue:"30",id:5964,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"4447:1:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},nodeType:"VariableDeclarationStatement",src:"4435:13:37"},loopExpression:{expression:{argumentTypes:null,id:5970,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"UnaryOperation",operator:"++",prefix:false,src:"4470:3:37",subExpression:{argumentTypes:null,id:5969,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5963,src:"4470:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5971,nodeType:"ExpressionStatement",src:"4470:3:37"},nodeType:"ForStatement",src:"4430:489:37"},{expression:{argumentTypes:null,components:[{argumentTypes:null,id:6007,name:"incrementTokenOwnerValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5945,src:"4950:25:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},{argumentTypes:null,id:6008,name:"withdrawToValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5955,src:"4989:16:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}}],id:6009,isConstant:false,isInlineArray:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"TupleExpression",src:"4936:79:37",typeDescriptions:{typeIdentifier:"t_tuple$_t_array$_t_uint256_$dyn_memory_ptr_$_t_array$_t_uint256_$dyn_memory_ptr_$",typeString:"tuple(uint256[] memory,uint256[] memory)"}},functionReturnParameters:5936,id:6010,nodeType:"Return",src:"4929:86:37"}]},documentation:"Calculate the quantities required to withdraw and increment during redeem and withdraw. Takes into\naccount a bitmask exclusion parameter.\n     * @param _componentQuantities                  Component quantities to increment and withdraw\n@param _toExclude                            Mask of indexes of tokens to exclude from withdrawing\n@return uint256[] incrementQuantities        Quantities to increment in vault\n@return uint256[] withdrawQuantities         Quantities to withdraw from vault",id:6012,implemented:true,kind:"function",modifiers:[],name:"calculateWithdrawAndIncrementQuantities",nodeType:"FunctionDefinition",parameters:{id:5929,nodeType:"ParameterList",parameters:[{constant:false,id:5926,name:"_componentQuantities",nodeType:"VariableDeclaration",scope:6012,src:"3861:39:37",stateVariable:false,storageLocation:"calldata",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5924,name:"uint256",nodeType:"ElementaryTypeName",src:"3861:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5925,length:null,nodeType:"ArrayTypeName",src:"3861:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"},{constant:false,id:5928,name:"_toExclude",nodeType:"VariableDeclaration",scope:6012,src:"3910:18:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:5927,name:"uint256",nodeType:"ElementaryTypeName",src:"3910:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"3851:83:37"},returnParameters:{id:5936,nodeType:"ParameterList",parameters:[{constant:false,id:5932,name:"",nodeType:"VariableDeclaration",scope:6012,src:"3995:16:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5930,name:"uint256",nodeType:"ElementaryTypeName",src:"3995:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5931,length:null,nodeType:"ArrayTypeName",src:"3995:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"},{constant:false,id:5935,name:"",nodeType:"VariableDeclaration",scope:6012,src:"4051:16:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5933,name:"uint256",nodeType:"ElementaryTypeName",src:"4051:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5934,length:null,nodeType:"ArrayTypeName",src:"4051:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],src:"3981:121:37"},scope:6077,src:"3803:1219:37",stateMutability:"pure",superFunction:null,visibility:"external"},{body:{id:6075,nodeType:"Block",src:"5679:498:37",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:6031,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,arguments:[{argumentTypes:null,id:6028,name:"_naturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6017,src:"5724:12:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:6026,name:"_quantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6019,src:"5710:9:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6027,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mod",nodeType:"MemberAccess",referencedDeclaration:29639,src:"5710:13:37",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:6029,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5710:27:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"==",rightExpression:{argumentTypes:null,hexValue:"30",id:6030,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"5741:1:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"5710:32:37",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"436f726549737375616e63654c6962726172793a205175616e74697479206d7573742062652061206d756c7469706c65206f66206e617420756e6974",id:6032,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"5756:62:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_a66cfd301825a09bc4f7398874ab5e208ea6edc33f7beb5eb912ab8a7a169d68",typeString:'literal_string "CoreIssuanceLibrary: Quantity must be a multiple of nat unit"'},value:"CoreIssuanceLibrary: Quantity must be a multiple of nat unit"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_a66cfd301825a09bc4f7398874ab5e208ea6edc33f7beb5eb912ab8a7a169d68",typeString:'literal_string "CoreIssuanceLibrary: Quantity must be a multiple of nat unit"'}],id:6025,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"5689:7:37",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:6033,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5689:139:37",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:6034,nodeType:"ExpressionStatement",src:"5689:139:37"},{assignments:[6038],declarations:[{constant:false,id:6038,name:"tokenValues",nodeType:"VariableDeclaration",scope:6075,src:"5839:28:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:6036,name:"uint256",nodeType:"ElementaryTypeName",src:"5839:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6037,length:null,nodeType:"ArrayTypeName",src:"5839:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:6045,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,id:6042,name:"_componentUnits",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6015,src:"5884:15:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:6043,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"length",nodeType:"MemberAccess",referencedDeclaration:null,src:"5884:22:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:6041,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"NewExpression",src:"5870:13:37",typeDescriptions:{typeIdentifier:"t_function_objectcreation_pure$_t_uint256_$returns$_t_array$_t_uint256_$dyn_memory_$",typeString:"function (uint256) pure returns (uint256[] memory)"},typeName:{baseType:{id:6039,name:"uint256",nodeType:"ElementaryTypeName",src:"5874:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6040,length:null,nodeType:"ArrayTypeName",src:"5874:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}}},id:6044,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5870:37:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"5839:68:37"},{body:{id:6071,nodeType:"Block",src:"6049:93:37",statements:[{expression:{argumentTypes:null,id:6069,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:6057,name:"tokenValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6038,src:"6063:11:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:6059,indexExpression:{argumentTypes:null,id:6058,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6047,src:"6075:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"6063:14:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,baseExpression:{argumentTypes:null,id:6065,name:"_componentUnits",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6015,src:"6112:15:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:6067,indexExpression:{argumentTypes:null,id:6066,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6047,src:"6128:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"6112:18:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:6062,name:"_naturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6017,src:"6094:12:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:6060,name:"_quantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6019,src:"6080:9:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6061,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"6080:13:37",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:6063,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6080:27:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6064,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"6080:31:37",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:6068,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6080:51:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"6063:68:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6070,nodeType:"ExpressionStatement",src:"6063:68:37"}]},condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:6053,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:6050,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6047,src:"6016:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<",rightExpression:{argumentTypes:null,expression:{argumentTypes:null,id:6051,name:"_componentUnits",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6015,src:"6020:15:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:6052,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"length",nodeType:"MemberAccess",referencedDeclaration:null,src:"6020:22:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"6016:26:37",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:6072,initializationExpression:{assignments:[6047],declarations:[{constant:false,id:6047,name:"i",nodeType:"VariableDeclaration",scope:6072,src:"6001:9:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:6046,name:"uint256",nodeType:"ElementaryTypeName",src:"6001:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:6049,initialValue:{argumentTypes:null,hexValue:"30",id:6048,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"6013:1:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},nodeType:"VariableDeclarationStatement",src:"6001:13:37"},loopExpression:{expression:{argumentTypes:null,id:6055,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"UnaryOperation",operator:"++",prefix:false,src:"6044:3:37",subExpression:{argumentTypes:null,id:6054,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6047,src:"6044:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6056,nodeType:"ExpressionStatement",src:"6044:3:37"},nodeType:"ForStatement",src:"5996:146:37"},{expression:{argumentTypes:null,id:6073,name:"tokenValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6038,src:"6159:11:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},functionReturnParameters:6024,id:6074,nodeType:"Return",src:"6152:18:37"}]},documentation:"Calculate the required component quantities required for issuance or rdemption for a given \nquantity of Set Tokens\n     * @param _componentUnits   The units of the component token\n@param _naturalUnit      The natural unit of the Set token\n@param _quantity         The number of tokens being redeem\n@return uint256[]        Required quantities in base units of components",id:6076,implemented:true,kind:"function",modifiers:[],name:"calculateRequiredComponentQuantities",nodeType:"FunctionDefinition",parameters:{id:6020,nodeType:"ParameterList",parameters:[{constant:false,id:6015,name:"_componentUnits",nodeType:"VariableDeclaration",scope:6076,src:"5512:34:37",stateVariable:false,storageLocation:"calldata",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[]"},typeName:{baseType:{id:6013,name:"uint256",nodeType:"ElementaryTypeName",src:"5512:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6014,length:null,nodeType:"ArrayTypeName",src:"5512:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"},{constant:false,id:6017,name:"_naturalUnit",nodeType:"VariableDeclaration",scope:6076,src:"5556:20:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:6016,name:"uint256",nodeType:"ElementaryTypeName",src:"5556:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:6019,name:"_quantity",nodeType:"VariableDeclaration",scope:6076,src:"5586:17:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:6018,name:"uint256",nodeType:"ElementaryTypeName",src:"5586:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"5502:107:37"},returnParameters:{id:6024,nodeType:"ParameterList",parameters:[{constant:false,id:6023,name:"",nodeType:"VariableDeclaration",scope:6076,src:"5657:16:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:6021,name:"uint256",nodeType:"ElementaryTypeName",src:"5657:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6022,length:null,nodeType:"ArrayTypeName",src:"5657:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],src:"5656:18:37"},scope:6077,src:"5457:720:37",stateMutability:"pure",superFunction:null,visibility:"external"}],scope:6078,src:"1004:5176:37"}],src:"597:5584:37"},legacyAST:{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/CoreIssuanceLibrary.sol",exportedSymbols:{CoreIssuanceLibrary:[6077]},id:6078,nodeType:"SourceUnit",nodes:[{id:5802,literals:["solidity","0.5",".7"],nodeType:"PragmaDirective",src:"597:22:37"},{id:5803,literals:["experimental","ABIEncoderV2"],nodeType:"PragmaDirective",src:"620:35:37"},{absolutePath:"openzeppelin-solidity/contracts/math/SafeMath.sol",file:"openzeppelin-solidity/contracts/math/SafeMath.sol",id:5805,nodeType:"ImportDirective",scope:6078,sourceUnit:29641,src:"657:77:37",symbolAliases:[{foreign:5804,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IVault.sol",file:"../interfaces/IVault.sol",id:5807,nodeType:"ImportDirective",scope:6078,sourceUnit:5783,src:"736:50:37",symbolAliases:[{foreign:5806,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/CommonMath.sol",file:"../../lib/CommonMath.sol",id:5809,nodeType:"ImportDirective",scope:6078,sourceUnit:23437,src:"787:54:37",symbolAliases:[{foreign:5808,local:null}],unitAlias:""},{baseContracts:[],contractDependencies:[],contractKind:"library",documentation:"@title CoreIssuanceLibrary\n@author Set Protocol\n * This library contains functions for calculating deposit, withdrawal,and transfer quantities",fullyImplemented:true,id:6077,linearizedBaseContracts:[6077],name:"CoreIssuanceLibrary",nodeType:"ContractDefinition",nodes:[{id:5812,libraryName:{contractScope:null,id:5810,name:"SafeMath",nodeType:"UserDefinedTypeName",referencedDeclaration:29640,src:"1045:8:37",typeDescriptions:{typeIdentifier:"t_contract$_SafeMath_$29640",typeString:"library SafeMath"}},nodeType:"UsingForDirective",src:"1039:27:37",typeName:{id:5811,name:"uint256",nodeType:"ElementaryTypeName",src:"1058:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}},{body:{id:5922,nodeType:"Block",src:"2133:1113:37",statements:[{assignments:[5832],declarations:[{constant:false,id:5832,name:"componentCount",nodeType:"VariableDeclaration",scope:5922,src:"2143:22:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:5831,name:"uint256",nodeType:"ElementaryTypeName",src:"2143:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:5835,initialValue:{argumentTypes:null,expression:{argumentTypes:null,id:5833,name:"_components",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5815,src:"2168:11:37",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_calldata_ptr",typeString:"address[] calldata"}},id:5834,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"length",nodeType:"MemberAccess",referencedDeclaration:null,src:"2168:18:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"2143:43:37"},{assignments:[5839],declarations:[{constant:false,id:5839,name:"decrementTokenOwnerValues",nodeType:"VariableDeclaration",scope:5922,src:"2196:42:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5837,name:"uint256",nodeType:"ElementaryTypeName",src:"2196:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5838,length:null,nodeType:"ArrayTypeName",src:"2196:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:5845,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:5843,name:"componentCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5832,src:"2255:14:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:5842,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"NewExpression",src:"2241:13:37",typeDescriptions:{typeIdentifier:"t_function_objectcreation_pure$_t_uint256_$returns$_t_array$_t_uint256_$dyn_memory_$",typeString:"function (uint256) pure returns (uint256[] memory)"},typeName:{baseType:{id:5840,name:"uint256",nodeType:"ElementaryTypeName",src:"2245:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5841,length:null,nodeType:"ArrayTypeName",src:"2245:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}}},id:5844,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2241:29:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"2196:74:37"},{assignments:[5849],declarations:[{constant:false,id:5849,name:"depositQuantities",nodeType:"VariableDeclaration",scope:5922,src:"2280:34:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5847,name:"uint256",nodeType:"ElementaryTypeName",src:"2280:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5848,length:null,nodeType:"ArrayTypeName",src:"2280:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:5855,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:5853,name:"componentCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5832,src:"2331:14:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:5852,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"NewExpression",src:"2317:13:37",typeDescriptions:{typeIdentifier:"t_function_objectcreation_pure$_t_uint256_$returns$_t_array$_t_uint256_$dyn_memory_$",typeString:"function (uint256) pure returns (uint256[] memory)"},typeName:{baseType:{id:5850,name:"uint256",nodeType:"ElementaryTypeName",src:"2321:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5851,length:null,nodeType:"ArrayTypeName",src:"2321:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}}},id:5854,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2317:29:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"2280:66:37"},{body:{id:5916,nodeType:"Block",src:"2402:740:37",statements:[{assignments:[5867],declarations:[{constant:false,id:5867,name:"vaultBalance",nodeType:"VariableDeclaration",scope:5916,src:"2465:20:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:5866,name:"uint256",nodeType:"ElementaryTypeName",src:"2465:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:5877,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,baseExpression:{argumentTypes:null,id:5872,name:"_components",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5815,src:"2536:11:37",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_calldata_ptr",typeString:"address[] calldata"}},id:5874,indexExpression:{argumentTypes:null,id:5873,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"2548:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"2536:14:37",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:5875,name:"_owner",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5820,src:"2568:6:37",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:5869,name:"_vault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5822,src:"2495:6:37",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],id:5868,name:"IVault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5782,src:"2488:6:37",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_IVault_$5782_$",typeString:"type(contract IVault)"}},id:5870,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2488:14:37",typeDescriptions:{typeIdentifier:"t_contract$_IVault_$5782",typeString:"contract IVault"}},id:5871,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getOwnerBalance",nodeType:"MemberAccess",referencedDeclaration:5781,src:"2488:30:37",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$_t_address_$returns$_t_uint256_$",typeString:"function (address,address) view external returns (uint256)"}},id:5876,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2488:100:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"2465:123:37"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:5882,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:5878,name:"vaultBalance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5867,src:"2686:12:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:">=",rightExpression:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5879,name:"_componentQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5818,src:"2702:20:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:5881,indexExpression:{argumentTypes:null,id:5880,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"2723:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"2702:23:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2686:39:37",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:{id:5914,nodeType:"Block",src:"2820:312:37",statements:[{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:5894,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,
leftExpression:{argumentTypes:null,id:5892,name:"vaultBalance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5867,src:"2933:12:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:">",rightExpression:{argumentTypes:null,hexValue:"30",id:5893,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"2948:1:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"2933:16:37",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:null,id:5902,nodeType:"IfStatement",src:"2929:106:37",trueBody:{id:5901,nodeType:"Block",src:"2951:84:37",statements:[{expression:{argumentTypes:null,id:5899,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5895,name:"decrementTokenOwnerValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5839,src:"2973:25:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:5897,indexExpression:{argumentTypes:null,id:5896,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"2999:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"2973:28:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,id:5898,name:"vaultBalance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5867,src:"3004:12:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2973:43:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5900,nodeType:"ExpressionStatement",src:"2973:43:37"}]}},{expression:{argumentTypes:null,id:5912,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5903,name:"depositQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5849,src:"3053:17:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:5905,indexExpression:{argumentTypes:null,id:5904,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"3071:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"3053:20:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,id:5910,name:"vaultBalance",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5867,src:"3104:12:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5906,name:"_componentQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5818,src:"3076:20:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:5908,indexExpression:{argumentTypes:null,id:5907,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"3097:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"3076:23:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5909,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sub",nodeType:"MemberAccess",referencedDeclaration:29595,src:"3076:27:37",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:5911,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3076:41:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"3053:64:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5913,nodeType:"ExpressionStatement",src:"3053:64:37"}]},id:5915,nodeType:"IfStatement",src:"2682:450:37",trueBody:{id:5891,nodeType:"Block",src:"2727:87:37",statements:[{expression:{argumentTypes:null,id:5889,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5883,name:"decrementTokenOwnerValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5839,src:"2745:25:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:5885,indexExpression:{argumentTypes:null,id:5884,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"2771:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"2745:28:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5886,name:"_componentQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5818,src:"2776:20:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:5888,indexExpression:{argumentTypes:null,id:5887,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"2797:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"2776:23:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2745:54:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5890,nodeType:"ExpressionStatement",src:"2745:54:37"}]}}]},condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:5862,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:5860,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"2377:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<",rightExpression:{argumentTypes:null,id:5861,name:"componentCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5832,src:"2381:14:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2377:18:37",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:5917,initializationExpression:{assignments:[5857],declarations:[{constant:false,id:5857,name:"i",nodeType:"VariableDeclaration",scope:5917,src:"2362:9:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:5856,name:"uint256",nodeType:"ElementaryTypeName",src:"2362:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:5859,initialValue:{argumentTypes:null,hexValue:"30",id:5858,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"2374:1:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},nodeType:"VariableDeclarationStatement",src:"2362:13:37"},loopExpression:{expression:{argumentTypes:null,id:5864,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"UnaryOperation",operator:"++",prefix:false,src:"2397:3:37",subExpression:{argumentTypes:null,id:5863,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5857,src:"2397:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5865,nodeType:"ExpressionStatement",src:"2397:3:37"},nodeType:"ForStatement",src:"2357:785:37"},{expression:{argumentTypes:null,components:[{argumentTypes:null,id:5918,name:"decrementTokenOwnerValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5839,src:"3173:25:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},{argumentTypes:null,id:5919,name:"depositQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5849,src:"3212:17:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}}],id:5920,isConstant:false,isInlineArray:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"TupleExpression",src:"3159:80:37",typeDescriptions:{typeIdentifier:"t_tuple$_t_array$_t_uint256_$dyn_memory_ptr_$_t_array$_t_uint256_$dyn_memory_ptr_$",typeString:"tuple(uint256[] memory,uint256[] memory)"}},functionReturnParameters:5830,id:5921,nodeType:"Return",src:"3152:87:37"}]},documentation:"Calculate the quantities required to deposit and decrement during issuance. Takes into account\nthe tokens an owner already has in the vault.\n     * @param _components                           Addresses of components\n@param _componentQuantities                  Component quantities to increment and withdraw\n@param _owner                                Address to deposit and decrement quantities from\n@param _vault                                Address to vault\n@return uint256[] decrementQuantities        Quantities to decrement from vault\n@return uint256[] depositQuantities          Quantities to deposit into the vault",id:5923,implemented:true,kind:"function",modifiers:[],name:"calculateDepositAndDecrementQuantities",nodeType:"FunctionDefinition",parameters:{id:5823,nodeType:"ParameterList",parameters:[{constant:false,id:5815,name:"_components",nodeType:"VariableDeclaration",scope:5923,src:"1828:30:37",stateVariable:false,storageLocation:"calldata",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_calldata_ptr",typeString:"address[]"},typeName:{baseType:{id:5813,name:"address",nodeType:"ElementaryTypeName",src:"1828:7:37",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},id:5814,length:null,nodeType:"ArrayTypeName",src:"1828:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_storage_ptr",typeString:"address[]"}},value:null,visibility:"internal"},{constant:false,id:5818,name:"_componentQuantities",nodeType:"VariableDeclaration",scope:5923,src:"1868:39:37",stateVariable:false,storageLocation:"calldata",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5816,name:"uint256",nodeType:"ElementaryTypeName",src:"1868:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5817,length:null,nodeType:"ArrayTypeName",src:"1868:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"},{constant:false,id:5820,name:"_owner",nodeType:"VariableDeclaration",scope:5923,src:"1917:14:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:5819,name:"address",nodeType:"ElementaryTypeName",src:"1917:7:37",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"},{constant:false,id:5822,name:"_vault",nodeType:"VariableDeclaration",scope:5923,src:"1941:14:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"},typeName:{id:5821,name:"address",nodeType:"ElementaryTypeName",src:"1941:7:37",stateMutability:"nonpayable",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},value:null,visibility:"internal"}],src:"1818:143:37"},returnParameters:{id:5830,nodeType:"ParameterList",parameters:[{constant:false,id:5826,name:"",nodeType:"VariableDeclaration",scope:5923,src:"2022:16:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5824,name:"uint256",nodeType:"ElementaryTypeName",src:"2022:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5825,length:null,nodeType:"ArrayTypeName",src:"2022:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"},{constant:false,id:5829,name:"",nodeType:"VariableDeclaration",scope:5923,src:"2078:16:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5827,name:"uint256",nodeType:"ElementaryTypeName",src:"2078:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5828,length:null,nodeType:"ArrayTypeName",src:"2078:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],src:"2008:120:37"},scope:6077,src:"1771:1475:37",stateMutability:"view",superFunction:null,visibility:"external"},{body:{id:6011,nodeType:"Block",src:"4107:915:37",statements:[{assignments:[5938],declarations:[{constant:false,id:5938,name:"componentCount",nodeType:"VariableDeclaration",scope:6011,src:"4117:22:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:5937,name:"uint256",nodeType:"ElementaryTypeName",src:"4117:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:5941,initialValue:{argumentTypes:null,expression:{argumentTypes:null,id:5939,name:"_componentQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5926,src:"4142:20:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:5940,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"length",nodeType:"MemberAccess",referencedDeclaration:null,src:"4142:27:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4117:52:37"},{assignments:[5945],declarations:[{constant:false,id:5945,name:"incrementTokenOwnerValues",nodeType:"VariableDeclaration",scope:6011,src:"4179:42:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5943,name:"uint256",nodeType:"ElementaryTypeName",src:"4179:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5944,length:null,nodeType:"ArrayTypeName",src:"4179:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:5951,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:5949,name:"componentCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5938,src:"4238:14:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:5948,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"NewExpression",src:"4224:13:37",typeDescriptions:{typeIdentifier:"t_function_objectcreation_pure$_t_uint256_$returns$_t_array$_t_uint256_$dyn_memory_$",typeString:"function (uint256) pure returns (uint256[] memory)"},typeName:{baseType:{id:5946,name:"uint256",nodeType:"ElementaryTypeName",src:"4228:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5947,length:null,nodeType:"ArrayTypeName",src:"4228:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}}},id:5950,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4224:29:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"4179:74:37"},{assignments:[5955],declarations:[{constant:false,id:5955,name:"withdrawToValues",nodeType:"VariableDeclaration",scope:6011,src:"4263:33:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5953,name:"uint256",nodeType:"ElementaryTypeName",src:"4263:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5954,length:null,nodeType:"ArrayTypeName",src:"4263:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:5961,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:5959,name:"componentCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5938,src:"4313:14:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:5958,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"NewExpression",src:"4299:13:37",typeDescriptions:{typeIdentifier:"t_function_objectcreation_pure$_t_uint256_$returns$_t_array$_t_uint256_$dyn_memory_$",typeString:"function (uint256) pure returns (uint256[] memory)"},typeName:{baseType:{id:5956,name:"uint256",nodeType:"ElementaryTypeName",src:"4303:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5957,length:null,nodeType:"ArrayTypeName",src:"4303:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}}},id:5960,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4299:29:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"4263:65:37"},{body:{id:6005,nodeType:"Block",src:"4475:444:37",statements:[{assignments:[5973],declarations:[{constant:false,id:5973,name:"componentBitIndex",nodeType:"VariableDeclaration",scope:6005,src:"4545:25:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:5972,name:"uint256",nodeType:"ElementaryTypeName",src:"4545:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:5979,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,hexValue:"32",id:5976,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"4594:1:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_2_by_1",typeString:"int_const 2"},value:"2"},{argumentTypes:null,id:5977,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5963,src:"4597:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_rational_2_by_1",typeString:"int_const 2"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:5974,name:"CommonMath",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:23436,src:"4573:10:37",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_CommonMath_$23436_$",typeString:"type(library CommonMath)"}},id:5975,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"safePower",nodeType:"MemberAccess",referencedDeclaration:23203,src:"4573:20:37",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:5978,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4573:26:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4545:54:37"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:5985,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,components:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:5982,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:5980,name:"_toExclude",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5928,src:"4700:10:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"&",rightExpression:{argumentTypes:null,id:5981,name:"componentBitIndex",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5973,src:"4713:17:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"4700:30:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],id:5983,isConstant:false,isInlineArray:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"TupleExpression",src:"4699:32:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"!=",rightExpression:{argumentTypes:null,hexValue:"30",id:5984,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"4735:1:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"4699:37:37",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:{id:6003,nodeType:"Block",src:"4831:78:37",statements:[{expression:{argumentTypes:null,id:6001,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5995,name:"withdrawToValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5955,src:"4849:16:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:5997,indexExpression:{argumentTypes:null,id:5996,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5963,src:"4866:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"4849:19:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5998,name:"_componentQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5926,src:"4871:20:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:6e3,indexExpression:{argumentTypes:null,id:5999,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5963,src:"4892:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"4871:23:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"4849:45:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6002,nodeType:"ExpressionStatement",src:"4849:45:37"}]},id:6004,nodeType:"IfStatement",src:"4695:214:37",trueBody:{id:5994,nodeType:"Block",src:"4738:87:37",statements:[{expression:{argumentTypes:null,id:5992,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5986,name:"incrementTokenOwnerValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5945,src:"4756:25:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:5988,indexExpression:{argumentTypes:null,id:5987,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5963,src:"4782:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"4756:28:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:5989,name:"_componentQuantities",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5926,src:"4787:20:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:5991,indexExpression:{argumentTypes:null,id:5990,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5963,src:"4808:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"4787:23:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"4756:54:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5993,nodeType:"ExpressionStatement",src:"4756:54:37"}]}}]},condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:5968,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:5966,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5963,src:"4450:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<",rightExpression:{argumentTypes:null,id:5967,name:"componentCount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5938,src:"4454:14:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"4450:18:37",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:6006,initializationExpression:{assignments:[5963],declarations:[{constant:false,id:5963,name:"i",nodeType:"VariableDeclaration",scope:6006,src:"4435:9:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:5962,name:"uint256",nodeType:"ElementaryTypeName",src:"4435:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:5965,initialValue:{argumentTypes:null,hexValue:"30",id:5964,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"4447:1:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},nodeType:"VariableDeclarationStatement",src:"4435:13:37"},loopExpression:{expression:{argumentTypes:null,id:5970,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"UnaryOperation",operator:"++",prefix:false,src:"4470:3:37",subExpression:{argumentTypes:null,id:5969,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5963,src:"4470:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5971,nodeType:"ExpressionStatement",src:"4470:3:37"},nodeType:"ForStatement",src:"4430:489:37"},{expression:{argumentTypes:null,components:[{argumentTypes:null,id:6007,name:"incrementTokenOwnerValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5945,src:"4950:25:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},{argumentTypes:null,id:6008,name:"withdrawToValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5955,src:"4989:16:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}}],id:6009,isConstant:false,isInlineArray:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"TupleExpression",src:"4936:79:37",typeDescriptions:{typeIdentifier:"t_tuple$_t_array$_t_uint256_$dyn_memory_ptr_$_t_array$_t_uint256_$dyn_memory_ptr_$",typeString:"tuple(uint256[] memory,uint256[] memory)"}},functionReturnParameters:5936,id:6010,nodeType:"Return",src:"4929:86:37"}]},documentation:"Calculate the quantities required to withdraw and increment during redeem and withdraw. Takes into\naccount a bitmask exclusion parameter.\n     * @param _componentQuantities                  Component quantities to increment and withdraw\n@param _toExclude                            Mask of indexes of tokens to exclude from withdrawing\n@return uint256[] incrementQuantities        Quantities to increment in vault\n@return uint256[] withdrawQuantities         Quantities to withdraw from vault",id:6012,implemented:true,kind:"function",modifiers:[],name:"calculateWithdrawAndIncrementQuantities",nodeType:"FunctionDefinition",parameters:{id:5929,nodeType:"ParameterList",parameters:[{constant:false,id:5926,name:"_componentQuantities",nodeType:"VariableDeclaration",scope:6012,src:"3861:39:37",stateVariable:false,storageLocation:"calldata",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5924,name:"uint256",nodeType:"ElementaryTypeName",src:"3861:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5925,length:null,nodeType:"ArrayTypeName",src:"3861:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"},{constant:false,id:5928,name:"_toExclude",nodeType:"VariableDeclaration",scope:6012,src:"3910:18:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:5927,name:"uint256",nodeType:"ElementaryTypeName",src:"3910:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"3851:83:37"},returnParameters:{id:5936,nodeType:"ParameterList",parameters:[{constant:false,id:5932,name:"",nodeType:"VariableDeclaration",scope:6012,src:"3995:16:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5930,name:"uint256",nodeType:"ElementaryTypeName",src:"3995:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5931,length:null,nodeType:"ArrayTypeName",src:"3995:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"},{constant:false,id:5935,name:"",nodeType:"VariableDeclaration",scope:6012,src:"4051:16:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:5933,name:"uint256",nodeType:"ElementaryTypeName",src:"4051:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:5934,length:null,nodeType:"ArrayTypeName",src:"4051:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],src:"3981:121:37"},scope:6077,src:"3803:1219:37",stateMutability:"pure",superFunction:null,visibility:"external"},{body:{id:6075,nodeType:"Block",src:"5679:498:37",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:6031,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,arguments:[{argumentTypes:null,id:6028,
name:"_naturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6017,src:"5724:12:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:6026,name:"_quantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6019,src:"5710:9:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6027,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mod",nodeType:"MemberAccess",referencedDeclaration:29639,src:"5710:13:37",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:6029,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5710:27:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"==",rightExpression:{argumentTypes:null,hexValue:"30",id:6030,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"5741:1:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"5710:32:37",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},{argumentTypes:null,hexValue:"436f726549737375616e63654c6962726172793a205175616e74697479206d7573742062652061206d756c7469706c65206f66206e617420756e6974",id:6032,isConstant:false,isLValue:false,isPure:true,kind:"string",lValueRequested:false,nodeType:"Literal",src:"5756:62:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_stringliteral_a66cfd301825a09bc4f7398874ab5e208ea6edc33f7beb5eb912ab8a7a169d68",typeString:'literal_string "CoreIssuanceLibrary: Quantity must be a multiple of nat unit"'},value:"CoreIssuanceLibrary: Quantity must be a multiple of nat unit"}],expression:{argumentTypes:[{typeIdentifier:"t_bool",typeString:"bool"},{typeIdentifier:"t_stringliteral_a66cfd301825a09bc4f7398874ab5e208ea6edc33f7beb5eb912ab8a7a169d68",typeString:'literal_string "CoreIssuanceLibrary: Quantity must be a multiple of nat unit"'}],id:6025,name:"require",nodeType:"Identifier",overloadedDeclarations:[30379,30380],referencedDeclaration:30380,src:"5689:7:37",typeDescriptions:{typeIdentifier:"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",typeString:"function (bool,string memory) pure"}},id:6033,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5689:139:37",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:6034,nodeType:"ExpressionStatement",src:"5689:139:37"},{assignments:[6038],declarations:[{constant:false,id:6038,name:"tokenValues",nodeType:"VariableDeclaration",scope:6075,src:"5839:28:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:6036,name:"uint256",nodeType:"ElementaryTypeName",src:"5839:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6037,length:null,nodeType:"ArrayTypeName",src:"5839:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],id:6045,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,id:6042,name:"_componentUnits",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6015,src:"5884:15:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:6043,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"length",nodeType:"MemberAccess",referencedDeclaration:null,src:"5884:22:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:6041,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"NewExpression",src:"5870:13:37",typeDescriptions:{typeIdentifier:"t_function_objectcreation_pure$_t_uint256_$returns$_t_array$_t_uint256_$dyn_memory_$",typeString:"function (uint256) pure returns (uint256[] memory)"},typeName:{baseType:{id:6039,name:"uint256",nodeType:"ElementaryTypeName",src:"5874:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6040,length:null,nodeType:"ArrayTypeName",src:"5874:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}}},id:6044,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5870:37:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},nodeType:"VariableDeclarationStatement",src:"5839:68:37"},{body:{id:6071,nodeType:"Block",src:"6049:93:37",statements:[{expression:{argumentTypes:null,id:6069,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,baseExpression:{argumentTypes:null,id:6057,name:"tokenValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6038,src:"6063:11:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},id:6059,indexExpression:{argumentTypes:null,id:6058,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6047,src:"6075:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:true,nodeType:"IndexAccess",src:"6063:14:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,baseExpression:{argumentTypes:null,id:6065,name:"_componentUnits",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6015,src:"6112:15:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:6067,indexExpression:{argumentTypes:null,id:6066,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6047,src:"6128:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"6112:18:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:6062,name:"_naturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6017,src:"6094:12:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:6060,name:"_quantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6019,src:"6080:9:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6061,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"6080:13:37",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:6063,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6080:27:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6064,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"6080:31:37",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:6068,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6080:51:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"6063:68:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6070,nodeType:"ExpressionStatement",src:"6063:68:37"}]},condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:6053,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:6050,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6047,src:"6016:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<",rightExpression:{argumentTypes:null,expression:{argumentTypes:null,id:6051,name:"_componentUnits",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6015,src:"6020:15:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[] calldata"}},id:6052,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"length",nodeType:"MemberAccess",referencedDeclaration:null,src:"6020:22:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"6016:26:37",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:6072,initializationExpression:{assignments:[6047],declarations:[{constant:false,id:6047,name:"i",nodeType:"VariableDeclaration",scope:6072,src:"6001:9:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:6046,name:"uint256",nodeType:"ElementaryTypeName",src:"6001:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:6049,initialValue:{argumentTypes:null,hexValue:"30",id:6048,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"6013:1:37",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},nodeType:"VariableDeclarationStatement",src:"6001:13:37"},loopExpression:{expression:{argumentTypes:null,id:6055,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"UnaryOperation",operator:"++",prefix:false,src:"6044:3:37",subExpression:{argumentTypes:null,id:6054,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6047,src:"6044:1:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6056,nodeType:"ExpressionStatement",src:"6044:3:37"},nodeType:"ForStatement",src:"5996:146:37"},{expression:{argumentTypes:null,id:6073,name:"tokenValues",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6038,src:"6159:11:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[] memory"}},functionReturnParameters:6024,id:6074,nodeType:"Return",src:"6152:18:37"}]},documentation:"Calculate the required component quantities required for issuance or rdemption for a given \nquantity of Set Tokens\n     * @param _componentUnits   The units of the component token\n@param _naturalUnit      The natural unit of the Set token\n@param _quantity         The number of tokens being redeem\n@return uint256[]        Required quantities in base units of components",id:6076,implemented:true,kind:"function",modifiers:[],name:"calculateRequiredComponentQuantities",nodeType:"FunctionDefinition",parameters:{id:6020,nodeType:"ParameterList",parameters:[{constant:false,id:6015,name:"_componentUnits",nodeType:"VariableDeclaration",scope:6076,src:"5512:34:37",stateVariable:false,storageLocation:"calldata",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_calldata_ptr",typeString:"uint256[]"},typeName:{baseType:{id:6013,name:"uint256",nodeType:"ElementaryTypeName",src:"5512:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6014,length:null,nodeType:"ArrayTypeName",src:"5512:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"},{constant:false,id:6017,name:"_naturalUnit",nodeType:"VariableDeclaration",scope:6076,src:"5556:20:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:6016,name:"uint256",nodeType:"ElementaryTypeName",src:"5556:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:6019,name:"_quantity",nodeType:"VariableDeclaration",scope:6076,src:"5586:17:37",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:6018,name:"uint256",nodeType:"ElementaryTypeName",src:"5586:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"5502:107:37"},returnParameters:{id:6024,nodeType:"ParameterList",parameters:[{constant:false,id:6023,name:"",nodeType:"VariableDeclaration",scope:6076,src:"5657:16:37",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory_ptr",typeString:"uint256[]"},typeName:{baseType:{id:6021,name:"uint256",nodeType:"ElementaryTypeName",src:"5657:7:37",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:6022,length:null,nodeType:"ArrayTypeName",src:"5657:9:37",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_storage_ptr",typeString:"uint256[]"}},value:null,visibility:"internal"}],src:"5656:18:37"},scope:6077,src:"5457:720:37",stateMutability:"pure",superFunction:null,visibility:"external"}],scope:6078,src:"1004:5176:37"}],src:"597:5584:37"},compiler:{name:"solc",version:"0.5.7+commit.6da8b019.Linux.g++"},networks:{},schemaVersion:"3.0.23",updatedAt:"2020-04-07T04:29:24.478Z",devdoc:{author:"Set Protocol * This library contains functions for calculating deposit, withdrawal,and transfer quantities",methods:{"calculateDepositAndDecrementQuantities(address[],uint256[],address,address)":{params:{_componentQuantities:"Component quantities to increment and withdraw",_components:"Addresses of components",_owner:"Address to deposit and decrement quantities from",_vault:"Address to vault"},"return":"uint256[] decrementQuantities        Quantities to decrement from vaultuint256[] depositQuantities          Quantities to deposit into the vault"},"calculateRequiredComponentQuantities(uint256[],uint256,uint256)":{params:{_componentUnits:"The units of the component token",_naturalUnit:"The natural unit of the Set token",_quantity:"The number of tokens being redeem"},"return":"uint256[]        Required quantities in base units of components"},"calculateWithdrawAndIncrementQuantities(uint256[],uint256)":{params:{_componentQuantities:"Component quantities to increment and withdraw",_toExclude:"Mask of indexes of tokens to exclude from withdrawing"},"return":"uint256[] incrementQuantities        Quantities to increment in vaultuint256[] withdrawQuantities         Quantities to withdraw from vault"}},title:"CoreIssuanceLibrary"},userdoc:{methods:{"calculateDepositAndDecrementQuantities(address[],uint256[],address,address)":{notice:"Calculate the quantities required to deposit and decrement during issuance. Takes into account the tokens an owner already has in the vault."},"calculateRequiredComponentQuantities(uint256[],uint256,uint256)":{notice:"Calculate the required component quantities required for issuance or rdemption for a given  quantity of Set Tokens"},"calculateWithdrawAndIncrementQuantities(uint256[],uint256)":{notice:"Calculate the quantities required to withdraw and increment during redeem and withdraw. Takes into account a bitmask exclusion parameter."}}}};