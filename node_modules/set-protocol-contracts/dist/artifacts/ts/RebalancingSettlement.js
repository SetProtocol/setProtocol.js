"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RebalancingSettlement={contractName:"RebalancingSettlement",abi:[{constant:true,inputs:[],name:"unitShares",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:false,inputs:[{name:"_newLiquidator",type:"address"}],name:"setLiquidator",outputs:[],payable:false,stateMutability:"nonpayable",type:"function"},{constant:true,inputs:[],name:"getUnits",outputs:[{name:"",type:"uint256[]"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"entryFee",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:false,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:false,stateMutability:"nonpayable",type:"function"},{constant:true,inputs:[],name:"liquidatorWhiteList",outputs:[{name:"",type:"address"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"rebalanceInterval",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"rebalanceFailPeriod",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[{name:"_tokenAddress",type:"address"}],name:"tokenIsComponent",outputs:[{name:"",type:"bool"}],payable:false,stateMutability:"view",type:"function"},{constant:false,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:false,stateMutability:"nonpayable",type:"function"},{constant:true,inputs:[],name:"rebalanceFee",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"currentSet",outputs:[{name:"",type:"address"}],payable:false,stateMutability:"view",type:"function"},{constant:false,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"",type:"bool"}],payable:false,stateMutability:"nonpayable",type:"function"},{constant:true,inputs:[],name:"liquidator",outputs:[{name:"",type:"address"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"naturalUnit",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"rebalanceFeeCalculator",outputs:[{name:"",type:"address"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"feeRecipient",outputs:[{name:"",type:"address"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"manager",outputs:[{name:"",type:"address"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"componentWhiteList",outputs:[{name:"",type:"address"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"rebalanceIndex",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"getComponents",outputs:[{name:"",type:"address[]"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"rebalanceStartTime",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:false,inputs:[{name:"spender",type:"address"},{name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{name:"",type:"bool"}],payable:false,stateMutability:"nonpayable",type:"function"},{constant:false,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:false,stateMutability:"nonpayable",type:"function"},{constant:true,inputs:[],name:"lastRebalanceTimestamp",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"factory",outputs:[{name:"",type:"address"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"nextSet",outputs:[{name:"",type:"address"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"SCALE_FACTOR",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:false,inputs:[{name:"_newManager",type:"address"}],name:"setManager",outputs:[],payable:false,stateMutability:"nonpayable",type:"function"},{constant:true,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:false,stateMutability:"view",type:"function"},{constant:false,inputs:[{name:"_newFeeRecipient",type:"address"}],name:"setFeeRecipient",outputs:[],payable:false,stateMutability:"nonpayable",type:"function"},{constant:false,inputs:[{name:"_newEntryFee",type:"uint256"}],name:"setEntryFee",outputs:[],payable:false,stateMutability:"nonpayable",type:"function"},{constant:true,inputs:[],name:"hasBidded",outputs:[{name:"",type:"bool"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"core",outputs:[{name:"",type:"address"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"rebalanceState",outputs:[{name:"",type:"uint8"}],payable:false,stateMutability:"view",type:"function"},{constant:true,inputs:[],name:"vault",outputs:[{name:"",type:"address"}],payable:false,stateMutability:"view",type:"function"},{anonymous:false,inputs:[{indexed:false,name:"newManager",type:"address"},{indexed:false,name:"oldManager",type:"address"}],name:"NewManagerAdded",type:"event"},{anonymous:false,inputs:[{indexed:false,name:"newLiquidator",type:"address"},{indexed:false,name:"oldLiquidator",type:"address"}],name:"NewLiquidatorAdded",type:"event"},{anonymous:false,inputs:[{indexed:false,name:"newEntryFee",type:"uint256"},{indexed:false,name:"oldEntryFee",type:"uint256"}],name:"NewEntryFee",type:"event"},{anonymous:false,inputs:[{indexed:false,name:"newFeeRecipient",type:"address"},{indexed:false,name:"oldFeeRecipient",type:"address"}],name:"NewFeeRecipient",type:"event"},{anonymous:false,inputs:[{indexed:true,name:"feeRecipient",type:"address"},{indexed:false,name:"feeQuantity",type:"uint256"}],name:"EntryFeePaid",type:"event"},{anonymous:false,inputs:[{indexed:false,name:"oldSet",type:"address"},{indexed:false,name:"newSet",type:"address"},{indexed:false,name:"rebalanceIndex",type:"uint256"},{indexed:false,name:"currentSetQuantity",type:"uint256"}],name:"RebalanceStarted",type:"event"},{anonymous:false,inputs:[{indexed:true,name:"feeRecipient",type:"address"},{indexed:false,name:"feeQuantity",type:"uint256"},{indexed:false,name:"feePercentage",type:"uint256"},{indexed:false,name:"rebalanceIndex",type:"uint256"},{indexed:false,name:"issueQuantity",type:"uint256"},{indexed:false,name:"unitShares",type:"uint256"}],name:"RebalanceSettled",type:"event"},{anonymous:false,inputs:[{indexed:true,name:"from",type:"address"},{indexed:true,name:"to",type:"address"},{indexed:false,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:false,inputs:[{indexed:true,name:"owner",type:"address"},{indexed:true,name:"spender",type:"address"},{indexed:false,name:"value",type:"uint256"}],name:"Approval",type:"event"}],metadata:'{"compiler":{"version":"0.5.7+commit.6da8b019"},"language":"Solidity","output":{"abi":[{"constant":true,"inputs":[],"name":"unitShares","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_newLiquidator","type":"address"}],"name":"setLiquidator","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getUnits","outputs":[{"name":"","type":"uint256[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"entryFee","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"spender","type":"address"},{"name":"value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"liquidatorWhiteList","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"rebalanceInterval","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"rebalanceFailPeriod","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_tokenAddress","type":"address"}],"name":"tokenIsComponent","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"rebalanceFee","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"currentSet","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"spender","type":"address"},{"name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"liquidator","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"naturalUnit","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"rebalanceFeeCalculator","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"feeRecipient","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"manager","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"componentWhiteList","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"rebalanceIndex","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getComponents","outputs":[{"name":"","type":"address[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"rebalanceStartTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"spender","type":"address"},{"name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"lastRebalanceTimestamp","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"factory","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"nextSet","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"SCALE_FACTOR","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_newManager","type":"address"}],"name":"setManager","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"},{"name":"spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_newFeeRecipient","type":"address"}],"name":"setFeeRecipient","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_newEntryFee","type":"uint256"}],"name":"setEntryFee","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"hasBidded","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"core","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"rebalanceState","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"vault","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"name":"newManager","type":"address"},{"indexed":false,"name":"oldManager","type":"address"}],"name":"NewManagerAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"newLiquidator","type":"address"},{"indexed":false,"name":"oldLiquidator","type":"address"}],"name":"NewLiquidatorAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"newEntryFee","type":"uint256"},{"indexed":false,"name":"oldEntryFee","type":"uint256"}],"name":"NewEntryFee","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"newFeeRecipient","type":"address"},{"indexed":false,"name":"oldFeeRecipient","type":"address"}],"name":"NewFeeRecipient","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"feeRecipient","type":"address"},{"indexed":false,"name":"feeQuantity","type":"uint256"}],"name":"EntryFeePaid","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"oldSet","type":"address"},{"indexed":false,"name":"newSet","type":"address"},{"indexed":false,"name":"rebalanceIndex","type":"uint256"},{"indexed":false,"name":"currentSetQuantity","type":"uint256"}],"name":"RebalanceStarted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"feeRecipient","type":"address"},{"indexed":false,"name":"feeQuantity","type":"uint256"},{"indexed":false,"name":"feePercentage","type":"uint256"},{"indexed":false,"name":"rebalanceIndex","type":"uint256"},{"indexed":false,"name":"issueQuantity","type":"uint256"},{"indexed":false,"name":"unitShares","type":"uint256"}],"name":"RebalanceSettled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"}],"devdoc":{"author":"Set Protocol ","methods":{"allowance(address,address)":{"details":"Function to check the amount of tokens that an owner allowed to a spender.","params":{"owner":"address The address which owns the funds.","spender":"address The address which will spend the funds."},"return":"A uint256 specifying the amount of tokens still available for the spender."},"approve(address,uint256)":{"details":"Approve the passed address to spend the specified amount of tokens on behalf of msg.sender. Beware that changing an allowance with this method brings the risk that someone may use both the old and the new allowance by unfortunate transaction ordering. One possible solution to mitigate this race condition is to first reduce the spender\'s allowance to 0 and set the desired value afterwards: https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729","params":{"spender":"The address which will spend the funds.","value":"The amount of tokens to be spent."}},"balanceOf(address)":{"details":"Gets the balance of the specified address.","params":{"owner":"The address to query the balance of."},"return":"A uint256 representing the amount owned by the passed address."},"decreaseAllowance(address,uint256)":{"details":"Decrease the amount of tokens that an owner allowed to a spender. approve should be called when _allowed[msg.sender][spender] == 0. To decrement allowed value is better to use this function to avoid 2 calls (and wait until the first transaction is mined) From MonolithDAO Token.sol Emits an Approval event.","params":{"spender":"The address which will spend the funds.","subtractedValue":"The amount of tokens to decrease the allowance by."}},"increaseAllowance(address,uint256)":{"details":"Increase the amount of tokens that an owner allowed to a spender. approve should be called when _allowed[msg.sender][spender] == 0. To increment allowed value is better to use this function to avoid 2 calls (and wait until the first transaction is mined) From MonolithDAO Token.sol Emits an Approval event.","params":{"addedValue":"The amount of tokens to increase the allowance by.","spender":"The address which will spend the funds."}},"totalSupply()":{"details":"Total number of tokens in existence"},"transfer(address,uint256)":{"details":"Transfer token to a specified address","params":{"to":"The address to transfer to.","value":"The amount to be transferred."}},"transferFrom(address,address,uint256)":{"details":"Transfer tokens from one address to another. Note that while this function emits an Approval event, this is not required as per the specification, and other compliant implementations may not emit the event.","params":{"from":"address The address which you want to send tokens from","to":"address The address which you want to transfer to","value":"uint256 the amount of tokens to be transferred"}}},"title":"RebalancingSettlement"},"userdoc":{"methods":{}}},"settings":{"compilationTarget":{"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/tokens/rebalancing-v2/RebalancingSettlement.sol":"RebalancingSettlement"},"evmVersion":"byzantium","libraries":{},"optimizer":{"enabled":true,"runs":200},"remappings":[]},"sources":{"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ICore.sol":{"keccak256":"0x5dc3db4398630ea52d2a40c9ddfa89d94e65c2770a12bab4d2a5c8eb573fb0a0","urls":["bzzr://25e90b53f61b388e0950b808e2296f82d427b66cfd6021212713436b2a592e31"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IFeeCalculator.sol":{"keccak256":"0xfdce9b333367bfed8f379738b0eabfe4be0045db735e9f24493de09729593d4d","urls":["bzzr://d2fa7438b492f4f08009810e3e9a2e2c22a429c307562e3f5274d4bfe2d21734"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ILiquidator.sol":{"keccak256":"0x9d1e66d56cd51d14787cce5ff8fb378eb6a0bb704e7102d7c4eda5de7f585af3","urls":["bzzr://c44220025ac21fda1dda68e236572c5c4f82bf53ccf504a020487b8c746c7b26"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IRebalancingSetFactory.sol":{"keccak256":"0x781ccbdaa2b8908599e6cd5cdf077f2add7077b72acd064fb4ae560c00ddf62d","urls":["bzzr://93950fa7b8ce25f427edfe6a136c850ef41f1002eadd94ec957b8e6abe85812b"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IRebalancingSetToken.sol":{"keccak256":"0xe7356a7b0f0cc95d9526395d776f523a48fd65618730d67b4f31f20ffbd380da","urls":["bzzr://605a33a818eff7ce3370f25fccb751f61c066b4db0772605a2215d1357d68072"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ISetFactory.sol":{"keccak256":"0xf795ab9e9ac11340a600f235073b4ec4bdea92d3c01601ced1e5afd3c2718301","urls":["bzzr://eb4f00f66933560aa133ee90030b23d7a30937e6591a83d56b3935a927e8ca9f"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ISetToken.sol":{"keccak256":"0xfa6c0c07f8394d89b6b8f72e15778f8452a9341acb20cebb8421f3522aaca1bd","urls":["bzzr://ccf23bb78fd507bf8cbf5cf7ac2a660a1463b87a3689196e42b8f6862d1a6b11"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IVault.sol":{"keccak256":"0xf8a6d376173be39f5744492866db5dd3f91453a124d23679ff164ff3817f2f4f","urls":["bzzr://896c0a8329175c1620e1a22467778b835defe0e61847e5a8427a306f42391e64"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IWhiteList.sol":{"keccak256":"0x35158bdba86e9e08faf0bdf5e1756fb20ee0404e0b0b3c2d529e0e5b03b5adfd","urls":["bzzr://130cfe1fe490b464a6d42fd8613dd42a9f3375f24b6ab2dd91448f12895992ab"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/Rebalance.sol":{"keccak256":"0x74ffa689d93ced6c6e0377a35ec1274241b6191b5aaac5576ada379ac3840286","urls":["bzzr://25bdda3f1f5adfa2c83c760c44993d250cd2df037360f0018d22d268df79e887"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/RebalancingLibrary.sol":{"keccak256":"0x7f9dd2f95b2ee71a98b94cb9b0df15874aa134e7480d04a1fcf36aff166a55f4","urls":["bzzr://f43a5563ec5df095151eee30cf7a0941b5a971917c27c7b34d9586b36563ab5b"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/SetTokenLibrary.sol":{"keccak256":"0x0c0952057a64c3af0ace01db29258145deff7d935bdc53d1bbab6fff87b3b146","urls":["bzzr://ad1944f45fade934870661a4e91c260625755760ff0ef047677547fbdc6a16bf"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/tokens/rebalancing-v2/RebalancingSetState.sol":{"keccak256":"0x717e7602dd9d8e9ba3eed77ce6703a701ff93cf25dd80e45c7064cc4f56516a9","urls":["bzzr://a1b509fff12ac397fb74248b4d50e159519dc8fc22f29593421b1b47309db72c"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/tokens/rebalancing-v2/RebalancingSettlement.sol":{"keccak256":"0x2c3ba0ee64d2376d2e38bda807fb658510ddb8975bfd15a7b0227b15d3d8d197","urls":["bzzr://277bb8a1ca12554bbc3a255213b78ee901bbb8dea2943b7658b10773d581c457"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/CommonMath.sol":{"keccak256":"0x3d1d08c6efc2a973fe2c02ddcb02fd99a8c8eb75f74dcbd93e8e15864eee2b6b","urls":["bzzr://580815dd1cf648a4521d923e59087de21143d9c48115ab71579a1f5a8f3d36af"]},"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/ScaleValidations.sol":{"keccak256":"0xba602c9dda228b4552744ef0ba26329a3ada2610c42cb085a373d873d58d1391","urls":["bzzr://78110cdd43a9f5b4092cb51867e79da62e6d8b324ffb24d0dd448ad3e27048ee"]},"openzeppelin-solidity/contracts/math/Math.sol":{"keccak256":"0x775160984ceb0931bf67e718fb23afd6fc2a5d38a6e2378ebb438a039ed2269e","urls":["bzzr://209e27ad1c13e3e9b157915e0269ee4c3b6f0a494660dcc4acf1faf102e1a7ad"]},"openzeppelin-solidity/contracts/math/SafeMath.sol":{"keccak256":"0xc2a200a877c4a9b2475c246c54ffecc69ffde3e11af83319c63c2dc5458bac80","urls":["bzzr://c8876e2c39b60f155d748d71d715c8f3903fae5a405ac599adcb6ad2f9a583f9"]},"openzeppelin-solidity/contracts/token/ERC20/ERC20.sol":{"keccak256":"0x3dceb7e4aa237a56111c13f77d7efadeceda7271d62bfac94ac79afab7c1f411","urls":["bzzr://2f34152a5bec385352002c31bc89f5e9935f628f1923ccea45c2281e0084a4db"]},"openzeppelin-solidity/contracts/token/ERC20/IERC20.sol":{"keccak256":"0x59e7df16169a498cb8837963b2f5461d88e63bd1eb6c7d58b814d76b84ccbe61","urls":["bzzr://e572c9c4e02e37349702451bf3b5dcbbc86a19da5a51695b5b3e1bfe1e7825dc"]}},"version":1}',bytecode:"0x608060405234801561001057600080fd5b506111fd806100206000396000f3fe608060405234801561001057600080fd5b506004361061024f576000357c010000000000000000000000000000000000000000000000000000000090048063506ab57a1161014d578063cb631699116100d5578063eb770d0c11610099578063eb770d0c1461042e578063f1560b3f14610441578063f2f4eb2614610449578063f75af97f14610451578063fbfa77cf146104665761024f565b8063cb631699146103e5578063ce4b5bbe146103ed578063d0ebdbe7146103f5578063dd62ed3e14610408578063e74b981b1461041b5761024f565b80639ae1f4a91161011c5780639ae1f4a9146103a7578063a457c2d7146103af578063a9059cbb146103c2578063b83d8157146103d5578063c45a0155146103dd5761024f565b8063506ab57a1461036f57806370a082311461037757806388bd49a11461038a57806399d50d5d146103925761024f565b806318c53aca116101db5780634046ebae1161019f5780634046ebae1461033a57806342a7cfd514610342578063465530971461034a5780634690484014610352578063481c6a75146103675761024f565b806318c53aca146102f157806323b872dd146103045780632e35bcca1461031757806330b866271461031f57806339509351146103275761024f565b8063095ea7b311610222578063095ea7b3146102a45780631698c584146102c457806316d1d916146102d957806318160ddd146102e1578063188b36c5146102e95761024f565b80630193aea21461025457806301c76f8114610272578063027aa9f514610287578063072ea61c1461029c575b600080fd5b61025c61046e565b6040516102699190611142565b60405180910390f35b610285610280366004610e13565b610474565b005b61028f6105e5565b60405161026991906110b7565b61025c61062a565b6102b76102b2366004610dc5565b610630565b60405161026991906110c8565b6102cc610647565b60405161026991906110d6565b61025c610656565b61025c61065c565b61025c610662565b6102b76102ff366004610d18565b610668565b6102b7610312366004610d78565b61067c565b61025c6106d4565b6102cc61076f565b6102b7610335366004610dc5565b61077e565b6102cc6107ba565b61025c6107c9565b6102cc6107cf565b61035a6107de565b604051610269919061107d565b61035a6107ed565b6102cc6107fc565b61025c610385366004610d18565b61080b565b61025c610826565b61039a61082c565b60405161026991906110a6565b61025c610888565b6102b76103bd366004610dc5565b61088e565b6102b76103d0366004610dc5565b6108ca565b61025c6108d7565b6102cc6108dd565b6102cc6108ec565b61025c6108fb565b610285610403366004610d18565b610907565b61025c610416366004610d3e565b610983565b610285610429366004610d18565b6109ae565b61028561043c366004610e31565b610a2a565b6102b7610a84565b6102cc610a8d565b610459610a9c565b60405161026991906110e4565b6102cc610aa5565b60105481565b61047c610ab4565b600260125460ff16600381111561048f57fe5b14156104b95760405160e560020a62461bcd0281526004016104b090611122565b60405180910390fd5b6007546040517f372c12b1000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063372c12b19061050290849060040161107d565b60206040518083038186803b15801561051a57600080fd5b505afa15801561052e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506105529190810190610df5565b6105715760405160e560020a62461bcd0281526004016104b090611112565b6008546040517fe26fceb0d040e26e9c96b5be39f9a7b88bc48ce7a787f1e3cfd08e7f97626de6916105ae918491600160a060020a03169061108b565b60405180910390a16008805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b604080516001808252818301909252606091829190602080830190803883390190505090506010548160008151811061061a57fe5b6020908102919091010152905090565b600e5481565b600061063d338484610ae3565b5060015b92915050565b600754600160a060020a031681565b600c5481565b60025490565b600d5481565b600f54600160a060020a0390811691161490565b6000610689848484610b71565b600160a060020a0384166000908152600160209081526040808320338085529252909120546106c99186916106c4908663ffffffff610c3416565b610ae3565b5060015b9392505050565b600954604080517fced72f870000000000000000000000000000000000000000000000000000000081529051600092600160a060020a03169163ced72f87916004808301926020929190829003018186803b15801561073257600080fd5b505afa158015610746573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061076a9190810190610e4f565b905090565b600f54600160a060020a031681565b336000818152600160209081526040808320600160a060020a0387168452909152812054909161063d9185906106c4908663ffffffff610c4916565b600854600160a060020a031681565b60115481565b600954600160a060020a031681565b600b54600160a060020a031681565b600a54600160a060020a031681565b600654600160a060020a031681565b600160a060020a031660009081526020819052604090205490565b60135481565b604080516001808252818301909252606091829190602080830190803883395050600f548251929350600160a060020a03169183915060009061086b57fe5b600160a060020a0390921660209283029190910190910152905090565b60165481565b336000818152600160209081526040808320600160a060020a0387168452909152812054909161063d9185906106c4908663ffffffff610c3416565b600061063d338484610b71565b60145481565b600454600160a060020a031681565b601554600160a060020a031681565b670de0b6b3a764000081565b61090f610ab4565b600a546040517ff9c15f5b74b4e002e8881b2d9810116b1d4d45461e6dd7ac8111381b592e2c659161094c918491600160a060020a03169061108b565b60405180910390a1600a805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600160a060020a03918216600090815260016020908152604080832093909416825291909152205490565b6109b6610ab4565b600b546040517f2d63d620fb255d563fc112849cc79d42a367a3c51694709297b3ef80b28a8929916109f3918491600160a060020a03169061108b565b60405180910390a1600b805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b610a32610ab4565b610a3b81610c5b565b610a4481610c89565b7fbf7417a972a6451dbb2afbe07f2846cb433f2c3ab380fecbf70e38684eda554a81600e54604051610a77929190611150565b60405180910390a1600e55565b60175460ff1681565b600354600160a060020a031681565b60125460ff1681565b600554600160a060020a031681565b600a54600160a060020a03163314610ae15760405160e560020a62461bcd0281526004016104b0906110f2565b565b600160a060020a038216610af657600080fd5b600160a060020a038316610b0957600080fd5b600160a060020a0380841660008181526001602090815260408083209487168084529490915290819020849055517f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92590610b64908590611142565b60405180910390a3505050565b600160a060020a038216610b8457600080fd5b600160a060020a038316600090815260208190526040902054610bad908263ffffffff610c3416565b600160a060020a038085166000908152602081905260408082209390935590841681522054610be2908263ffffffff610c4916565b600160a060020a0380841660008181526020819052604090819020939093559151908516907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef90610b64908590611142565b600082821115610c4357600080fd5b50900390565b6000828201838110156106cd57600080fd5b670de0b6b3a7640000811115610c865760405160e560020a62461bcd0281526004016104b090611132565b50565b610c9f81655af3107a400063ffffffff610cbf16565b15610c865760405160e560020a62461bcd0281526004016104b090611102565b600081610ccb57600080fd5b818381610cd457fe5b069392505050565b60006106cd823561117e565b60006106cd8251611189565b60006106cd82356111ad565b60006106cd82356111aa565b60006106cd82516111aa565b600060208284031215610d2a57600080fd5b6000610d368484610cdc565b949350505050565b60008060408385031215610d5157600080fd5b6000610d5d8585610cdc565b9250506020610d6e85828601610cdc565b9150509250929050565b600080600060608486031215610d8d57600080fd5b6000610d998686610cdc565b9350506020610daa86828701610cdc565b9250506040610dbb86828701610d00565b9150509250925092565b60008060408385031215610dd857600080fd5b6000610de48585610cdc565b9250506020610d6e85828601610d00565b600060208284031215610e0757600080fd5b6000610d368484610ce8565b600060208284031215610e2557600080fd5b6000610d368484610cf4565b600060208284031215610e4357600080fd5b6000610d368484610d00565b600060208284031215610e6157600080fd5b6000610d368484610d0c565b6000610e798383610e8d565b505060200190565b6000610e798383611074565b610e968161117e565b82525050565b6000610ea782611171565b610eb18185611175565b9350610ebc8361116b565b60005b82811015610ee757610ed2868351610e6d565b9550610edd8261116b565b9150600101610ebf565b5093949350505050565b6000610efc82611171565b610f068185611175565b9350610f118361116b565b60005b82811015610ee757610f27868351610e81565b9550610f328261116b565b9150600101610f14565b610e9681611189565b610e96816111ad565b610e96816111b8565b6000610f64600b83611175565b7f4e6f74206d616e61676572000000000000000000000000000000000000000000815260200192915050565b6000610f9d601983611175565b7f4d757374206265206d756c7469706c65206f6620302e30312500000000000000815260200192915050565b6000610fd6600f83611175565b7f4e6f742077686974656c69737465640000000000000000000000000000000000815260200192915050565b600061100f600d83611175565b7f496e76616c696420737461746500000000000000000000000000000000000000815260200192915050565b6000611048600f83611175565b7f4d757374206265203c3d20313030250000000000000000000000000000000000815260200192915050565b610e96816111aa565b602081016106418284610e8d565b604081016110998285610e8d565b6106cd6020830184610e8d565b602080825281016106cd8184610e9c565b602080825281016106cd8184610ef1565b602081016106418284610f3c565b602081016106418284610f45565b602081016106418284610f4e565b6020808252810161064181610f57565b6020808252810161064181610f90565b6020808252810161064181610fc9565b6020808252810161064181611002565b602080825281016106418161103b565b602081016106418284611074565b6040810161115e8285611074565b6106cd6020830184611074565b60200190565b5190565b90815260200190565b60006106418261119e565b151590565b60006004821061119a57fe5b5090565b600160a060020a031690565b90565b60006106418261117e565b60006106418261118e56fea265627a7a723058202ebf4d29a6f904b46bb1f75e5098adba1da92206f60a32bde22d1b603758230a6c6578706572696d656e74616cf50037",
deployedBytecode:"0x608060405234801561001057600080fd5b506004361061024f576000357c010000000000000000000000000000000000000000000000000000000090048063506ab57a1161014d578063cb631699116100d5578063eb770d0c11610099578063eb770d0c1461042e578063f1560b3f14610441578063f2f4eb2614610449578063f75af97f14610451578063fbfa77cf146104665761024f565b8063cb631699146103e5578063ce4b5bbe146103ed578063d0ebdbe7146103f5578063dd62ed3e14610408578063e74b981b1461041b5761024f565b80639ae1f4a91161011c5780639ae1f4a9146103a7578063a457c2d7146103af578063a9059cbb146103c2578063b83d8157146103d5578063c45a0155146103dd5761024f565b8063506ab57a1461036f57806370a082311461037757806388bd49a11461038a57806399d50d5d146103925761024f565b806318c53aca116101db5780634046ebae1161019f5780634046ebae1461033a57806342a7cfd514610342578063465530971461034a5780634690484014610352578063481c6a75146103675761024f565b806318c53aca146102f157806323b872dd146103045780632e35bcca1461031757806330b866271461031f57806339509351146103275761024f565b8063095ea7b311610222578063095ea7b3146102a45780631698c584146102c457806316d1d916146102d957806318160ddd146102e1578063188b36c5146102e95761024f565b80630193aea21461025457806301c76f8114610272578063027aa9f514610287578063072ea61c1461029c575b600080fd5b61025c61046e565b6040516102699190611142565b60405180910390f35b610285610280366004610e13565b610474565b005b61028f6105e5565b60405161026991906110b7565b61025c61062a565b6102b76102b2366004610dc5565b610630565b60405161026991906110c8565b6102cc610647565b60405161026991906110d6565b61025c610656565b61025c61065c565b61025c610662565b6102b76102ff366004610d18565b610668565b6102b7610312366004610d78565b61067c565b61025c6106d4565b6102cc61076f565b6102b7610335366004610dc5565b61077e565b6102cc6107ba565b61025c6107c9565b6102cc6107cf565b61035a6107de565b604051610269919061107d565b61035a6107ed565b6102cc6107fc565b61025c610385366004610d18565b61080b565b61025c610826565b61039a61082c565b60405161026991906110a6565b61025c610888565b6102b76103bd366004610dc5565b61088e565b6102b76103d0366004610dc5565b6108ca565b61025c6108d7565b6102cc6108dd565b6102cc6108ec565b61025c6108fb565b610285610403366004610d18565b610907565b61025c610416366004610d3e565b610983565b610285610429366004610d18565b6109ae565b61028561043c366004610e31565b610a2a565b6102b7610a84565b6102cc610a8d565b610459610a9c565b60405161026991906110e4565b6102cc610aa5565b60105481565b61047c610ab4565b600260125460ff16600381111561048f57fe5b14156104b95760405160e560020a62461bcd0281526004016104b090611122565b60405180910390fd5b6007546040517f372c12b1000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063372c12b19061050290849060040161107d565b60206040518083038186803b15801561051a57600080fd5b505afa15801561052e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506105529190810190610df5565b6105715760405160e560020a62461bcd0281526004016104b090611112565b6008546040517fe26fceb0d040e26e9c96b5be39f9a7b88bc48ce7a787f1e3cfd08e7f97626de6916105ae918491600160a060020a03169061108b565b60405180910390a16008805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b604080516001808252818301909252606091829190602080830190803883390190505090506010548160008151811061061a57fe5b6020908102919091010152905090565b600e5481565b600061063d338484610ae3565b5060015b92915050565b600754600160a060020a031681565b600c5481565b60025490565b600d5481565b600f54600160a060020a0390811691161490565b6000610689848484610b71565b600160a060020a0384166000908152600160209081526040808320338085529252909120546106c99186916106c4908663ffffffff610c3416565b610ae3565b5060015b9392505050565b600954604080517fced72f870000000000000000000000000000000000000000000000000000000081529051600092600160a060020a03169163ced72f87916004808301926020929190829003018186803b15801561073257600080fd5b505afa158015610746573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061076a9190810190610e4f565b905090565b600f54600160a060020a031681565b336000818152600160209081526040808320600160a060020a0387168452909152812054909161063d9185906106c4908663ffffffff610c4916565b600854600160a060020a031681565b60115481565b600954600160a060020a031681565b600b54600160a060020a031681565b600a54600160a060020a031681565b600654600160a060020a031681565b600160a060020a031660009081526020819052604090205490565b60135481565b604080516001808252818301909252606091829190602080830190803883395050600f548251929350600160a060020a03169183915060009061086b57fe5b600160a060020a0390921660209283029190910190910152905090565b60165481565b336000818152600160209081526040808320600160a060020a0387168452909152812054909161063d9185906106c4908663ffffffff610c3416565b600061063d338484610b71565b60145481565b600454600160a060020a031681565b601554600160a060020a031681565b670de0b6b3a764000081565b61090f610ab4565b600a546040517ff9c15f5b74b4e002e8881b2d9810116b1d4d45461e6dd7ac8111381b592e2c659161094c918491600160a060020a03169061108b565b60405180910390a1600a805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600160a060020a03918216600090815260016020908152604080832093909416825291909152205490565b6109b6610ab4565b600b546040517f2d63d620fb255d563fc112849cc79d42a367a3c51694709297b3ef80b28a8929916109f3918491600160a060020a03169061108b565b60405180910390a1600b805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b610a32610ab4565b610a3b81610c5b565b610a4481610c89565b7fbf7417a972a6451dbb2afbe07f2846cb433f2c3ab380fecbf70e38684eda554a81600e54604051610a77929190611150565b60405180910390a1600e55565b60175460ff1681565b600354600160a060020a031681565b60125460ff1681565b600554600160a060020a031681565b600a54600160a060020a03163314610ae15760405160e560020a62461bcd0281526004016104b0906110f2565b565b600160a060020a038216610af657600080fd5b600160a060020a038316610b0957600080fd5b600160a060020a0380841660008181526001602090815260408083209487168084529490915290819020849055517f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92590610b64908590611142565b60405180910390a3505050565b600160a060020a038216610b8457600080fd5b600160a060020a038316600090815260208190526040902054610bad908263ffffffff610c3416565b600160a060020a038085166000908152602081905260408082209390935590841681522054610be2908263ffffffff610c4916565b600160a060020a0380841660008181526020819052604090819020939093559151908516907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef90610b64908590611142565b600082821115610c4357600080fd5b50900390565b6000828201838110156106cd57600080fd5b670de0b6b3a7640000811115610c865760405160e560020a62461bcd0281526004016104b090611132565b50565b610c9f81655af3107a400063ffffffff610cbf16565b15610c865760405160e560020a62461bcd0281526004016104b090611102565b600081610ccb57600080fd5b818381610cd457fe5b069392505050565b60006106cd823561117e565b60006106cd8251611189565b60006106cd82356111ad565b60006106cd82356111aa565b60006106cd82516111aa565b600060208284031215610d2a57600080fd5b6000610d368484610cdc565b949350505050565b60008060408385031215610d5157600080fd5b6000610d5d8585610cdc565b9250506020610d6e85828601610cdc565b9150509250929050565b600080600060608486031215610d8d57600080fd5b6000610d998686610cdc565b9350506020610daa86828701610cdc565b9250506040610dbb86828701610d00565b9150509250925092565b60008060408385031215610dd857600080fd5b6000610de48585610cdc565b9250506020610d6e85828601610d00565b600060208284031215610e0757600080fd5b6000610d368484610ce8565b600060208284031215610e2557600080fd5b6000610d368484610cf4565b600060208284031215610e4357600080fd5b6000610d368484610d00565b600060208284031215610e6157600080fd5b6000610d368484610d0c565b6000610e798383610e8d565b505060200190565b6000610e798383611074565b610e968161117e565b82525050565b6000610ea782611171565b610eb18185611175565b9350610ebc8361116b565b60005b82811015610ee757610ed2868351610e6d565b9550610edd8261116b565b9150600101610ebf565b5093949350505050565b6000610efc82611171565b610f068185611175565b9350610f118361116b565b60005b82811015610ee757610f27868351610e81565b9550610f328261116b565b9150600101610f14565b610e9681611189565b610e96816111ad565b610e96816111b8565b6000610f64600b83611175565b7f4e6f74206d616e61676572000000000000000000000000000000000000000000815260200192915050565b6000610f9d601983611175565b7f4d757374206265206d756c7469706c65206f6620302e30312500000000000000815260200192915050565b6000610fd6600f83611175565b7f4e6f742077686974656c69737465640000000000000000000000000000000000815260200192915050565b600061100f600d83611175565b7f496e76616c696420737461746500000000000000000000000000000000000000815260200192915050565b6000611048600f83611175565b7f4d757374206265203c3d20313030250000000000000000000000000000000000815260200192915050565b610e96816111aa565b602081016106418284610e8d565b604081016110998285610e8d565b6106cd6020830184610e8d565b602080825281016106cd8184610e9c565b602080825281016106cd8184610ef1565b602081016106418284610f3c565b602081016106418284610f45565b602081016106418284610f4e565b6020808252810161064181610f57565b6020808252810161064181610f90565b6020808252810161064181610fc9565b6020808252810161064181611002565b602080825281016106418161103b565b602081016106418284611074565b6040810161115e8285611074565b6106cd6020830184611074565b60200190565b5190565b90815260200190565b60006106418261119e565b151590565b60006004821061119a57fe5b5090565b600160a060020a031690565b90565b60006106418261117e565b60006106418261118e56fea265627a7a723058202ebf4d29a6f904b46bb1f75e5098adba1da92206f60a32bde22d1b603758230a6c6578706572696d656e74616cf50037",sourceMap:"1327:5878:85:-;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1327:5878:85;;;;;;;",deployedSourceMap:"1327:5878:85:-;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1327:5878:85;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3416:25:84;;;:::i;:::-;;;;;;;;;;;;;;;;6404:479;;;;;;;;;:::i;:::-;;7868:200;;;:::i;:::-;;;;;;;;3038:23;;;:::i;2721:145:176:-;;;;;;;;;:::i;:::-;;;;;;;;1953:37:84;;;:::i;:::-;;;;;;;;2705:32;;;:::i;916:89:176:-;;;:::i;2839:34:84:-;;;:::i;8215:180::-;;;;;;;;;:::i;3329:224:176:-;;;;;;;;;:::i;7298:139:84:-;;;:::i;3311:27::-;;;:::i;4067:200:176:-;;;;;;;;;:::i;2148:29:84:-;;;:::i;3491:26::-;;;:::i;2246:44::-;;;:::i;2421:27::-;;;:::i;:::-;;;;;;;;2350:22;;;:::i;1869:36::-;;;:::i;1217:104:176:-;;;;;;;;;:::i;3757:29:84:-;;;:::i;7538:229::-;;;:::i;:::-;;;;;;;;4215:33;;;:::i;4786:210:176:-;;;;;;;;;:::i;1948:137::-;;;;;;;;;:::i;3846:37:84:-;;;:::i;1682:::-;;;:::i;4124:24::-;;;:::i;1435:47:85:-;;;:::i;5780:186:84:-;;;;;;;;;:::i;1652:129:176:-;;;;;;;;;:::i;6889:216:84:-;;;;;;;;;:::i;5972:338::-;;;;;;;;;:::i;4473:21::-;;;:::i;1617:17::-;;;:::i;3632:46::-;;;:::i;:::-;;;;;;;;1763:19;;;:::i;3416:25::-;;;;:::o;6404:479::-;4744:17;:15;:17::i;:::-;6559:34;6541:14;;;;:52;;;;;;;;;;6520:112;;;;-1:-1:-1;;;;;6520:112:84;;;;;;;;;;;;;;;;;6664:19;;:54;;;;;-1:-1:-1;;;;;6664:19:84;;;;:29;;:54;;6702:14;;6664:54;;;;;;;;;;;;;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;6664:54:84;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;6664:54:84;;;;;;;101:4:-1;97:9;90:4;84;80:15;76:31;69:5;65:43;126:6;120:4;113:20;0:138;6664:54:84;;;;;;;;;6643:116;;;;-1:-1:-1;;;;;6643:116:84;;;;;;;;;6827:10;;6775:64;;;;;;6802:14;;-1:-1:-1;;;;;6827:10:84;;6775:64;;;;;;;;;;6849:10;:27;;-1:-1:-1;;6849:27:84;-1:-1:-1;;;;;6849:27:84;;;;;;;;;;6404:479::o;7868:200::-;7992:16;;;8006:1;7992:16;;;;;;;;;7935;;;;7992;;;;;;;105:10:-1;7992:16:84;88:34:-1;136:17;;-1:-1;7992:16:84;7967:41;;8029:10;;8018:5;8024:1;8018:8;;;;;;;;;;;;;;;;;:21;8056:5;-1:-1:-1;7868:200:84;:::o;3038:23::-;;;;:::o;2721:145:176:-;2786:4;2802:36;2811:10;2823:7;2832:5;2802:8;:36::i;:::-;-1:-1:-1;2855:4:176;2721:145;;;;;:::o;1953:37:84:-;;;-1:-1:-1;;;;;1953:37:84;;:::o;2705:32::-;;;;:::o;916:89:176:-;986:12;;916:89;:::o;2839:34:84:-;;;;:::o;8215:180::-;8377:10;;-1:-1:-1;;;;;8377:10:84;;;8352:36;;;;8215:180::o;3329:224:176:-;3408:4;3424:26;3434:4;3440:2;3444:5;3424:9;:26::i;:::-;-1:-1:-1;;;;;3487:14:176;;;;;;:8;:14;;;;;;;;3475:10;3487:26;;;;;;;;;3460:65;;3469:4;;3487:37;;3518:5;3487:37;:30;:37;:::i;:::-;3460:8;:65::i;:::-;-1:-1:-1;3542:4:176;3329:224;;;;;;:::o;7298:139:84:-;7399:22;;:31;;;;;;;;7369:7;;-1:-1:-1;;;;;7399:22:84;;:29;;:31;;;;;;;;;;;;;;:22;:31;;;5:2:-1;;;;30:1;27;20:12;5:2;7399:31:84;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;7399:31:84;;;;;;;101:4:-1;97:9;90:4;84;80:15;76:31;69:5;65:43;126:6;120:4;113:20;0:138;7399:31:84;;;;;;;;;7392:38;;7298:139;:::o;3311:27::-;;;-1:-1:-1;;;;;3311:27:84;;:::o;4067:200:176:-;4172:10;4147:4;4193:20;;;:8;:20;;;;;;;;-1:-1:-1;;;;;4193:29:176;;;;;;;;;;4147:4;;4163:76;;4184:7;;4193:45;;4227:10;4193:45;:33;:45;:::i;2148:29:84:-;;;-1:-1:-1;;;;;2148:29:84;;:::o;3491:26::-;;;;:::o;2246:44::-;;;-1:-1:-1;;;;;2246:44:84;;:::o;2421:27::-;;;-1:-1:-1;;;;;2421:27:84;;:::o;2350:22::-;;;-1:-1:-1;;;;;2350:22:84;;:::o;1869:36::-;;;-1:-1:-1;;;;;1869:36:84;;:::o;1217:104:176:-;-1:-1:-1;;;;;1298:16:176;1272:7;1298:16;;;;;;;;;;;;1217:104::o;3757:29:84:-;;;;:::o;7538:229::-;7672:16;;;7686:1;7672:16;;;;;;;;;7610;;;;7672;;;;;;;105:10:-1;7672:16:84;88:34:-1;-1:-1;;7722:10:84;;7698:13;;;;-1:-1:-1;;;;;;7722:10:84;;7698:13;;-1:-1:-1;7722:10:84;;7698:13;;;;-1:-1:-1;;;;;7698:35:84;;;:13;;;;;;;;;;;:35;7750:10;-1:-1:-1;7538:229:84;:::o;4215:33::-;;;;:::o;4786:210:176:-;4896:10;4871:4;4917:20;;;:8;:20;;;;;;;;-1:-1:-1;;;;;4917:29:176;;;;;;;;;;4871:4;;4887:81;;4908:7;;4917:50;;4951:15;4917:50;:33;:50;:::i;1948:137::-;2009:4;2025:32;2035:10;2047:2;2051:5;2025:9;:32::i;3846:37:84:-;;;;:::o;1682:::-;;;-1:-1:-1;;;;;1682:37:84;;:::o;4124:24::-;;;-1:-1:-1;;;;;4124:24:84;;:::o;1435:47:85:-;1474:8;1435:47;:::o;5780:186:84:-;4744:17;:15;:17::i;:::-;5920:7;;5891:37;;;;;;5907:11;;-1:-1:-1;;;;;5920:7:84;;5891:37;;;;;;;;;;5938:7;:21;;-1:-1:-1;;5938:21:84;-1:-1:-1;;;;;5938:21:84;;;;;;;;;;5780:186::o;1652:129:176:-;-1:-1:-1;;;;;1750:15:176;;;1724:7;1750:15;;;:8;:15;;;;;;;;:24;;;;;;;;;;;;;1652:129::o;6889:216:84:-;4744:17;:15;:17::i;:::-;7044:12;;7010:47;;;;;;7026:16;;-1:-1:-1;;;;;7044:12:84;;7010:47;;;;;;;;;;7067:12;:31;;-1:-1:-1;;7067:31:84;-1:-1:-1;;;;;7067:31:84;;;;;;;;;;6889:216::o;5972:338::-;4744:17;:15;:17::i;:::-;6080:69;6136:12;6080:55;:69::i;:::-;6160:59;6206:12;6160:45;:59::i;:::-;6235:35;6247:12;6261:8;;6235:35;;;;;;;;;;;;;;;;6280:8;:23;5972:338::o;4473:21::-;;;;;;:::o;1617:17::-;;;-1:-1:-1;;;;;1617:17:84;;:::o;3632:46::-;;;;;;:::o;1763:19::-;;;-1:-1:-1;;;;;1763:19:84;;:::o;8449:137::-;8535:7;;-1:-1:-1;;;;;8535:7:84;8521:10;:21;8500:79;;;;-1:-1:-1;;;;;8500:79:84;;;;;;;;;8449:137::o;6831:248:176:-;-1:-1:-1;;;;;6923:21:176;;6915:30;;;;;;-1:-1:-1;;;;;6963:19:176;;6955:28;;;;;;-1:-1:-1;;;;;6994:15:176;;;;;;;:8;:15;;;;;;;;:24;;;;;;;;;;;;;;:32;;;7041:31;;;;;7021:5;;7041:31;;;;;;;;;;6831:248;;;:::o;5215:256::-;-1:-1:-1;;;;;5302:16:176;;5294:25;;;;;;-1:-1:-1;;;;;5348:15:176;;:9;:15;;;;;;;;;;;:26;;5368:5;5348:26;:19;:26;:::i;:::-;-1:-1:-1;;;;;5330:15:176;;;:9;:15;;;;;;;;;;;:44;;;;5400:13;;;;;;;:24;;5418:5;5400:24;:17;:24;:::i;:::-;-1:-1:-1;;;;;5384:13:176;;;:9;:13;;;;;;;;;;;;:40;;;;5439:25;;;;;;;;;;5458:5;;5439:25;;1211:145:174;1269:7;1301:1;1296;:6;;1288:15;;;;;;-1:-1:-1;1325:5:174;;;1211:145::o;1439:::-;1497:7;1528:5;;;1551:6;;;;1543:15;;;;;876:152:123;812:4;972:6;:29;;964:57;;;;-1:-1:-1;;;;;964:57:123;;;;;;;;;876:152;:::o;1034:189::-;1133:27;:6;865:4;1133:27;:10;:27;:::i;:::-;:32;1112:104;;;;-1:-1:-1;;;;;1112:104:123;;;;;;;;1739:121:174;1797:7;1824:6;1816:15;;;;;;1852:1;1848;:5;;;;;;;1739:121;-1:-1:-1;;;1739:121:174:o;5:118:-1:-;;72:46;110:6;97:20;72:46;;130:116;;205:36;233:6;227:13;205:36;;253:158;;340:66;398:6;385:20;340:66;;418:118;;485:46;523:6;510:20;485:46;;543:122;;621:39;652:6;646:13;621:39;;672:241;;776:2;764:9;755:7;751:23;747:32;744:2;;;792:1;789;782:12;744:2;827:1;844:53;889:7;869:9;844:53;;;834:63;738:175;-1:-1;;;;738:175;920:366;;;1041:2;1029:9;1020:7;1016:23;1012:32;1009:2;;;1057:1;1054;1047:12;1009:2;1092:1;1109:53;1154:7;1134:9;1109:53;;;1099:63;;1071:97;1199:2;1217:53;1262:7;1253:6;1242:9;1238:22;1217:53;;;1207:63;;1178:98;1003:283;;;;;;1293:491;;;;1431:2;1419:9;1410:7;1406:23;1402:32;1399:2;;;1447:1;1444;1437:12;1399:2;1482:1;1499:53;1544:7;1524:9;1499:53;;;1489:63;;1461:97;1589:2;1607:53;1652:7;1643:6;1632:9;1628:22;1607:53;;;1597:63;;1568:98;1697:2;1715:53;1760:7;1751:6;1740:9;1736:22;1715:53;;;1705:63;;1676:98;1393:391;;;;;;1791:366;;;1912:2;1900:9;1891:7;1887:23;1883:32;1880:2;;;1928:1;1925;1918:12;1880:2;1963:1;1980:53;2025:7;2005:9;1980:53;;;1970:63;;1942:97;2070:2;2088:53;2133:7;2124:6;2113:9;2109:22;2088:53;;2164:257;;2276:2;2264:9;2255:7;2251:23;2247:32;2244:2;;;2292:1;2289;2282:12;2244:2;2327:1;2344:61;2397:7;2377:9;2344:61;;2428:281;;2552:2;2540:9;2531:7;2527:23;2523:32;2520:2;;;2568:1;2565;2558:12;2520:2;2603:1;2620:73;2685:7;2665:9;2620:73;;2716:241;;2820:2;2808:9;2799:7;2795:23;2791:32;2788:2;;;2836:1;2833;2826:12;2788:2;2871:1;2888:53;2933:7;2913:9;2888:53;;2964:263;;3079:2;3067:9;3058:7;3054:23;3050:32;3047:2;;;3095:1;3092;3085:12;3047:2;3130:1;3147:64;3203:7;3183:9;3147:64;;3235:173;;3322:46;3364:3;3356:6;3322:46;;;-1:-1;;3397:4;3388:14;;3315:93;3417:173;;3504:46;3546:3;3538:6;3504:46;;3598:110;3671:31;3696:5;3671:31;;;3666:3;3659:44;3653:55;;;3873:621;;4018:54;4066:5;4018:54;;;4085:86;4164:6;4159:3;4085:86;;;4078:93;;4191:56;4241:5;4191:56;;;4268:1;4253:219;4278:6;4275:1;4272:13;4253:219;;;4325:63;4384:3;4375:6;4369:13;4325:63;;;4318:70;;4405:60;4458:6;4405:60;;;4395:70;-1:-1;4300:1;4293:9;4253:219;;;-1:-1;4485:3;;3997:497;-1:-1;;;;3997:497;4533:621;;4678:54;4726:5;4678:54;;;4745:86;4824:6;4819:3;4745:86;;;4738:93;;4851:56;4901:5;4851:56;;;4928:1;4913:219;4938:6;4935:1;4932:13;4913:219;;;4985:63;5044:3;5035:6;5029:13;4985:63;;;4978:70;;5065:60;5118:6;5065:60;;;5055:70;-1:-1;4960:1;4953:9;4913:219;;5162:111;5239:28;5261:5;5239:28;;5280:154;5377:51;5422:5;5377:51;;6491:142;6582:45;6621:5;6582:45;;6641:364;;6801:67;6865:2;6860:3;6801:67;;;6901:66;6881:87;;6996:2;6987:12;;6787:218;-1:-1;;6787:218;7014:364;;7174:67;7238:2;7233:3;7174:67;;;7274:66;7254:87;;7369:2;7360:12;;7160:218;-1:-1;;7160:218;7387:364;;7547:67;7611:2;7606:3;7547:67;;;7647:66;7627:87;;7742:2;7733:12;;7533:218;-1:-1;;7533:218;7760:364;;7920:67;7984:2;7979:3;7920:67;;;8020:66;8000:87;;8115:2;8106:12;;7906:218;-1:-1;;7906:218;8133:364;;8293:67;8357:2;8352:3;8293:67;;;8393:66;8373:87;;8488:2;8479:12;;8279:218;-1:-1;;8279:218;8505:110;8578:31;8603:5;8578:31;;8749:213;8867:2;8852:18;;8881:71;8856:9;8925:6;8881:71;;8969:324;9115:2;9100:18;;9129:71;9104:9;9173:6;9129:71;;;9211:72;9279:2;9268:9;9264:18;9255:6;9211:72;;9300:361;9468:2;9482:47;;;9453:18;;9543:108;9453:18;9637:6;9543:108;;9668:361;9836:2;9850:47;;;9821:18;;9911:108;9821:18;10005:6;9911:108;;10036:201;10148:2;10133:18;;10162:65;10137:9;10200:6;10162:65;;10244:241;10376:2;10361:18;;10390:85;10365:9;10448:6;10390:85;;12064:229;12190:2;12175:18;;12204:79;12179:9;12256:6;12204:79;;12300:407;12491:2;12505:47;;;12476:18;;12566:131;12476:18;12566:131;;12714:407;12905:2;12919:47;;;12890:18;;12980:131;12890:18;12980:131;;13128:407;13319:2;13333:47;;;13304:18;;13394:131;13304:18;13394:131;;13542:407;13733:2;13747:47;;;13718:18;;13808:131;13718:18;13808:131;;13956:407;14147:2;14161:47;;;14132:18;;14222:131;14132:18;14222:131;;14370:213;14488:2;14473:18;;14502:71;14477:9;14546:6;14502:71;;14590:324;14736:2;14721:18;;14750:71;14725:9;14794:6;14750:71;;;14832:72;14900:2;14889:9;14885:18;14876:6;14832:72;;14923:121;15032:4;15020:17;;15001:43;15185:107;15275:12;;15259:33;15676:178;15794:19;;;15843:4;15834:14;;15787:67;16221:105;;16290:31;16315:5;16290:31;;16333:92;16406:13;16399:21;;16382:43;16432:127;;16520:1;16513:5;16510:12;16500:2;;16526:9;16500:2;-1:-1;16549:5;16494:65;16566:128;-1:-1;;;;;16635:54;;16618:76;16701:79;16770:5;16753:27;16998:125;;17087:31;17112:5;17087:31;;19521:133;;19608:41;19643:5;19608:41;",source:'/*\n    Copyright 2019 Set Labs Inc.\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\npragma solidity 0.5.7;\npragma experimental "ABIEncoderV2";\n\nimport { Math } from "openzeppelin-solidity/contracts/math/Math.sol";\nimport { SafeMath } from "openzeppelin-solidity/contracts/math/SafeMath.sol";\nimport { ERC20 } from "openzeppelin-solidity/contracts/token/ERC20/ERC20.sol";\n\nimport { CommonMath } from "../../../lib/CommonMath.sol";\nimport { ISetToken } from "../../interfaces/ISetToken.sol";\nimport { IVault } from "../../interfaces/IVault.sol";\nimport { RebalancingLibrary } from "../../lib/RebalancingLibrary.sol";\nimport { RebalancingSetState } from "./RebalancingSetState.sol";\nimport { SetTokenLibrary } from "../../lib/SetTokenLibrary.sol";\n\n\n/**\n * @title RebalancingSettlement\n * @author Set Protocol\n *\n */\ncontract RebalancingSettlement is\n    ERC20,\n    RebalancingSetState\n{\n    using SafeMath for uint256;\n\n    uint256 public constant SCALE_FACTOR = 10 ** 18;\n\n    /* ============ Internal Functions ============ */\n\n    /*\n     * Validates that the settle function can be called.\n     */\n    function validateRebalancingSettlement()\n        internal\n        view\n    {\n        validateRebalanceStateIs(RebalancingLibrary.State.Rebalance);\n    }\n\n    /*\n     * Issue nextSet to RebalancingSetToken; The issued Set is held in the Vault\n     *\n     * @param  _issueQuantity   Quantity of next Set to issue\n     */\n    function issueNextSet(\n        uint256 _issueQuantity\n    )\n        internal\n    {\n        core.issueInVault(\n            address(nextSet),\n            _issueQuantity\n        );\n    }\n\n    /*\n     * Updates state post-settlement.\n     *\n     * @param  _nextUnitShares   The new implied unit shares\n     */\n    function transitionToDefault(\n        uint256 _newUnitShares\n    )\n        internal\n    {\n        rebalanceState = RebalancingLibrary.State.Default;\n        lastRebalanceTimestamp = block.timestamp;\n        currentSet = nextSet;\n        unitShares = _newUnitShares;\n        rebalanceIndex = rebalanceIndex.add(1);\n\n        nextSet = ISetToken(address(0));\n        hasBidded = false;\n    }\n\n    /**\n     * Calculate the amount of Sets to issue by using the component amounts in the\n     * vault.\n     */\n    function calculateSetIssueQuantity(\n        ISetToken _setToken\n    )\n        internal\n        view\n        returns (uint256)\n    {\n        // Collect data necessary to compute issueAmounts\n        SetTokenLibrary.SetDetails memory setToken = SetTokenLibrary.getSetDetails(address(_setToken));\n        uint256 maxIssueAmount = calculateMaxIssueAmount(setToken);\n\n        // Issue amount of Sets that is closest multiple of nextNaturalUnit to the maxIssueAmount\n        uint256 issueAmount = maxIssueAmount.sub(maxIssueAmount.mod(setToken.naturalUnit));\n\n        return issueAmount;\n    }\n\n    /**\n     * Calculates the fee and mints the rebalancing SetToken quantity to the recipient.\n     * The minting is done without an increase to the total collateral controlled by the\n     * rebalancing SetToken. In effect, the existing holders are paying the fee via inflation.\n     *\n     * @return feePercentage\n     * @return feeQuantity\n     */\n    function handleFees()\n        internal\n        returns (uint256, uint256)\n    {\n        // Represents a decimal value scaled by 1e18 (e.g. 100% = 1e18 and 1% = 1e16)\n        uint256 feePercent = rebalanceFeeCalculator.getFee();\n        uint256 feeQuantity = calculateRebalanceFeeInflation(feePercent);\n\n        if (feeQuantity > 0) {\n            ERC20._mint(feeRecipient, feeQuantity);\n        }\n\n        return (feePercent, feeQuantity);\n    }\n\n    /**\n     * Returns the new rebalance fee. The calculation for the fee involves implying\n     * mint quantity so that the feeRecipient owns the fee percentage of the entire\n     * supply of the Set.\n     *\n     * The formula to solve for fee is:\n     * feeQuantity / feeQuantity + totalSupply = fee / scaleFactor\n     *\n     * The simplified formula utilized below is:\n     * feeQuantity = fee * totalSupply / (scaleFactor - fee)\n     *\n     * @param   _rebalanceFeePercent    Fee levied to feeRecipient every rebalance, paid during settlement\n     * @return  uint256                 New RebalancingSet issue quantity\n     */\n    function calculateRebalanceFeeInflation(\n        uint256 _rebalanceFeePercent\n    )\n        internal\n        view\n        returns(uint256)\n    {\n        // fee * totalSupply\n        uint256 a = _rebalanceFeePercent.mul(totalSupply());\n\n        // ScaleFactor (10e18) - fee\n        uint256 b = SCALE_FACTOR.sub(_rebalanceFeePercent);\n\n        return a.div(b);\n    }\n\n    /**\n     * Calculates the new unitShares, defined as issueQuantity / naturalUnitsOutstanding\n     *\n     * @param  _issueQuantity   Amount of nextSets to issue\n     *\n     * @return  uint256             New unitShares for the rebalancingSetToken\n     */\n    function calculateNextSetNewUnitShares(\n        uint256 _issueQuantity\n    )\n        internal\n        view\n        returns (uint256)\n    {\n        // Calculate the amount of naturalUnits worth of rebalancingSetToken outstanding.\n        uint256 naturalUnitsOutstanding = totalSupply().div(naturalUnit);\n\n        // Divide final issueAmount by naturalUnitsOutstanding to get newUnitShares\n        return _issueQuantity.div(naturalUnitsOutstanding);\n    }\n\n    /* ============ Private Functions ============ */\n\n    /**\n     * Get the maximum possible issue amount of nextSet based on number of components owned by rebalancing\n     * set token.\n     *\n     * @param  _setToken    Struct of Set Token details\n     */\n    function calculateMaxIssueAmount(\n        SetTokenLibrary.SetDetails memory _setToken\n    )\n        private\n        view\n        returns (uint256)\n    {\n        uint256 maxIssueAmount = CommonMath.maxUInt256();\n\n        for (uint256 i = 0; i < _setToken.components.length; i++) {\n            // Get amount of components in vault owned by rebalancingSetToken\n            uint256 componentAmount = vault.getOwnerBalance(\n                _setToken.components[i],\n                address(this)\n            );\n\n            // Calculate amount of Sets that can be issued from those components, if less than amount for other\n            // components then set that as maxIssueAmount. We divide before multiplying so that we don\'t get\n            // an amount that isn\'t a multiple of the naturalUnit\n            uint256 componentIssueAmount = componentAmount.div(_setToken.units[i]).mul(_setToken.naturalUnit);\n            if (componentIssueAmount < maxIssueAmount) {\n                maxIssueAmount = componentIssueAmount;\n            }\n        }\n\n        return maxIssueAmount;\n    }\n}\n',sourcePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/tokens/rebalancing-v2/RebalancingSettlement.sol",ast:{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/tokens/rebalancing-v2/RebalancingSettlement.sol",exportedSymbols:{RebalancingSettlement:[19606]},id:19607,nodeType:"SourceUnit",nodes:[{id:19316,literals:["solidity","0.5",".7"],nodeType:"PragmaDirective",src:"597:22:85"},{id:19317,literals:["experimental","ABIEncoderV2"],nodeType:"PragmaDirective",src:"620:35:85"},{absolutePath:"openzeppelin-solidity/contracts/math/Math.sol",file:"openzeppelin-solidity/contracts/math/Math.sol",id:19319,nodeType:"ImportDirective",scope:19607,sourceUnit:29513,src:"657:69:85",symbolAliases:[{foreign:19318,local:null}],unitAlias:""},{absolutePath:"openzeppelin-solidity/contracts/math/SafeMath.sol",file:"openzeppelin-solidity/contracts/math/SafeMath.sol",id:19321,nodeType:"ImportDirective",scope:19607,sourceUnit:29641,src:"727:77:85",symbolAliases:[{foreign:19320,local:null}],unitAlias:""},{absolutePath:"openzeppelin-solidity/contracts/token/ERC20/ERC20.sol",file:"openzeppelin-solidity/contracts/token/ERC20/ERC20.sol",id:19323,nodeType:"ImportDirective",scope:19607,sourceUnit:30133,src:"805:78:85",symbolAliases:[{foreign:19322,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/CommonMath.sol",file:"../../../lib/CommonMath.sol",id:19325,nodeType:"ImportDirective",scope:19607,sourceUnit:23437,src:"885:57:85",symbolAliases:[{foreign:19324,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ISetToken.sol",file:"../../interfaces/ISetToken.sol",id:19327,nodeType:"ImportDirective",scope:19607,sourceUnit:5660,src:"943:59:85",symbolAliases:[{foreign:19326,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IVault.sol",file:"../../interfaces/IVault.sol",id:19329,nodeType:"ImportDirective",scope:19607,sourceUnit:5783,src:"1003:53:85",symbolAliases:[{foreign:19328,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/RebalancingLibrary.sol",file:"../../lib/RebalancingLibrary.sol",id:19331,nodeType:"ImportDirective",scope:19607,sourceUnit:6658,src:"1057:70:85",symbolAliases:[{foreign:19330,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/tokens/rebalancing-v2/RebalancingSetState.sol",file:"./RebalancingSetState.sol",id:19333,nodeType:"ImportDirective",scope:19607,sourceUnit:19315,src:"1128:64:85",symbolAliases:[{foreign:19332,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/SetTokenLibrary.sol",file:"../../lib/SetTokenLibrary.sol",id:19335,nodeType:"ImportDirective",scope:19607,sourceUnit:6842,src:"1193:64:85",symbolAliases:[{foreign:19334,local:null}],unitAlias:""},{baseContracts:[{arguments:null,baseName:{contractScope:null,id:19336,name:"ERC20",nodeType:"UserDefinedTypeName",referencedDeclaration:30132,src:"1365:5:85",typeDescriptions:{typeIdentifier:"t_contract$_ERC20_$30132",typeString:"contract ERC20"}},id:19337,nodeType:"InheritanceSpecifier",src:"1365:5:85"},{arguments:null,baseName:{contractScope:null,id:19338,name:"RebalancingSetState",nodeType:"UserDefinedTypeName",referencedDeclaration:19314,src:"1376:19:85",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSetState_$19314",typeString:"contract RebalancingSetState"}},id:19339,nodeType:"InheritanceSpecifier",src:"1376:19:85"}],contractDependencies:[19314,30132,30259],contractKind:"contract",documentation:"@title RebalancingSettlement\n@author Set Protocol\n ",fullyImplemented:true,id:19606,linearizedBaseContracts:[19606,19314,30132,30259],name:"RebalancingSettlement",nodeType:"ContractDefinition",nodes:[{id:19342,libraryName:{contractScope:null,id:19340,name:"SafeMath",nodeType:"UserDefinedTypeName",referencedDeclaration:29640,src:"1408:8:85",typeDescriptions:{typeIdentifier:"t_contract$_SafeMath_$29640",typeString:"library SafeMath"}},nodeType:"UsingForDirective",src:"1402:27:85",typeName:{id:19341,name:"uint256",nodeType:"ElementaryTypeName",src:"1421:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}},{constant:true,id:19347,name:"SCALE_FACTOR",nodeType:"VariableDeclaration",scope:19606,src:"1435:47:85",stateVariable:true,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19343,name:"uint256",nodeType:"ElementaryTypeName",src:"1435:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:{argumentTypes:null,commonType:{typeIdentifier:"t_rational_1000000000000000000_by_1",typeString:"int_const 1000000000000000000"},id:19346,isConstant:false,
isLValue:false,isPure:true,lValueRequested:false,leftExpression:{argumentTypes:null,hexValue:"3130",id:19344,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"1474:2:85",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_10_by_1",typeString:"int_const 10"},value:"10"},nodeType:"BinaryOperation",operator:"**",rightExpression:{argumentTypes:null,hexValue:"3138",id:19345,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"1480:2:85",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_18_by_1",typeString:"int_const 18"},value:"18"},src:"1474:8:85",typeDescriptions:{typeIdentifier:"t_rational_1000000000000000000_by_1",typeString:"int_const 1000000000000000000"}},visibility:"public"},{body:{id:19356,nodeType:"Block",src:"1692:77:85",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,expression:{argumentTypes:null,id:19351,name:"RebalancingLibrary",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6657,src:"1727:18:85",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_RebalancingLibrary_$6657_$",typeString:"type(library RebalancingLibrary)"}},id:19352,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"State",nodeType:"MemberAccess",referencedDeclaration:6633,src:"1727:24:85",typeDescriptions:{typeIdentifier:"t_type$_t_enum$_State_$6633_$",typeString:"type(enum RebalancingLibrary.State)"}},id:19353,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,memberName:"Rebalance",nodeType:"MemberAccess",referencedDeclaration:null,src:"1727:34:85",typeDescriptions:{typeIdentifier:"t_enum$_State_$6633",typeString:"enum RebalancingLibrary.State"}}],expression:{argumentTypes:[{typeIdentifier:"t_enum$_State_$6633",typeString:"enum RebalancingLibrary.State"}],id:19350,name:"validateRebalanceStateIs",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19300,src:"1702:24:85",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_enum$_State_$6633_$returns$__$",typeString:"function (enum RebalancingLibrary.State) view"}},id:19354,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"1702:60:85",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:19355,nodeType:"ExpressionStatement",src:"1702:60:85"}]},documentation:null,id:19357,implemented:true,kind:"function",modifiers:[],name:"validateRebalancingSettlement",nodeType:"FunctionDefinition",parameters:{id:19348,nodeType:"ParameterList",parameters:[],src:"1655:2:85"},returnParameters:{id:19349,nodeType:"ParameterList",parameters:[],src:"1692:0:85"},scope:19606,src:"1617:152:85",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:19371,nodeType:"Block",src:"2021:102:85",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:19366,name:"nextSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19001,src:"2070:7:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}],id:19365,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"2062:7:85",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:19367,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2062:16:85",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:19368,name:"_issueQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19359,src:"2092:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19362,name:"core",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18965,src:"2031:4:85",typeDescriptions:{typeIdentifier:"t_contract$_ICore_$4746",typeString:"contract ICore"}},id:19364,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"issueInVault",nodeType:"MemberAccess",referencedDeclaration:4520,src:"2031:17:85",typeDescriptions:{typeIdentifier:"t_function_external_nonpayable$_t_address_$_t_uint256_$returns$__$",typeString:"function (address,uint256) external"}},id:19369,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2031:85:85",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:19370,nodeType:"ExpressionStatement",src:"2031:85:85"}]},documentation:null,id:19372,implemented:true,kind:"function",modifiers:[],name:"issueNextSet",nodeType:"FunctionDefinition",parameters:{id:19360,nodeType:"ParameterList",parameters:[{constant:false,id:19359,name:"_issueQuantity",nodeType:"VariableDeclaration",scope:19372,src:"1971:22:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19358,name:"uint256",nodeType:"ElementaryTypeName",src:"1971:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"1961:38:85"},returnParameters:{id:19361,nodeType:"ParameterList",parameters:[],src:"2021:0:85"},scope:19606,src:"1940:183:85",stateMutability:"nonpayable",superFunction:null,visibility:"internal"},{body:{id:19415,nodeType:"Block",src:"2338:300:85",statements:[{expression:{argumentTypes:null,id:19381,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19377,name:"rebalanceState",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18995,src:"2348:14:85",typeDescriptions:{typeIdentifier:"t_enum$_State_$6633",typeString:"enum RebalancingLibrary.State"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,expression:{argumentTypes:null,expression:{argumentTypes:null,id:19378,name:"RebalancingLibrary",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6657,src:"2365:18:85",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_RebalancingLibrary_$6657_$",typeString:"type(library RebalancingLibrary)"}},id:19379,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"State",nodeType:"MemberAccess",referencedDeclaration:6633,src:"2365:24:85",typeDescriptions:{typeIdentifier:"t_type$_t_enum$_State_$6633_$",typeString:"type(enum RebalancingLibrary.State)"}},id:19380,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,memberName:"Default",nodeType:"MemberAccess",referencedDeclaration:null,src:"2365:32:85",typeDescriptions:{typeIdentifier:"t_enum$_State_$6633",typeString:"enum RebalancingLibrary.State"}},src:"2348:49:85",typeDescriptions:{typeIdentifier:"t_enum$_State_$6633",typeString:"enum RebalancingLibrary.State"}},id:19382,nodeType:"ExpressionStatement",src:"2348:49:85"},{expression:{argumentTypes:null,id:19386,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19383,name:"lastRebalanceTimestamp",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18999,src:"2407:22:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,expression:{argumentTypes:null,id:19384,name:"block",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30366,src:"2432:5:85",typeDescriptions:{typeIdentifier:"t_magic_block",typeString:"block"}},id:19385,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"timestamp",nodeType:"MemberAccess",referencedDeclaration:null,src:"2432:15:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2407:40:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19387,nodeType:"ExpressionStatement",src:"2407:40:85"},{expression:{argumentTypes:null,id:19390,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19388,name:"currentSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18989,src:"2457:10:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,id:19389,name:"nextSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19001,src:"2470:7:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},src:"2457:20:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:19391,nodeType:"ExpressionStatement",src:"2457:20:85"},{expression:{argumentTypes:null,id:19394,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19392,name:"unitShares",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18991,src:"2487:10:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,id:19393,name:"_newUnitShares",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19374,src:"2500:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2487:27:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19395,nodeType:"ExpressionStatement",src:"2487:27:85"},{expression:{argumentTypes:null,id:19401,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19396,name:"rebalanceIndex",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18997,src:"2524:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,hexValue:"31",id:19399,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"2560:1:85",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_1_by_1",typeString:"int_const 1"},value:"1"}],expression:{argumentTypes:[{typeIdentifier:"t_rational_1_by_1",typeString:"int_const 1"}],expression:{argumentTypes:null,id:19397,name:"rebalanceIndex",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18997,src:"2541:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19398,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"add",nodeType:"MemberAccess",referencedDeclaration:29619,src:"2541:18:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19400,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2541:21:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2524:38:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19402,nodeType:"ExpressionStatement",src:"2524:38:85"},{expression:{argumentTypes:null,id:19409,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19403,name:"nextSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19001,src:"2573:7:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,hexValue:"30",id:19406,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"2601:1:85",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"}],expression:{argumentTypes:[{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"}],id:19405,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"2593:7:85",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:19407,isConstant:false,isLValue:false,isPure:true,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2593:10:85",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}}],expression:{argumentTypes:[{typeIdentifier:"t_address_payable",typeString:"address payable"}],id:19404,name:"ISetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5659,src:"2583:9:85",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ISetToken_$5659_$",typeString:"type(contract ISetToken)"}},id:19408,isConstant:false,isLValue:false,isPure:true,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2583:21:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},src:"2573:31:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:19410,nodeType:"ExpressionStatement",src:"2573:31:85"},{expression:{argumentTypes:null,id:19413,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19411,name:"hasBidded",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19005,src:"2614:9:85",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,hexValue:"66616c7365",id:19412,isConstant:false,isLValue:false,isPure:true,kind:"bool",lValueRequested:false,nodeType:"Literal",src:"2626:5:85",subdenomination:null,typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"},value:"false"},src:"2614:17:85",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:19414,nodeType:"ExpressionStatement",src:"2614:17:85"}]},documentation:null,id:19416,implemented:true,kind:"function",modifiers:[],name:"transitionToDefault",nodeType:"FunctionDefinition",parameters:{id:19375,nodeType:"ParameterList",parameters:[{constant:false,id:19374,name:"_newUnitShares",nodeType:"VariableDeclaration",scope:19416,src:"2288:22:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19373,name:"uint256",nodeType:"ElementaryTypeName",src:"2288:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"2278:38:85"},returnParameters:{id:19376,nodeType:"ParameterList",parameters:[],src:"2338:0:85"},scope:19606,src:"2250:388:85",stateMutability:"nonpayable",superFunction:null,visibility:"internal"},{body:{id:19453,nodeType:"Block",src:"2887:457:85",statements:[{assignments:[19426],declarations:[{constant:false,id:19426,name:"setToken",nodeType:"VariableDeclaration",scope:19453,src:"2955:42:85",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails"},typeName:{contractScope:null,id:19425,name:"SetTokenLibrary.SetDetails",nodeType:"UserDefinedTypeName",referencedDeclaration:6726,src:"2955:26:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_storage_ptr",typeString:"struct SetTokenLibrary.SetDetails"}},value:null,visibility:"internal"}],id:19433,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:19430,name:"_setToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19418,src:"3038:9:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}],id:19429,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"3030:7:85",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:19431,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3030:18:85",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,id:19427,name:"SetTokenLibrary",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6841,src:"3000:15:85",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_SetTokenLibrary_$6841_$",typeString:"type(library SetTokenLibrary)"}},id:19428,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getSetDetails",nodeType:"MemberAccess",referencedDeclaration:6840,src:"3000:29:85",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_address_$returns$_t_struct$_SetDetails_$6726_memory_ptr_$",typeString:"function (address) view returns (struct SetTokenLibrary.SetDetails memory)"}},id:19432,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3000:49:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}},nodeType:"VariableDeclarationStatement",src:"2955:94:85"},{assignments:[19435],declarations:[{constant:false,id:19435,name:"maxIssueAmount",nodeType:"VariableDeclaration",scope:19453,src:"3059:22:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19434,name:"uint256",nodeType:"ElementaryTypeName",src:"3059:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19439,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:19437,name:"setToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19426,src:"3108:8:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}}],expression:{argumentTypes:[{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}],id:19436,name:"calculateMaxIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19605,src:"3084:23:85",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_struct$_SetDetails_$6726_memory_ptr_$returns$_t_uint256_$",typeString:"function (struct SetTokenLibrary.SetDetails memory) view returns (uint256)"}},id:19438,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3084:33:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3059:58:85"},{assignments:[19441],declarations:[{constant:false,id:19441,name:"issueAmount",nodeType:"VariableDeclaration",scope:19453,src:"3226:19:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19440,name:"uint256",nodeType:"ElementaryTypeName",src:"3226:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19450,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,id:19446,name:"setToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19426,src:"3286:8:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}},id:19447,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:6719,src:"3286:20:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19444,name:"maxIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19435,src:"3267:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19445,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mod",nodeType:"MemberAccess",referencedDeclaration:29639,src:"3267:18:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19448,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3267:40:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19442,name:"maxIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19435,src:"3248:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19443,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sub",nodeType:"MemberAccess",referencedDeclaration:29595,src:"3248:18:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19449,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3248:60:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3226:82:85"},{expression:{argumentTypes:null,id:19451,name:"issueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19441,src:"3326:11:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:19422,id:19452,nodeType:"Return",src:"3319:18:85"}]},documentation:"Calculate the amount of Sets to issue by using the component amounts in the\nvault.",id:19454,implemented:true,kind:"function",modifiers:[],name:"calculateSetIssueQuantity",nodeType:"FunctionDefinition",parameters:{id:19419,nodeType:"ParameterList",parameters:[{constant:false,id:19418,name:"_setToken",nodeType:"VariableDeclaration",scope:19454,src:"2801:19:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"},typeName:{contractScope:null,id:19417,name:"ISetToken",nodeType:"UserDefinedTypeName",referencedDeclaration:5659,src:"2801:9:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},value:null,visibility:"internal"}],src:"2791:35:85"},returnParameters:{id:19422,nodeType:"ParameterList",parameters:[{constant:false,id:19421,name:"",nodeType:"VariableDeclaration",scope:19454,src:"2874:7:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19420,name:"uint256",nodeType:"ElementaryTypeName",src:"2874:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"2873:9:85"},scope:19606,src:"2757:587:85",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:19489,nodeType:"Block",src:"3779:366:85",statements:[{assignments:[19462],declarations:[{constant:false,id:19462,name:"feePercent",nodeType:"VariableDeclaration",scope:19489,src:"3875:18:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19461,name:"uint256",nodeType:"ElementaryTypeName",src:"3875:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19466,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:19463,name:"rebalanceFeeCalculator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18977,src:"3896:22:85",typeDescriptions:{typeIdentifier:"t_contract$_IFeeCalculator_$4867",typeString:"contract IFeeCalculator"}},id:19464,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getFee",nodeType:"MemberAccess",referencedDeclaration:4856,src:"3896:29:85",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:19465,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3896:31:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3875:52:85"},{assignments:[19468],declarations:[{constant:false,id:19468,name:"feeQuantity",nodeType:"VariableDeclaration",scope:19489,src:"3937:19:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19467,name:"uint256",nodeType:"ElementaryTypeName",src:"3937:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19472,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:19470,name:"feePercent",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19462,src:"3990:10:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:19469,name:"calculateRebalanceFeeInflation",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19518,src:"3959:30:85",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_uint256_$returns$_t_uint256_$",typeString:"function (uint256) view returns (uint256)"}},id:19471,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3959:42:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3937:64:85"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:19475,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:19473,name:"feeQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19468,src:"4016:11:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:">",rightExpression:{argumentTypes:null,hexValue:"30",id:19474,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"4030:1:85",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"4016:15:85",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:null,id:19484,nodeType:"IfStatement",src:"4012:84:85",trueBody:{id:19483,nodeType:"Block",src:"4033:63:85",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:19479,name:"feeRecipient",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18981,src:"4059:12:85",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:19480,name:"feeQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19468,src:"4073:11:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19476,name:"ERC20",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30132,src:"4047:5:85",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ERC20_$30132_$",typeString:"type(contract ERC20)"}},id:19478,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"_mint",nodeType:"MemberAccess",referencedDeclaration:30021,src:"4047:11:85",typeDescriptions:{typeIdentifier:"t_function_internal_nonpayable$_t_address_$_t_uint256_$returns$__$",typeString:"function (address,uint256)"}},id:19481,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4047:38:85",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:19482,nodeType:"ExpressionStatement",src:"4047:38:85"}]}},{expression:{argumentTypes:null,components:[{argumentTypes:null,id:19485,name:"feePercent",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19462,src:"4114:10:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:19486,name:"feeQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19468,src:"4126:11:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],id:19487,isConstant:false,isInlineArray:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"TupleExpression",src:"4113:25:85",typeDescriptions:{typeIdentifier:"t_tuple$_t_uint256_$_t_uint256_$",typeString:"tuple(uint256,uint256)"}},functionReturnParameters:19460,id:19488,nodeType:"Return",src:"4106:32:85"}]},documentation:"Calculates the fee and mints the rebalancing SetToken quantity to the recipient.\nThe minting is done without an increase to the total collateral controlled by the\nrebalancing SetToken. In effect, the existing holders are paying the fee via inflation.\n     * @return feePercentage\n@return feeQuantity",id:19490,implemented:true,kind:"function",modifiers:[],name:"handleFees",nodeType:"FunctionDefinition",parameters:{id:19455,nodeType:"ParameterList",parameters:[],src:"3720:2:85"},returnParameters:{id:19460,nodeType:"ParameterList",parameters:[{constant:false,id:19457,name:"",nodeType:"VariableDeclaration",scope:19490,src:"3757:7:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19456,name:"uint256",nodeType:"ElementaryTypeName",src:"3757:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:19459,name:"",nodeType:"VariableDeclaration",scope:19490,src:"3766:7:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19458,name:"uint256",nodeType:"ElementaryTypeName",src:"3766:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"3756:18:85"},scope:19606,src:"3701:444:85",stateMutability:"nonpayable",superFunction:20095,visibility:"internal"},{body:{id:19517,nodeType:"Block",src:"4923:221:85",statements:[{assignments:[19498],declarations:[{constant:false,id:19498,name:"a",nodeType:"VariableDeclaration",scope:19517,src:"4962:9:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19497,name:"uint256",nodeType:"ElementaryTypeName",src:"4962:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19504,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[],expression:{argumentTypes:[],id:19501,name:"totalSupply",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:29778,src:"4999:11:85",typeDescriptions:{typeIdentifier:"t_function_internal_view$__$returns$_t_uint256_$",typeString:"function () view returns (uint256)"
}},id:19502,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4999:13:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19499,name:"_rebalanceFeePercent",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19492,src:"4974:20:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19500,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"4974:24:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19503,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4974:39:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4962:51:85"},{assignments:[19506],declarations:[{constant:false,id:19506,name:"b",nodeType:"VariableDeclaration",scope:19517,src:"5061:9:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19505,name:"uint256",nodeType:"ElementaryTypeName",src:"5061:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19511,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:19509,name:"_rebalanceFeePercent",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19492,src:"5090:20:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19507,name:"SCALE_FACTOR",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19347,src:"5073:12:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19508,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sub",nodeType:"MemberAccess",referencedDeclaration:29595,src:"5073:16:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19510,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5073:38:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"5061:50:85"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:19514,name:"b",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19506,src:"5135:1:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19512,name:"a",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19498,src:"5129:1:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19513,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"5129:5:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19515,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5129:8:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:19496,id:19516,nodeType:"Return",src:"5122:15:85"}]},documentation:"Returns the new rebalance fee. The calculation for the fee involves implying\nmint quantity so that the feeRecipient owns the fee percentage of the entire\nsupply of the Set.\n     * The formula to solve for fee is:\nfeeQuantity / feeQuantity + totalSupply = fee / scaleFactor\n     * The simplified formula utilized below is:\nfeeQuantity = fee * totalSupply / (scaleFactor - fee)\n     * @param   _rebalanceFeePercent    Fee levied to feeRecipient every rebalance, paid during settlement\n@return  uint256                 New RebalancingSet issue quantity",id:19518,implemented:true,kind:"function",modifiers:[],name:"calculateRebalanceFeeInflation",nodeType:"FunctionDefinition",parameters:{id:19493,nodeType:"ParameterList",parameters:[{constant:false,id:19492,name:"_rebalanceFeePercent",nodeType:"VariableDeclaration",scope:19518,src:"4829:28:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19491,name:"uint256",nodeType:"ElementaryTypeName",src:"4829:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"4819:44:85"},returnParameters:{id:19496,nodeType:"ParameterList",parameters:[{constant:false,id:19495,name:"",nodeType:"VariableDeclaration",scope:19518,src:"4910:7:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19494,name:"uint256",nodeType:"ElementaryTypeName",src:"4910:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"4909:9:85"},scope:19606,src:"4780:364:85",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:19538,nodeType:"Block",src:"5545:316:85",statements:[{assignments:[19526],declarations:[{constant:false,id:19526,name:"naturalUnitsOutstanding",nodeType:"VariableDeclaration",scope:19538,src:"5645:31:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19525,name:"uint256",nodeType:"ElementaryTypeName",src:"5645:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19532,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:19530,name:"naturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18993,src:"5697:11:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],id:19527,name:"totalSupply",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:29778,src:"5679:11:85",typeDescriptions:{typeIdentifier:"t_function_internal_view$__$returns$_t_uint256_$",typeString:"function () view returns (uint256)"}},id:19528,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5679:13:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19529,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"5679:17:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19531,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5679:30:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"5645:64:85"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:19535,name:"naturalUnitsOutstanding",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19526,src:"5830:23:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19533,name:"_issueQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19520,src:"5811:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19534,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"5811:18:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19536,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5811:43:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:19524,id:19537,nodeType:"Return",src:"5804:50:85"}]},documentation:"Calculates the new unitShares, defined as issueQuantity / naturalUnitsOutstanding\n     * @param  _issueQuantity   Amount of nextSets to issue\n     * @return  uint256             New unitShares for the rebalancingSetToken",id:19539,implemented:true,kind:"function",modifiers:[],name:"calculateNextSetNewUnitShares",nodeType:"FunctionDefinition",parameters:{id:19521,nodeType:"ParameterList",parameters:[{constant:false,id:19520,name:"_issueQuantity",nodeType:"VariableDeclaration",scope:19539,src:"5456:22:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19519,name:"uint256",nodeType:"ElementaryTypeName",src:"5456:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"5446:38:85"},returnParameters:{id:19524,nodeType:"ParameterList",parameters:[{constant:false,id:19523,name:"",nodeType:"VariableDeclaration",scope:19539,src:"5532:7:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19522,name:"uint256",nodeType:"ElementaryTypeName",src:"5532:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"5531:9:85"},scope:19606,src:"5408:453:85",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:19604,nodeType:"Block",src:"6277:926:85",statements:[{assignments:[19547],declarations:[{constant:false,id:19547,name:"maxIssueAmount",nodeType:"VariableDeclaration",scope:19604,src:"6287:22:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19546,name:"uint256",nodeType:"ElementaryTypeName",src:"6287:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19551,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:19548,name:"CommonMath",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:23436,src:"6312:10:85",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_CommonMath_$23436_$",typeString:"type(library CommonMath)"}},id:19549,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"maxUInt256",nodeType:"MemberAccess",referencedDeclaration:23132,src:"6312:21:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$__$returns$_t_uint256_$",typeString:"function () pure returns (uint256)"}},id:19550,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6312:23:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"6287:48:85"},{body:{id:19600,nodeType:"Block",src:"6404:761:85",statements:[{assignments:[19565],declarations:[{constant:false,id:19565,name:"componentAmount",nodeType:"VariableDeclaration",scope:19600,src:"6496:23:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19564,name:"uint256",nodeType:"ElementaryTypeName",src:"6496:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19576,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,baseExpression:{argumentTypes:null,expression:{argumentTypes:null,id:19568,name:"_setToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19541,src:"6561:9:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}},id:19569,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"components",nodeType:"MemberAccess",referencedDeclaration:6722,src:"6561:20:85",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_memory",typeString:"address[] memory"}},id:19571,indexExpression:{argumentTypes:null,id:19570,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19553,src:"6582:1:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"6561:23:85",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,arguments:[{argumentTypes:null,id:19573,name:"this",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30606,src:"6610:4:85",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSettlement_$19606",typeString:"contract RebalancingSettlement"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_RebalancingSettlement_$19606",typeString:"contract RebalancingSettlement"}],id:19572,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"6602:7:85",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:19574,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6602:13:85",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,id:19566,name:"vault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18969,src:"6522:5:85",typeDescriptions:{typeIdentifier:"t_contract$_IVault_$5782",typeString:"contract IVault"}},id:19567,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getOwnerBalance",nodeType:"MemberAccess",referencedDeclaration:5781,src:"6522:21:85",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$_t_address_$returns$_t_uint256_$",typeString:"function (address,address) view external returns (uint256)"}},id:19575,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6522:107:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"6496:133:85"},{assignments:[19578],declarations:[{constant:false,id:19578,name:"componentIssueAmount",nodeType:"VariableDeclaration",scope:19600,src:"6931:28:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19577,name:"uint256",nodeType:"ElementaryTypeName",src:"6931:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19590,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,id:19587,name:"_setToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19541,src:"7006:9:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}},id:19588,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:6719,src:"7006:21:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,baseExpression:{argumentTypes:null,expression:{argumentTypes:null,id:19581,name:"_setToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19541,src:"6982:9:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}},id:19582,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"units",nodeType:"MemberAccess",referencedDeclaration:6725,src:"6982:15:85",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},id:19584,indexExpression:{argumentTypes:null,id:19583,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19553,src:"6998:1:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"6982:18:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19579,name:"componentAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19565,src:"6962:15:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19580,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"6962:19:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19585,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6962:39:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19586,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"6962:43:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19589,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6962:66:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"6931:97:85"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:19593,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:19591,name:"componentIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19578,src:"7046:20:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<",rightExpression:{argumentTypes:null,id:19592,name:"maxIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19547,src:"7069:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"7046:37:85",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:null,id:19599,nodeType:"IfStatement",src:"7042:113:85",trueBody:{id:19598,nodeType:"Block",src:"7085:70:85",statements:[{expression:{argumentTypes:null,id:19596,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19594,name:"maxIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19547,src:"7103:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,id:19595,name:"componentIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19578,src:"7120:20:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"7103:37:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19597,nodeType:"ExpressionStatement",src:"7103:37:85"}]}}]},condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:19560,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:19556,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19553,src:"6366:1:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<",rightExpression:{argumentTypes:null,expression:{argumentTypes:null,expression:{argumentTypes:null,id:19557,name:"_setToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19541,src:"6370:9:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}},id:19558,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"components",nodeType:"MemberAccess",referencedDeclaration:6722,src:"6370:20:85",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_memory",typeString:"address[] memory"}},id:19559,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"length",nodeType:"MemberAccess",referencedDeclaration:null,src:"6370:27:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"6366:31:85",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:19601,initializationExpression:{assignments:[19553],declarations:[{constant:false,id:19553,name:"i",nodeType:"VariableDeclaration",scope:19601,src:"6351:9:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19552,name:"uint256",nodeType:"ElementaryTypeName",src:"6351:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19555,initialValue:{argumentTypes:null,hexValue:"30",id:19554,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"6363:1:85",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},nodeType:"VariableDeclarationStatement",src:"6351:13:85"},loopExpression:{expression:{argumentTypes:null,id:19562,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"UnaryOperation",operator:"++",prefix:false,src:"6399:3:85",subExpression:{argumentTypes:null,id:19561,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19553,src:"6399:1:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19563,nodeType:"ExpressionStatement",src:"6399:3:85"},nodeType:"ForStatement",src:"6346:819:85"},{expression:{argumentTypes:null,id:19602,name:"maxIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19547,src:"7182:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:19545,id:19603,nodeType:"Return",src:"7175:21:85"}]},documentation:"Get the maximum possible issue amount of nextSet based on number of components owned by rebalancing\nset token.\n     * @param  _setToken    Struct of Set Token details",id:19605,implemented:true,kind:"function",modifiers:[],name:"calculateMaxIssueAmount",nodeType:"FunctionDefinition",parameters:{id:19542,nodeType:"ParameterList",parameters:[{constant:false,id:19541,name:"_setToken",nodeType:"VariableDeclaration",scope:19605,src:"6168:43:85",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails"},typeName:{contractScope:null,id:19540,name:"SetTokenLibrary.SetDetails",nodeType:"UserDefinedTypeName",referencedDeclaration:6726,src:"6168:26:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_storage_ptr",typeString:"struct SetTokenLibrary.SetDetails"}},value:null,visibility:"internal"}],src:"6158:59:85"},returnParameters:{id:19545,nodeType:"ParameterList",parameters:[{constant:false,id:19544,name:"",nodeType:"VariableDeclaration",scope:19605,src:"6264:7:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19543,name:"uint256",nodeType:"ElementaryTypeName",src:"6264:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"6263:9:85"},scope:19606,src:"6126:1077:85",stateMutability:"view",superFunction:null,visibility:"private"}],scope:19607,src:"1327:5878:85"}],src:"597:6609:85"},legacyAST:{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/tokens/rebalancing-v2/RebalancingSettlement.sol",exportedSymbols:{RebalancingSettlement:[19606]},id:19607,nodeType:"SourceUnit",nodes:[{id:19316,literals:["solidity","0.5",".7"],nodeType:"PragmaDirective",src:"597:22:85"},{id:19317,literals:["experimental","ABIEncoderV2"],nodeType:"PragmaDirective",src:"620:35:85"},{absolutePath:"openzeppelin-solidity/contracts/math/Math.sol",file:"openzeppelin-solidity/contracts/math/Math.sol",id:19319,nodeType:"ImportDirective",scope:19607,sourceUnit:29513,src:"657:69:85",symbolAliases:[{foreign:19318,local:null}],unitAlias:""},{absolutePath:"openzeppelin-solidity/contracts/math/SafeMath.sol",file:"openzeppelin-solidity/contracts/math/SafeMath.sol",id:19321,nodeType:"ImportDirective",scope:19607,sourceUnit:29641,src:"727:77:85",symbolAliases:[{foreign:19320,local:null}],unitAlias:""},{absolutePath:"openzeppelin-solidity/contracts/token/ERC20/ERC20.sol",file:"openzeppelin-solidity/contracts/token/ERC20/ERC20.sol",id:19323,nodeType:"ImportDirective",scope:19607,sourceUnit:30133,src:"805:78:85",symbolAliases:[{foreign:19322,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/lib/CommonMath.sol",file:"../../../lib/CommonMath.sol",id:19325,nodeType:"ImportDirective",scope:19607,sourceUnit:23437,src:"885:57:85",symbolAliases:[{foreign:19324,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/ISetToken.sol",file:"../../interfaces/ISetToken.sol",id:19327,nodeType:"ImportDirective",scope:19607,sourceUnit:5660,src:"943:59:85",symbolAliases:[{foreign:19326,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/interfaces/IVault.sol",file:"../../interfaces/IVault.sol",id:19329,nodeType:"ImportDirective",scope:19607,sourceUnit:5783,src:"1003:53:85",symbolAliases:[{foreign:19328,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/RebalancingLibrary.sol",file:"../../lib/RebalancingLibrary.sol",id:19331,nodeType:"ImportDirective",scope:19607,sourceUnit:6658,src:"1057:70:85",symbolAliases:[{foreign:19330,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/tokens/rebalancing-v2/RebalancingSetState.sol",file:"./RebalancingSetState.sol",id:19333,nodeType:"ImportDirective",scope:19607,sourceUnit:19315,src:"1128:64:85",symbolAliases:[{foreign:19332,local:null}],unitAlias:""},{absolutePath:"/Users/justin_chen/Dropbox/workspace/set-protocol-contracts/contracts/core/lib/SetTokenLibrary.sol",file:"../../lib/SetTokenLibrary.sol",id:19335,nodeType:"ImportDirective",scope:19607,sourceUnit:6842,src:"1193:64:85",symbolAliases:[{foreign:19334,local:null}],unitAlias:""},{baseContracts:[{arguments:null,baseName:{contractScope:null,id:19336,name:"ERC20",nodeType:"UserDefinedTypeName",referencedDeclaration:30132,src:"1365:5:85",typeDescriptions:{typeIdentifier:"t_contract$_ERC20_$30132",typeString:"contract ERC20"}},id:19337,nodeType:"InheritanceSpecifier",src:"1365:5:85"},{arguments:null,baseName:{contractScope:null,id:19338,name:"RebalancingSetState",nodeType:"UserDefinedTypeName",referencedDeclaration:19314,src:"1376:19:85",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSetState_$19314",typeString:"contract RebalancingSetState"}},id:19339,nodeType:"InheritanceSpecifier",src:"1376:19:85"}],contractDependencies:[19314,30132,30259],contractKind:"contract",documentation:"@title RebalancingSettlement\n@author Set Protocol\n ",fullyImplemented:true,id:19606,linearizedBaseContracts:[19606,19314,30132,30259],name:"RebalancingSettlement",nodeType:"ContractDefinition",nodes:[{id:19342,libraryName:{contractScope:null,id:19340,name:"SafeMath",nodeType:"UserDefinedTypeName",referencedDeclaration:29640,src:"1408:8:85",typeDescriptions:{typeIdentifier:"t_contract$_SafeMath_$29640",typeString:"library SafeMath"}},nodeType:"UsingForDirective",src:"1402:27:85",typeName:{id:19341,name:"uint256",nodeType:"ElementaryTypeName",src:"1421:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}},{constant:true,id:19347,name:"SCALE_FACTOR",nodeType:"VariableDeclaration",scope:19606,src:"1435:47:85",stateVariable:true,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19343,name:"uint256",nodeType:"ElementaryTypeName",src:"1435:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:{argumentTypes:null,commonType:{typeIdentifier:"t_rational_1000000000000000000_by_1",typeString:"int_const 1000000000000000000"},id:19346,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,leftExpression:{argumentTypes:null,hexValue:"3130",id:19344,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"1474:2:85",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_10_by_1",typeString:"int_const 10"},value:"10"},nodeType:"BinaryOperation",operator:"**",rightExpression:{argumentTypes:null,hexValue:"3138",id:19345,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"1480:2:85",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_18_by_1",typeString:"int_const 18"},value:"18"},src:"1474:8:85",typeDescriptions:{typeIdentifier:"t_rational_1000000000000000000_by_1",typeString:"int_const 1000000000000000000"}},visibility:"public"},{body:{id:19356,nodeType:"Block",src:"1692:77:85",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,expression:{argumentTypes:null,id:19351,name:"RebalancingLibrary",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6657,src:"1727:18:85",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_RebalancingLibrary_$6657_$",typeString:"type(library RebalancingLibrary)"}},id:19352,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"State",nodeType:"MemberAccess",referencedDeclaration:6633,src:"1727:24:85",typeDescriptions:{typeIdentifier:"t_type$_t_enum$_State_$6633_$",typeString:"type(enum RebalancingLibrary.State)"}},id:19353,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,memberName:"Rebalance",nodeType:"MemberAccess",referencedDeclaration:null,src:"1727:34:85",typeDescriptions:{typeIdentifier:"t_enum$_State_$6633",typeString:"enum RebalancingLibrary.State"}}],expression:{argumentTypes:[{typeIdentifier:"t_enum$_State_$6633",typeString:"enum RebalancingLibrary.State"}],id:19350,name:"validateRebalanceStateIs",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19300,src:"1702:24:85",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_enum$_State_$6633_$returns$__$",typeString:"function (enum RebalancingLibrary.State) view"
}},id:19354,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"1702:60:85",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:19355,nodeType:"ExpressionStatement",src:"1702:60:85"}]},documentation:null,id:19357,implemented:true,kind:"function",modifiers:[],name:"validateRebalancingSettlement",nodeType:"FunctionDefinition",parameters:{id:19348,nodeType:"ParameterList",parameters:[],src:"1655:2:85"},returnParameters:{id:19349,nodeType:"ParameterList",parameters:[],src:"1692:0:85"},scope:19606,src:"1617:152:85",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:19371,nodeType:"Block",src:"2021:102:85",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:19366,name:"nextSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19001,src:"2070:7:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}],id:19365,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"2062:7:85",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:19367,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2062:16:85",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:19368,name:"_issueQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19359,src:"2092:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19362,name:"core",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18965,src:"2031:4:85",typeDescriptions:{typeIdentifier:"t_contract$_ICore_$4746",typeString:"contract ICore"}},id:19364,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"issueInVault",nodeType:"MemberAccess",referencedDeclaration:4520,src:"2031:17:85",typeDescriptions:{typeIdentifier:"t_function_external_nonpayable$_t_address_$_t_uint256_$returns$__$",typeString:"function (address,uint256) external"}},id:19369,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2031:85:85",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:19370,nodeType:"ExpressionStatement",src:"2031:85:85"}]},documentation:null,id:19372,implemented:true,kind:"function",modifiers:[],name:"issueNextSet",nodeType:"FunctionDefinition",parameters:{id:19360,nodeType:"ParameterList",parameters:[{constant:false,id:19359,name:"_issueQuantity",nodeType:"VariableDeclaration",scope:19372,src:"1971:22:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19358,name:"uint256",nodeType:"ElementaryTypeName",src:"1971:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"1961:38:85"},returnParameters:{id:19361,nodeType:"ParameterList",parameters:[],src:"2021:0:85"},scope:19606,src:"1940:183:85",stateMutability:"nonpayable",superFunction:null,visibility:"internal"},{body:{id:19415,nodeType:"Block",src:"2338:300:85",statements:[{expression:{argumentTypes:null,id:19381,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19377,name:"rebalanceState",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18995,src:"2348:14:85",typeDescriptions:{typeIdentifier:"t_enum$_State_$6633",typeString:"enum RebalancingLibrary.State"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,expression:{argumentTypes:null,expression:{argumentTypes:null,id:19378,name:"RebalancingLibrary",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6657,src:"2365:18:85",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_RebalancingLibrary_$6657_$",typeString:"type(library RebalancingLibrary)"}},id:19379,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"State",nodeType:"MemberAccess",referencedDeclaration:6633,src:"2365:24:85",typeDescriptions:{typeIdentifier:"t_type$_t_enum$_State_$6633_$",typeString:"type(enum RebalancingLibrary.State)"}},id:19380,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,memberName:"Default",nodeType:"MemberAccess",referencedDeclaration:null,src:"2365:32:85",typeDescriptions:{typeIdentifier:"t_enum$_State_$6633",typeString:"enum RebalancingLibrary.State"}},src:"2348:49:85",typeDescriptions:{typeIdentifier:"t_enum$_State_$6633",typeString:"enum RebalancingLibrary.State"}},id:19382,nodeType:"ExpressionStatement",src:"2348:49:85"},{expression:{argumentTypes:null,id:19386,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19383,name:"lastRebalanceTimestamp",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18999,src:"2407:22:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,expression:{argumentTypes:null,id:19384,name:"block",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30366,src:"2432:5:85",typeDescriptions:{typeIdentifier:"t_magic_block",typeString:"block"}},id:19385,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"timestamp",nodeType:"MemberAccess",referencedDeclaration:null,src:"2432:15:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2407:40:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19387,nodeType:"ExpressionStatement",src:"2407:40:85"},{expression:{argumentTypes:null,id:19390,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19388,name:"currentSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18989,src:"2457:10:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,id:19389,name:"nextSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19001,src:"2470:7:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},src:"2457:20:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:19391,nodeType:"ExpressionStatement",src:"2457:20:85"},{expression:{argumentTypes:null,id:19394,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19392,name:"unitShares",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18991,src:"2487:10:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,id:19393,name:"_newUnitShares",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19374,src:"2500:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2487:27:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19395,nodeType:"ExpressionStatement",src:"2487:27:85"},{expression:{argumentTypes:null,id:19401,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19396,name:"rebalanceIndex",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18997,src:"2524:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,hexValue:"31",id:19399,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"2560:1:85",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_1_by_1",typeString:"int_const 1"},value:"1"}],expression:{argumentTypes:[{typeIdentifier:"t_rational_1_by_1",typeString:"int_const 1"}],expression:{argumentTypes:null,id:19397,name:"rebalanceIndex",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18997,src:"2541:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19398,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"add",nodeType:"MemberAccess",referencedDeclaration:29619,src:"2541:18:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19400,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2541:21:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"2524:38:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19402,nodeType:"ExpressionStatement",src:"2524:38:85"},{expression:{argumentTypes:null,id:19409,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19403,name:"nextSet",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19001,src:"2573:7:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,hexValue:"30",id:19406,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"2601:1:85",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"}],expression:{argumentTypes:[{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"}],id:19405,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"2593:7:85",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:19407,isConstant:false,isLValue:false,isPure:true,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2593:10:85",typeDescriptions:{typeIdentifier:"t_address_payable",typeString:"address payable"}}],expression:{argumentTypes:[{typeIdentifier:"t_address_payable",typeString:"address payable"}],id:19404,name:"ISetToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:5659,src:"2583:9:85",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ISetToken_$5659_$",typeString:"type(contract ISetToken)"}},id:19408,isConstant:false,isLValue:false,isPure:true,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"2583:21:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},src:"2573:31:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},id:19410,nodeType:"ExpressionStatement",src:"2573:31:85"},{expression:{argumentTypes:null,id:19413,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19411,name:"hasBidded",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19005,src:"2614:9:85",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,hexValue:"66616c7365",id:19412,isConstant:false,isLValue:false,isPure:true,kind:"bool",lValueRequested:false,nodeType:"Literal",src:"2626:5:85",subdenomination:null,typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"},value:"false"},src:"2614:17:85",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:19414,nodeType:"ExpressionStatement",src:"2614:17:85"}]},documentation:null,id:19416,implemented:true,kind:"function",modifiers:[],name:"transitionToDefault",nodeType:"FunctionDefinition",parameters:{id:19375,nodeType:"ParameterList",parameters:[{constant:false,id:19374,name:"_newUnitShares",nodeType:"VariableDeclaration",scope:19416,src:"2288:22:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19373,name:"uint256",nodeType:"ElementaryTypeName",src:"2288:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"2278:38:85"},returnParameters:{id:19376,nodeType:"ParameterList",parameters:[],src:"2338:0:85"},scope:19606,src:"2250:388:85",stateMutability:"nonpayable",superFunction:null,visibility:"internal"},{body:{id:19453,nodeType:"Block",src:"2887:457:85",statements:[{assignments:[19426],declarations:[{constant:false,id:19426,name:"setToken",nodeType:"VariableDeclaration",scope:19453,src:"2955:42:85",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails"},typeName:{contractScope:null,id:19425,name:"SetTokenLibrary.SetDetails",nodeType:"UserDefinedTypeName",referencedDeclaration:6726,src:"2955:26:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_storage_ptr",typeString:"struct SetTokenLibrary.SetDetails"}},value:null,visibility:"internal"}],id:19433,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,id:19430,name:"_setToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19418,src:"3038:9:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}],id:19429,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"3030:7:85",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:19431,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3030:18:85",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,id:19427,name:"SetTokenLibrary",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:6841,src:"3000:15:85",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_SetTokenLibrary_$6841_$",typeString:"type(library SetTokenLibrary)"}},id:19428,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getSetDetails",nodeType:"MemberAccess",referencedDeclaration:6840,src:"3000:29:85",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_address_$returns$_t_struct$_SetDetails_$6726_memory_ptr_$",typeString:"function (address) view returns (struct SetTokenLibrary.SetDetails memory)"}},id:19432,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3000:49:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}},nodeType:"VariableDeclarationStatement",src:"2955:94:85"},{assignments:[19435],declarations:[{constant:false,id:19435,name:"maxIssueAmount",nodeType:"VariableDeclaration",scope:19453,src:"3059:22:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19434,name:"uint256",nodeType:"ElementaryTypeName",src:"3059:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19439,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:19437,name:"setToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19426,src:"3108:8:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}}],expression:{argumentTypes:[{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}],id:19436,name:"calculateMaxIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19605,src:"3084:23:85",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_struct$_SetDetails_$6726_memory_ptr_$returns$_t_uint256_$",typeString:"function (struct SetTokenLibrary.SetDetails memory) view returns (uint256)"}},id:19438,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3084:33:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3059:58:85"},{assignments:[19441],declarations:[{constant:false,id:19441,name:"issueAmount",nodeType:"VariableDeclaration",scope:19453,src:"3226:19:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19440,name:"uint256",nodeType:"ElementaryTypeName",src:"3226:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19450,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,id:19446,name:"setToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19426,src:"3286:8:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}},id:19447,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:6719,src:"3286:20:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19444,name:"maxIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19435,src:"3267:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19445,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mod",nodeType:"MemberAccess",referencedDeclaration:29639,src:"3267:18:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19448,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3267:40:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19442,name:"maxIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19435,src:"3248:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19443,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"sub",nodeType:"MemberAccess",referencedDeclaration:29595,src:"3248:18:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19449,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3248:60:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3226:82:85"},{expression:{argumentTypes:null,id:19451,name:"issueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19441,src:"3326:11:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:19422,id:19452,nodeType:"Return",src:"3319:18:85"}]},documentation:"Calculate the amount of Sets to issue by using the component amounts in the\nvault.",id:19454,implemented:true,kind:"function",modifiers:[],name:"calculateSetIssueQuantity",nodeType:"FunctionDefinition",parameters:{id:19419,nodeType:"ParameterList",parameters:[{constant:false,id:19418,name:"_setToken",nodeType:"VariableDeclaration",scope:19454,src:"2801:19:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"},typeName:{contractScope:null,id:19417,name:"ISetToken",nodeType:"UserDefinedTypeName",referencedDeclaration:5659,src:"2801:9:85",typeDescriptions:{typeIdentifier:"t_contract$_ISetToken_$5659",typeString:"contract ISetToken"}},value:null,visibility:"internal"}],src:"2791:35:85"},returnParameters:{id:19422,nodeType:"ParameterList",parameters:[{constant:false,id:19421,name:"",nodeType:"VariableDeclaration",scope:19454,src:"2874:7:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19420,name:"uint256",nodeType:"ElementaryTypeName",src:"2874:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"2873:9:85"},scope:19606,src:"2757:587:85",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:19489,nodeType:"Block",src:"3779:366:85",statements:[{assignments:[19462],declarations:[{constant:false,id:19462,name:"feePercent",nodeType:"VariableDeclaration",scope:19489,src:"3875:18:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19461,name:"uint256",nodeType:"ElementaryTypeName",src:"3875:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19466,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:19463,name:"rebalanceFeeCalculator",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18977,src:"3896:22:85",typeDescriptions:{typeIdentifier:"t_contract$_IFeeCalculator_$4867",typeString:"contract IFeeCalculator"}},id:19464,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getFee",nodeType:"MemberAccess",referencedDeclaration:4856,src:"3896:29:85",typeDescriptions:{typeIdentifier:"t_function_external_view$__$returns$_t_uint256_$",typeString:"function () view external returns (uint256)"}},id:19465,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3896:31:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3875:52:85"},{assignments:[19468],declarations:[{constant:false,id:19468,name:"feeQuantity",nodeType:"VariableDeclaration",scope:19489,src:"3937:19:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19467,name:"uint256",nodeType:"ElementaryTypeName",src:"3937:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19472,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:19470,name:"feePercent",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19462,src:"3990:10:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],id:19469,name:"calculateRebalanceFeeInflation",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19518,src:"3959:30:85",typeDescriptions:{typeIdentifier:"t_function_internal_view$_t_uint256_$returns$_t_uint256_$",typeString:"function (uint256) view returns (uint256)"}},id:19471,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"3959:42:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"3937:64:85"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:19475,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:19473,name:"feeQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19468,src:"4016:11:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:">",rightExpression:{argumentTypes:null,hexValue:"30",id:19474,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"4030:1:85",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},src:"4016:15:85",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:null,id:19484,nodeType:"IfStatement",src:"4012:84:85",trueBody:{id:19483,nodeType:"Block",src:"4033:63:85",statements:[{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:19479,name:"feeRecipient",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18981,src:"4059:12:85",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,id:19480,name:"feeQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19468,src:"4073:11:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19476,name:"ERC20",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30132,src:"4047:5:85",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_ERC20_$30132_$",typeString:"type(contract ERC20)"}},id:19478,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"_mint",nodeType:"MemberAccess",referencedDeclaration:30021,src:"4047:11:85",typeDescriptions:{typeIdentifier:"t_function_internal_nonpayable$_t_address_$_t_uint256_$returns$__$",typeString:"function (address,uint256)"}},id:19481,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4047:38:85",typeDescriptions:{typeIdentifier:"t_tuple$__$",typeString:"tuple()"}},id:19482,nodeType:"ExpressionStatement",src:"4047:38:85"}]}},{expression:{argumentTypes:null,components:[{argumentTypes:null,id:19485,name:"feePercent",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19462,src:"4114:10:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},{argumentTypes:null,id:19486,name:"feeQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19468,src:"4126:11:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],id:19487,isConstant:false,isInlineArray:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"TupleExpression",src:"4113:25:85",typeDescriptions:{typeIdentifier:"t_tuple$_t_uint256_$_t_uint256_$",typeString:"tuple(uint256,uint256)"}},functionReturnParameters:19460,id:19488,nodeType:"Return",src:"4106:32:85"}]},documentation:"Calculates the fee and mints the rebalancing SetToken quantity to the recipient.\nThe minting is done without an increase to the total collateral controlled by the\nrebalancing SetToken. In effect, the existing holders are paying the fee via inflation.\n     * @return feePercentage\n@return feeQuantity",id:19490,implemented:true,kind:"function",modifiers:[],name:"handleFees",nodeType:"FunctionDefinition",parameters:{id:19455,nodeType:"ParameterList",parameters:[],src:"3720:2:85"},returnParameters:{id:19460,nodeType:"ParameterList",parameters:[{constant:false,id:19457,name:"",nodeType:"VariableDeclaration",scope:19490,src:"3757:7:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19456,name:"uint256",nodeType:"ElementaryTypeName",src:"3757:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"},{constant:false,id:19459,name:"",nodeType:"VariableDeclaration",scope:19490,src:"3766:7:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19458,name:"uint256",nodeType:"ElementaryTypeName",src:"3766:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"3756:18:85"},scope:19606,src:"3701:444:85",stateMutability:"nonpayable",superFunction:20095,visibility:"internal"},{body:{id:19517,nodeType:"Block",src:"4923:221:85",statements:[{assignments:[19498],declarations:[{constant:false,id:19498,name:"a",nodeType:"VariableDeclaration",scope:19517,src:"4962:9:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19497,name:"uint256",nodeType:"ElementaryTypeName",src:"4962:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19504,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,arguments:[],expression:{argumentTypes:[],id:19501,name:"totalSupply",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:29778,src:"4999:11:85",typeDescriptions:{typeIdentifier:"t_function_internal_view$__$returns$_t_uint256_$",typeString:"function () view returns (uint256)"}},id:19502,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4999:13:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19499,name:"_rebalanceFeePercent",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19492,src:"4974:20:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19500,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"4974:24:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19503,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"4974:39:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"4962:51:85"},{assignments:[19506],declarations:[{constant:false,id:19506,name:"b",nodeType:"VariableDeclaration",scope:19517,src:"5061:9:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19505,name:"uint256",nodeType:"ElementaryTypeName",src:"5061:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19511,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:19509,name:"_rebalanceFeePercent",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19492,src:"5090:20:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19507,name:"SCALE_FACTOR",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19347,src:"5073:12:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19508,isConstant:false,isLValue:false,isPure:false,
lValueRequested:false,memberName:"sub",nodeType:"MemberAccess",referencedDeclaration:29595,src:"5073:16:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19510,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5073:38:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"5061:50:85"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:19514,name:"b",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19506,src:"5135:1:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19512,name:"a",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19498,src:"5129:1:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19513,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"5129:5:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19515,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5129:8:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:19496,id:19516,nodeType:"Return",src:"5122:15:85"}]},documentation:"Returns the new rebalance fee. The calculation for the fee involves implying\nmint quantity so that the feeRecipient owns the fee percentage of the entire\nsupply of the Set.\n     * The formula to solve for fee is:\nfeeQuantity / feeQuantity + totalSupply = fee / scaleFactor\n     * The simplified formula utilized below is:\nfeeQuantity = fee * totalSupply / (scaleFactor - fee)\n     * @param   _rebalanceFeePercent    Fee levied to feeRecipient every rebalance, paid during settlement\n@return  uint256                 New RebalancingSet issue quantity",id:19518,implemented:true,kind:"function",modifiers:[],name:"calculateRebalanceFeeInflation",nodeType:"FunctionDefinition",parameters:{id:19493,nodeType:"ParameterList",parameters:[{constant:false,id:19492,name:"_rebalanceFeePercent",nodeType:"VariableDeclaration",scope:19518,src:"4829:28:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19491,name:"uint256",nodeType:"ElementaryTypeName",src:"4829:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"4819:44:85"},returnParameters:{id:19496,nodeType:"ParameterList",parameters:[{constant:false,id:19495,name:"",nodeType:"VariableDeclaration",scope:19518,src:"4910:7:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19494,name:"uint256",nodeType:"ElementaryTypeName",src:"4910:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"4909:9:85"},scope:19606,src:"4780:364:85",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:19538,nodeType:"Block",src:"5545:316:85",statements:[{assignments:[19526],declarations:[{constant:false,id:19526,name:"naturalUnitsOutstanding",nodeType:"VariableDeclaration",scope:19538,src:"5645:31:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19525,name:"uint256",nodeType:"ElementaryTypeName",src:"5645:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19532,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,id:19530,name:"naturalUnit",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18993,src:"5697:11:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],id:19527,name:"totalSupply",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:29778,src:"5679:11:85",typeDescriptions:{typeIdentifier:"t_function_internal_view$__$returns$_t_uint256_$",typeString:"function () view returns (uint256)"}},id:19528,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5679:13:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19529,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"5679:17:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19531,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5679:30:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"5645:64:85"},{expression:{argumentTypes:null,arguments:[{argumentTypes:null,id:19535,name:"naturalUnitsOutstanding",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19526,src:"5830:23:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19533,name:"_issueQuantity",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19520,src:"5811:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19534,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"5811:18:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19536,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"5811:43:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:19524,id:19537,nodeType:"Return",src:"5804:50:85"}]},documentation:"Calculates the new unitShares, defined as issueQuantity / naturalUnitsOutstanding\n     * @param  _issueQuantity   Amount of nextSets to issue\n     * @return  uint256             New unitShares for the rebalancingSetToken",id:19539,implemented:true,kind:"function",modifiers:[],name:"calculateNextSetNewUnitShares",nodeType:"FunctionDefinition",parameters:{id:19521,nodeType:"ParameterList",parameters:[{constant:false,id:19520,name:"_issueQuantity",nodeType:"VariableDeclaration",scope:19539,src:"5456:22:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19519,name:"uint256",nodeType:"ElementaryTypeName",src:"5456:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"5446:38:85"},returnParameters:{id:19524,nodeType:"ParameterList",parameters:[{constant:false,id:19523,name:"",nodeType:"VariableDeclaration",scope:19539,src:"5532:7:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19522,name:"uint256",nodeType:"ElementaryTypeName",src:"5532:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"5531:9:85"},scope:19606,src:"5408:453:85",stateMutability:"view",superFunction:null,visibility:"internal"},{body:{id:19604,nodeType:"Block",src:"6277:926:85",statements:[{assignments:[19547],declarations:[{constant:false,id:19547,name:"maxIssueAmount",nodeType:"VariableDeclaration",scope:19604,src:"6287:22:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19546,name:"uint256",nodeType:"ElementaryTypeName",src:"6287:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19551,initialValue:{argumentTypes:null,arguments:[],expression:{argumentTypes:[],expression:{argumentTypes:null,id:19548,name:"CommonMath",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:23436,src:"6312:10:85",typeDescriptions:{typeIdentifier:"t_type$_t_contract$_CommonMath_$23436_$",typeString:"type(library CommonMath)"}},id:19549,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"maxUInt256",nodeType:"MemberAccess",referencedDeclaration:23132,src:"6312:21:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$__$returns$_t_uint256_$",typeString:"function () pure returns (uint256)"}},id:19550,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6312:23:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"6287:48:85"},{body:{id:19600,nodeType:"Block",src:"6404:761:85",statements:[{assignments:[19565],declarations:[{constant:false,id:19565,name:"componentAmount",nodeType:"VariableDeclaration",scope:19600,src:"6496:23:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19564,name:"uint256",nodeType:"ElementaryTypeName",src:"6496:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19576,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,baseExpression:{argumentTypes:null,expression:{argumentTypes:null,id:19568,name:"_setToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19541,src:"6561:9:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}},id:19569,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"components",nodeType:"MemberAccess",referencedDeclaration:6722,src:"6561:20:85",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_memory",typeString:"address[] memory"}},id:19571,indexExpression:{argumentTypes:null,id:19570,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19553,src:"6582:1:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"6561:23:85",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}},{argumentTypes:null,arguments:[{argumentTypes:null,id:19573,name:"this",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:30606,src:"6610:4:85",typeDescriptions:{typeIdentifier:"t_contract$_RebalancingSettlement_$19606",typeString:"contract RebalancingSettlement"}}],expression:{argumentTypes:[{typeIdentifier:"t_contract$_RebalancingSettlement_$19606",typeString:"contract RebalancingSettlement"}],id:19572,isConstant:false,isLValue:false,isPure:true,lValueRequested:false,nodeType:"ElementaryTypeNameExpression",src:"6602:7:85",typeDescriptions:{typeIdentifier:"t_type$_t_address_$",typeString:"type(address)"},typeName:"address"},id:19574,isConstant:false,isLValue:false,isPure:false,kind:"typeConversion",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6602:13:85",typeDescriptions:{typeIdentifier:"t_address",typeString:"address"}}],expression:{argumentTypes:[{typeIdentifier:"t_address",typeString:"address"},{typeIdentifier:"t_address",typeString:"address"}],expression:{argumentTypes:null,id:19566,name:"vault",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:18969,src:"6522:5:85",typeDescriptions:{typeIdentifier:"t_contract$_IVault_$5782",typeString:"contract IVault"}},id:19567,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"getOwnerBalance",nodeType:"MemberAccess",referencedDeclaration:5781,src:"6522:21:85",typeDescriptions:{typeIdentifier:"t_function_external_view$_t_address_$_t_address_$returns$_t_uint256_$",typeString:"function (address,address) view external returns (uint256)"}},id:19575,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6522:107:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"6496:133:85"},{assignments:[19578],declarations:[{constant:false,id:19578,name:"componentIssueAmount",nodeType:"VariableDeclaration",scope:19600,src:"6931:28:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19577,name:"uint256",nodeType:"ElementaryTypeName",src:"6931:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19590,initialValue:{argumentTypes:null,arguments:[{argumentTypes:null,expression:{argumentTypes:null,id:19587,name:"_setToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19541,src:"7006:9:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}},id:19588,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"naturalUnit",nodeType:"MemberAccess",referencedDeclaration:6719,src:"7006:21:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,arguments:[{argumentTypes:null,baseExpression:{argumentTypes:null,expression:{argumentTypes:null,id:19581,name:"_setToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19541,src:"6982:9:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}},id:19582,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"units",nodeType:"MemberAccess",referencedDeclaration:6725,src:"6982:15:85",typeDescriptions:{typeIdentifier:"t_array$_t_uint256_$dyn_memory",typeString:"uint256[] memory"}},id:19584,indexExpression:{argumentTypes:null,id:19583,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19553,src:"6998:1:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},isConstant:false,isLValue:true,isPure:false,lValueRequested:false,nodeType:"IndexAccess",src:"6982:18:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}}],expression:{argumentTypes:[{typeIdentifier:"t_uint256",typeString:"uint256"}],expression:{argumentTypes:null,id:19579,name:"componentAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19565,src:"6962:15:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19580,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"div",nodeType:"MemberAccess",referencedDeclaration:29571,src:"6962:19:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19585,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6962:39:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19586,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"mul",nodeType:"MemberAccess",referencedDeclaration:29547,src:"6962:43:85",typeDescriptions:{typeIdentifier:"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$",typeString:"function (uint256,uint256) pure returns (uint256)"}},id:19589,isConstant:false,isLValue:false,isPure:false,kind:"functionCall",lValueRequested:false,names:[],nodeType:"FunctionCall",src:"6962:66:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"VariableDeclarationStatement",src:"6931:97:85"},{condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:19593,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:19591,name:"componentIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19578,src:"7046:20:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<",rightExpression:{argumentTypes:null,id:19592,name:"maxIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19547,src:"7069:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"7046:37:85",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},falseBody:null,id:19599,nodeType:"IfStatement",src:"7042:113:85",trueBody:{id:19598,nodeType:"Block",src:"7085:70:85",statements:[{expression:{argumentTypes:null,id:19596,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftHandSide:{argumentTypes:null,id:19594,name:"maxIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19547,src:"7103:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"Assignment",operator:"=",rightHandSide:{argumentTypes:null,id:19595,name:"componentIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19578,src:"7120:20:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"7103:37:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19597,nodeType:"ExpressionStatement",src:"7103:37:85"}]}}]},condition:{argumentTypes:null,commonType:{typeIdentifier:"t_uint256",typeString:"uint256"},id:19560,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,leftExpression:{argumentTypes:null,id:19556,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19553,src:"6366:1:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},nodeType:"BinaryOperation",operator:"<",rightExpression:{argumentTypes:null,expression:{argumentTypes:null,expression:{argumentTypes:null,id:19557,name:"_setToken",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19541,src:"6370:9:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails memory"}},id:19558,isConstant:false,isLValue:true,isPure:false,lValueRequested:false,memberName:"components",nodeType:"MemberAccess",referencedDeclaration:6722,src:"6370:20:85",typeDescriptions:{typeIdentifier:"t_array$_t_address_$dyn_memory",typeString:"address[] memory"}},id:19559,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,memberName:"length",nodeType:"MemberAccess",referencedDeclaration:null,src:"6370:27:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},src:"6366:31:85",typeDescriptions:{typeIdentifier:"t_bool",typeString:"bool"}},id:19601,initializationExpression:{assignments:[19553],declarations:[{constant:false,id:19553,name:"i",nodeType:"VariableDeclaration",scope:19601,src:"6351:9:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19552,name:"uint256",nodeType:"ElementaryTypeName",src:"6351:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],id:19555,initialValue:{argumentTypes:null,hexValue:"30",id:19554,isConstant:false,isLValue:false,isPure:true,kind:"number",lValueRequested:false,nodeType:"Literal",src:"6363:1:85",subdenomination:null,typeDescriptions:{typeIdentifier:"t_rational_0_by_1",typeString:"int_const 0"},value:"0"},nodeType:"VariableDeclarationStatement",src:"6351:13:85"},loopExpression:{expression:{argumentTypes:null,id:19562,isConstant:false,isLValue:false,isPure:false,lValueRequested:false,nodeType:"UnaryOperation",operator:"++",prefix:false,src:"6399:3:85",subExpression:{argumentTypes:null,id:19561,name:"i",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19553,src:"6399:1:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},id:19563,nodeType:"ExpressionStatement",src:"6399:3:85"},nodeType:"ForStatement",src:"6346:819:85"},{expression:{argumentTypes:null,id:19602,name:"maxIssueAmount",nodeType:"Identifier",overloadedDeclarations:[],referencedDeclaration:19547,src:"7182:14:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},functionReturnParameters:19545,id:19603,nodeType:"Return",src:"7175:21:85"}]},documentation:"Get the maximum possible issue amount of nextSet based on number of components owned by rebalancing\nset token.\n     * @param  _setToken    Struct of Set Token details",id:19605,implemented:true,kind:"function",modifiers:[],name:"calculateMaxIssueAmount",nodeType:"FunctionDefinition",parameters:{id:19542,nodeType:"ParameterList",parameters:[{constant:false,id:19541,name:"_setToken",nodeType:"VariableDeclaration",scope:19605,src:"6168:43:85",stateVariable:false,storageLocation:"memory",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_memory_ptr",typeString:"struct SetTokenLibrary.SetDetails"},typeName:{contractScope:null,id:19540,name:"SetTokenLibrary.SetDetails",nodeType:"UserDefinedTypeName",referencedDeclaration:6726,src:"6168:26:85",typeDescriptions:{typeIdentifier:"t_struct$_SetDetails_$6726_storage_ptr",typeString:"struct SetTokenLibrary.SetDetails"}},value:null,visibility:"internal"}],src:"6158:59:85"},returnParameters:{id:19545,nodeType:"ParameterList",parameters:[{constant:false,id:19544,name:"",nodeType:"VariableDeclaration",scope:19605,src:"6264:7:85",stateVariable:false,storageLocation:"default",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"},typeName:{id:19543,name:"uint256",nodeType:"ElementaryTypeName",src:"6264:7:85",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},value:null,visibility:"internal"}],src:"6263:9:85"},scope:19606,src:"6126:1077:85",stateMutability:"view",superFunction:null,visibility:"private"}],scope:19607,src:"1327:5878:85"}],src:"597:6609:85"},compiler:{name:"solc",version:"0.5.7+commit.6da8b019.Linux.g++"},networks:{},schemaVersion:"3.0.23",updatedAt:"2020-04-07T04:29:24.704Z",devdoc:{author:"Set Protocol ",methods:{"allowance(address,address)":{details:"Function to check the amount of tokens that an owner allowed to a spender.",params:{owner:"address The address which owns the funds.",spender:"address The address which will spend the funds."},"return":"A uint256 specifying the amount of tokens still available for the spender."},"approve(address,uint256)":{details:"Approve the passed address to spend the specified amount of tokens on behalf of msg.sender. Beware that changing an allowance with this method brings the risk that someone may use both the old and the new allowance by unfortunate transaction ordering. One possible solution to mitigate this race condition is to first reduce the spender's allowance to 0 and set the desired value afterwards: https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729",params:{spender:"The address which will spend the funds.",value:"The amount of tokens to be spent."}},"balanceOf(address)":{details:"Gets the balance of the specified address.",params:{owner:"The address to query the balance of."},"return":"A uint256 representing the amount owned by the passed address."},"decreaseAllowance(address,uint256)":{details:"Decrease the amount of tokens that an owner allowed to a spender. approve should be called when _allowed[msg.sender][spender] == 0. To decrement allowed value is better to use this function to avoid 2 calls (and wait until the first transaction is mined) From MonolithDAO Token.sol Emits an Approval event.",params:{spender:"The address which will spend the funds.",subtractedValue:"The amount of tokens to decrease the allowance by."}},"increaseAllowance(address,uint256)":{details:"Increase the amount of tokens that an owner allowed to a spender. approve should be called when _allowed[msg.sender][spender] == 0. To increment allowed value is better to use this function to avoid 2 calls (and wait until the first transaction is mined) From MonolithDAO Token.sol Emits an Approval event.",params:{addedValue:"The amount of tokens to increase the allowance by.",spender:"The address which will spend the funds."}},"totalSupply()":{details:"Total number of tokens in existence"},"transfer(address,uint256)":{details:"Transfer token to a specified address",params:{to:"The address to transfer to.",value:"The amount to be transferred."}},"transferFrom(address,address,uint256)":{details:"Transfer tokens from one address to another. Note that while this function emits an Approval event, this is not required as per the specification, and other compliant implementations may not emit the event.",params:{from:"address The address which you want to send tokens from",to:"address The address which you want to transfer to",value:"uint256 the amount of tokens to be transferred"}}},title:"RebalancingSettlement"},userdoc:{methods:{}}};